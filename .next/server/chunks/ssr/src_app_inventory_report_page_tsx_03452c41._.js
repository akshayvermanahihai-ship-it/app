module.exports=[76189,a=>{"use strict";a.s(["default",()=>k]);var b=a.i(87924),c=a.i(72131),d=a.i(83497),e=a.i(84505),f=a.i(81464),g=a.i(41675),h=a.i(24669),i=a.i(53277),j=a.i(66632);function k(){let a=(0,j.useToastContext)(),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(1),[s]=(0,c.useState)(10),[t,u]=(0,c.useState)({type:"",from_date:"",to_date:"",item_id:""}),[v,w]=(0,c.useState)([]);(0,c.useEffect)(()=>{x(),y()},[]);let x=async()=>{try{let a=await fetch("https://varahasdc.co.in/api/inventory/items");if(a.ok){let b=await a.json();w(b.data||[])}}catch(a){console.error("Error fetching items:",a)}},y=async()=>{p(!0),r(1);try{let a=new URLSearchParams;Object.entries(t).forEach(([b,c])=>{c&&"ALL"!==c&&a.append(b,c)});let b=await fetch(`https://varahasdc.co.in/api/inventory/transactions?${a}`);if(b.ok){let a=await b.json();l(a.data||[]),z(a.data||[])}}catch(b){console.error("Error fetching transactions:",b),a.error("Error fetching transactions")}finally{p(!1)}},z=a=>{let b=new Map,c=new Map,d=0;a.forEach(e=>{let f=e.total_amount||0;d+=f;let g=e.item_name;b.has(g)||b.set(g,{item_name:g,transaction_count:0,total_value:0});let h=b.get(g);if(h.transaction_count++,h.total_value+=f,"INWARD"===e.transaction_type&&e.supplier){let b=e.supplier;c.has(b)||c.set(b,{supplier_name:b,item_count:0,transaction_count:0,total_value:0});let d=c.get(b);d.transaction_count++,d.total_value+=f,d.item_count=[...new Set(a.filter(a=>a.supplier===b).map(a=>a.item_name))].length}}),n({total_items:[...new Set(a.map(a=>a.item_name))].length,total_transactions:a.length,total_value:d,by_item:Array.from(b.values()),by_supplier:Array.from(c.values())})},A=Math.ceil(k.length/s),B=(q-1)*s,C=k.slice(B,B+s),D=(a,b)=>{u(c=>({...c,[a]:b}))};return(0,b.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Inventory Report"}),(0,b.jsx)("p",{className:"text-gray-600 mt-2",children:"Comprehensive inventory transaction reporting with value calculations"})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:[(0,b.jsxs)("div",{className:"flex items-center mb-4",children:[(0,b.jsx)(f.Filter,{className:"h-5 w-5 text-gray-600 mr-2"}),(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Filters"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transaction Type"}),(0,b.jsxs)("select",{value:t.type,onChange:a=>D("type",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500",children:[(0,b.jsx)("option",{value:"",children:"All Types"}),(0,b.jsx)("option",{value:"INWARD",children:"Inward"}),(0,b.jsx)("option",{value:"OUTWARD",children:"Outward"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item"}),(0,b.jsxs)("select",{value:t.item_id,onChange:a=>D("item_id",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500",children:[(0,b.jsx)("option",{value:"",children:"All Items"}),v.map(a=>(0,b.jsx)("option",{value:a.id,children:a.item_name},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Date"}),(0,b.jsx)("input",{type:"text",placeholder:"28-09-2025",value:t.from_date,onChange:a=>{let b=a.target.value.replace(/\D/g,"");b.length>=2&&(b=b.slice(0,2)+"-"+b.slice(2)),b.length>=5&&(b=b.slice(0,5)+"-"+b.slice(5,9)),D("from_date",b)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500",maxLength:10})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Date"}),(0,b.jsx)("input",{type:"text",placeholder:"28-09-2025",value:t.to_date,onChange:a=>{let b=a.target.value.replace(/\D/g,"");b.length>=2&&(b=b.slice(0,2)+"-"+b.slice(2)),b.length>=5&&(b=b.slice(0,5)+"-"+b.slice(5,9)),D("to_date",b)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500",maxLength:10})]})]}),(0,b.jsxs)("div",{className:"flex space-x-3 mt-4",children:[(0,b.jsx)("button",{onClick:y,disabled:o,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:o?"Loading...":"Apply Filters"}),(0,b.jsxs)("button",{onClick:()=>{try{if(0===k.length)return void a.error("No data to export");let b=t.from_date&&t.to_date?`${t.from_date} to ${t.to_date}`:"All Dates",c=t.type||"All Types",d=["VARAHA SDC : INVENTORY MANAGEMENT","INVENTORY TRANSACTION REPORT",`Date Range: ${b}`,`Transaction Type: ${c}`,"","S.No,Item Name,Type,Quantity,Unit,Rate,Amount,Supplier/Department,Date",...k.map((a,b)=>[b+1,`"${a.item_name||""}"`,a.transaction_type,a.quantity||0,`"${a.unit||""}"`,a.rate||0,a.total_amount||0,`"${a.supplier||a.department||""}"`,`"${a.transaction_date||""}"`].join(","))].join("\n"),e=new Blob([d],{type:"text/csv;charset=utf-8;"}),f=document.createElement("a"),g=URL.createObjectURL(e);f.setAttribute("href",g),f.setAttribute("download","inventory-transaction-report.csv"),f.style.visibility="hidden",document.body.appendChild(f),f.click(),document.body.removeChild(f),a.success("Report downloaded successfully")}catch(b){console.error("Download error:",b),a.error("Error downloading report")}},className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[(0,b.jsx)(e.Download,{className:"h-4 w-4 mr-2 inline"}),"Excel"]})]})]}),m&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,b.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(d.Package,{className:"h-8 w-8 text-blue-600"}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Items"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:m.total_items||0})]})]})}),(0,b.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(h.TrendingUp,{className:"h-8 w-8 text-green-600"}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Transactions"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:m.total_transactions||0})]})]})}),(0,b.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(g.Calendar,{className:"h-8 w-8 text-purple-600"}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["₹",(m.total_value||0).toLocaleString()]})]})]})})]}),m&&(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Transactions by Item"}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-2 text-left",children:"Sr.No"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left",children:"Item"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left",children:"Transactions"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left",children:"Amount"})]})}),(0,b.jsx)("tbody",{children:m.by_item&&m.by_item.length>0?(0,b.jsxs)(b.Fragment,{children:[m.by_item.map((a,c)=>(0,b.jsxs)("tr",{className:"border-t",children:[(0,b.jsx)("td",{className:"px-4 py-2",children:c+1}),(0,b.jsx)("td",{className:"px-4 py-2",children:a.item_name||"Unknown"}),(0,b.jsx)("td",{className:"px-4 py-2",children:a.transaction_count||0}),(0,b.jsxs)("td",{className:"px-4 py-2",children:["₹",(a.total_value||0).toLocaleString()]})]},c)),(0,b.jsxs)("tr",{className:"border-t-2 border-gray-400 bg-gray-100 font-bold",children:[(0,b.jsx)("td",{className:"px-4 py-2",colSpan:2,children:"Total"}),(0,b.jsx)("td",{className:"px-4 py-2",children:m.by_item.reduce((a,b)=>a+(b.transaction_count||0),0)}),(0,b.jsxs)("td",{className:"px-4 py-2",children:["₹",m.by_item.reduce((a,b)=>a+(b.total_value||0),0).toLocaleString()]})]})]}):(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:4,className:"px-4 py-4 text-center text-gray-500",children:"No data available"})})})]})})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Transactions by Supplier"}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-2 text-left",children:"Sr.No"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left",children:"Supplier"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left",children:"Items"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left",children:"Transactions"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left",children:"Amount"})]})}),(0,b.jsx)("tbody",{children:m.by_supplier&&m.by_supplier.length>0?(0,b.jsxs)(b.Fragment,{children:[m.by_supplier.map((a,c)=>(0,b.jsxs)("tr",{className:"border-t",children:[(0,b.jsx)("td",{className:"px-4 py-2",children:c+1}),(0,b.jsx)("td",{className:"px-4 py-2",children:a.supplier_name||"Unknown"}),(0,b.jsx)("td",{className:"px-4 py-2",children:a.item_count||0}),(0,b.jsx)("td",{className:"px-4 py-2",children:a.transaction_count||0}),(0,b.jsxs)("td",{className:"px-4 py-2",children:["₹",(a.total_value||0).toLocaleString()]})]},c)),(0,b.jsxs)("tr",{className:"border-t-2 border-gray-400 bg-gray-100 font-bold",children:[(0,b.jsx)("td",{className:"px-4 py-2",colSpan:2,children:"Total"}),(0,b.jsx)("td",{className:"px-4 py-2",children:m.by_supplier.reduce((a,b)=>a+(b.item_count||0),0)}),(0,b.jsx)("td",{className:"px-4 py-2",children:m.by_supplier.reduce((a,b)=>a+(b.transaction_count||0),0)}),(0,b.jsxs)("td",{className:"px-4 py-2",children:["₹",m.by_supplier.reduce((a,b)=>a+(b.total_value||0),0).toLocaleString()]})]})]}):(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"px-4 py-4 text-center text-gray-500",children:"No data available"})})})]})})]})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Detailed Transactions"}),(0,b.jsxs)("div",{className:"overflow-x-auto",children:[(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"S.No"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Item"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rate"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Supplier/Dept"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:o?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:8,className:"px-6 py-8 text-center",children:(0,b.jsxs)("div",{className:"flex items-center justify-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"}),(0,b.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading transactions..."})]})})}):C&&C.length>0?C.map((a,c)=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:B+c+1}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:a.item_name||"Unknown"}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,b.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${"INWARD"===a.transaction_type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:"INWARD"===a.transaction_type?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.TrendingUp,{className:"h-3 w-3 mr-1"}),"IN"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.TrendingDown,{className:"h-3 w-3 mr-1"}),"OUT"]})})}),(0,b.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900",children:[a.quantity," ",a.unit]}),(0,b.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900",children:["₹",(a.rate||0).toLocaleString()]}),(0,b.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900",children:["₹",(a.total_amount||0).toLocaleString()]}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:a.supplier||a.department||"N/A"}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:a.transaction_date||"N/A"})]},c)):(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:8,className:"px-6 py-8 text-center text-gray-500",children:"No transactions found for the selected criteria"})})})]}),k.length>s&&(0,b.jsxs)("div",{className:"flex items-center justify-between mt-6 px-6",children:[(0,b.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",B+1," to ",Math.min(B+s,k.length)," of ",k.length," results"]}),(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsx)("button",{onClick:()=>r(a=>Math.max(a-1,1)),disabled:1===q,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),Array.from({length:Math.min(5,A)},(a,c)=>{let d=q<=3?c+1:q-2+c;return d>A?null:(0,b.jsx)("button",{onClick:()=>r(d),className:`px-3 py-1 border rounded text-sm ${q===d?"bg-red-600 text-white border-red-600":"border-gray-300 hover:bg-gray-50"}`,children:d},d)}),(0,b.jsx)("button",{onClick:()=>r(a=>Math.min(a+1,A)),disabled:q===A,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})]})]})]})]})})}}];

//# sourceMappingURL=src_app_inventory_report_page_tsx_03452c41._.js.map