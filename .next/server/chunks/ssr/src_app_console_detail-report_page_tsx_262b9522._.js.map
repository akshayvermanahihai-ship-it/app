{"version":3,"sources":["turbopack:///[project]/src/app/console/detail-report/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Calendar, Download, RefreshCw } from 'lucide-react';\nimport { useToastContext } from '@/context/ToastContext';\nimport * as XLSX from 'xlsx';\n\ninterface DetailReport {\n  con_id: number;\n  c_p_cro: string;\n  examination_id: number;\n  number_films: number;\n  number_scan: string;\n  number_contrast: number;\n  issue_cd: string;\n  start_time: string;\n  stop_time: string;\n  status: string;\n  technician_name: string;\n  nursing_name: string;\n  remark: string;\n  added_on: string;\n  patient_name: string;\n  pre: string;\n  doctor_name: string;\n  age: string;\n  category: string;\n  scan_type: string;\n  scan_names?: string;\n  amount: number;\n  cro: string;\n  date: string;\n}\n\nexport default function ConsoleDetailReport() {\n  const toast = useToastContext();\n  const [reports, setReports] = useState<DetailReport[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [fromDate, setFromDate] = useState(\n    new Date().toLocaleDateString('en-CA', { timeZone: 'Asia/Calcutta' })\n  );\n  const [toDate, setToDate] = useState(\n    new Date().toLocaleDateString('en-CA', { timeZone: 'Asia/Calcutta' })\n  );\n  const [exporting, setExporting] = useState(false);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalRevenue, setTotalRevenue] = useState(0);\n  const itemsPerPage = 10;\n\n  useEffect(() => {\n    setCurrentPage(1);\n  }, [fromDate, toDate]);\n\n  useEffect(() => {\n    // Fetch data on initial load with today's date\n    fetchReports();\n  }, []);\n\n  const validateDateRange = () => {\n    if (!fromDate || !toDate) {\n      toast.error('Please select both from and to dates');\n      return false;\n    }\n    \n    const from = new Date(fromDate);\n    const to = new Date(toDate);\n    \n    if (from > to) {\n      toast.error('From date cannot be later than to date');\n      return false;\n    }\n    \n    return true;\n  };\n\n  const fetchReports = async () => {\n    if (!validateDateRange()) {\n      return;\n    }\n    \n    setLoading(true);\n    try {\n      const params = new URLSearchParams({\n        fromDate: fromDate.split('-').reverse().join('-'),\n        toDate: toDate.split('-').reverse().join('-')\n      });\n      \n      const response = await fetch(`https://varahasdc.co.in/api/console/detail-report?${params}`);\n      if (response.ok) {\n        const data = await response.json();\n        setReports(data.data || []);\n        \n        if (!data.data || data.data.length === 0) {\n          toast.error('No data found for the selected date range');\n        } else {\n          toast.success(`Found ${data.data.length} records for the selected date range`);\n        }\n        \n        // Calculate total revenue\n        const revenue = (data.data || []).reduce((sum: number, report: DetailReport) => {\n          return sum + (parseInt(String(report.amount)) || 0);\n        }, 0);\n        setTotalRevenue(revenue);\n      } else {\n        const errorData = await response.json().catch(() => ({}));\n        console.error('Console detail report API error:', errorData);\n        toast.error(`Failed to fetch detail report: ${errorData.error || 'Unknown error'}`);\n      }\n    } catch (error) {\n      console.error('Error fetching detail report:', error);\n      toast.error('Network error: Unable to fetch data');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const exportToExcel = () => {\n    if (reports.length === 0) {\n      toast.error('No data to export');\n      return;\n    }\n\n    setExporting(true);\n    try {\n      const formattedFromDate = fromDate.split('-').reverse().join('-');\n      const formattedToDate = toDate.split('-').reverse().join('-');\n      \n      // Create HTML table with styling similar to reception daily report\n      let htmlContent = `\n        <html>\n          <head>\n            <meta charset=\"UTF-8\">\n            <style>\n              table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; }\n              th, td { border: 1px solid black; padding: 8px; text-align: left; }\n              th { background-color: #f0f0f0; font-weight: bold; text-align: center; }\n              .header { text-align: center; font-weight: bold; font-size: 16px; }\n              .center { text-align: center; }\n              .amount { text-align: right; }\n            </style>\n          </head>\n          <body>\n            <table>\n              <tr><th colspan=\"20\" class=\"header\">VARAHA SDC</th></tr>\n              <tr><th colspan=\"20\" class=\"header\">CONSOLE DETAIL REPORT - From ${formattedFromDate} To ${formattedToDate}</th></tr>\n              <tr>\n                <th>S.No</th>\n                <th>CRO</th>\n                <th>Exam. Id</th>\n                <th>Name</th>\n                <th>Doctor Name</th>\n                <th>Age</th>\n                <th>Category</th>\n                <th>Scan Type</th>\n                <th>Films</th>\n                <th>Number of Scan</th>\n                <th>Issue CD/DVD</th>\n                <th>Contrast</th>\n                <th>Amount</th>\n                <th>Start Time</th>\n                <th>End Time</th>\n                <th>Technician Name</th>\n                <th>Nursing Name</th>\n                <th>Remark</th>\n                <th>Status</th>\n                <th>Date</th>\n              </tr>\n      `;\n\n      // Calculate totals\n      let totalFilms = 0, totalScans = 0, totalCD = 0, totalContrast = 0, totalAmount = 0;\n\n      // Add patient data rows\n      reports.forEach((report: DetailReport, index: number) => {\n        const films = parseInt(String(report.number_films)) || 0;\n        const scans = parseInt(String(report.number_scan)) || 0;\n        const cd = report.issue_cd === 'YES' ? 1 : 0;\n        const contrast = parseInt(String(report.number_contrast)) || 0;\n        const amount = parseInt(String(report.amount)) || 0;\n        \n        totalFilms += films;\n        totalScans += scans;\n        totalCD += cd;\n        totalContrast += contrast;\n        totalAmount += amount;\n        \n        htmlContent += `\n          <tr>\n            <td class=\"center\">${index + 1}</td>\n            <td>${report.c_p_cro || report.cro}</td>\n            <td class=\"center\">${report.examination_id || 0}</td>\n            <td>${report.pre} ${report.patient_name}</td>\n            <td>${report.doctor_name || '-'}</td>\n            <td class=\"center\">${report.age || '-'}</td>\n            <td>${report.category || '-'}</td>\n            <td>${report.scan_type || '-'}</td>\n            <td class=\"center\">${films}</td>\n            <td class=\"center\">${scans}</td>\n            <td class=\"center\">${cd}</td>\n            <td class=\"center\">${contrast}</td>\n            <td class=\"amount\">₹${amount.toLocaleString()}</td>\n            <td class=\"center\">${report.start_time || '-'}</td>\n            <td class=\"center\">${report.stop_time || '-'}</td>\n            <td>${report.technician_name || '-'}</td>\n            <td>${report.nursing_name || '-'}</td>\n            <td>${report.remark || '-'}</td>\n            <td class=\"center\">${report.status || '-'}</td>\n            <td class=\"center\">${report.date ? report.date.split('-').reverse().join('-') : (report.added_on ? report.added_on.split('-').reverse().join('-') : '-')}</td>\n          </tr>\n        `;\n      });\n\n      // Add totals row\n      htmlContent += `\n              <tr><td colspan=\"20\"></td></tr>\n              <tr style=\"font-weight: bold; background-color: #f0f0f0;\">\n                <td class=\"center\">-</td>\n                <td class=\"center\">-</td>\n                <td class=\"center\">-</td>\n                <td class=\"center\">-</td>\n                <td class=\"center\">-</td>\n                <td class=\"center\">-</td>\n                <td class=\"center\">TOTAL</td>\n                <td class=\"center\">-</td>\n                <td class=\"center\">${totalFilms}</td>\n                <td class=\"center\">${totalScans}</td>\n                <td class=\"center\">${totalCD}</td>\n                <td class=\"center\">${totalContrast}</td>\n                <td class=\"amount\">₹${totalAmount.toLocaleString()}</td>\n                <td class=\"center\">-</td>\n                <td class=\"center\">-</td>\n                <td class=\"center\">-</td>\n                <td class=\"center\">-</td>\n                <td class=\"center\">-</td>\n                <td class=\"center\">-</td>\n                <td class=\"center\">${reports.length}</td>\n              </tr>\n            </table>\n          </body>\n        </html>\n      `;\n\n      // Create blob and download as Excel file\n      const blob = new Blob([htmlContent], { \n        type: 'application/vnd.ms-excel;charset=utf-8' \n      });\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `CONSOLE_DETAIL_REPORT_${formattedFromDate}_TO_${formattedToDate}.xls`;\n      a.click();\n      window.URL.revokeObjectURL(url);\n      \n    } catch (error) {\n      console.error('Export error:', error);\n      toast.error('Export failed');\n    } finally {\n      setExporting(false);\n    }\n  };\n\n  return (\n    <div className=\"p-3 sm:p-6 space-y-4 sm:space-y-6\">\n      {/* Header */}\n      <div className=\"bg-gradient-to-r from-sky-500 to-sky-600 text-white p-4 sm:p-6 rounded-xl shadow-lg\">\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0\">\n          <div>\n            <h1 className=\"text-xl sm:text-3xl font-bold mb-2\">Detail Report</h1>\n            <p className=\"text-sky-100 text-sm sm:text-base\">Console detail activity report with date range</p>\n          </div>\n          <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-3\">\n            <button\n              onClick={exportToExcel}\n              disabled={exporting || reports.length === 0}\n              className=\"flex items-center justify-center space-x-2 px-3 sm:px-4 py-2 bg-green-600 hover:bg-green-500 rounded-lg transition-colors disabled:opacity-50 text-sm sm:text-base\"\n            >\n              <Download className=\"h-4 w-4 sm:h-5 sm:w-5\" />\n              <span className=\"hidden sm:inline\">{exporting ? 'Exporting...' : 'Export Excel'}</span>\n              <span className=\"sm:hidden\">Export</span>\n            </button>\n            <button\n              onClick={fetchReports}\n              disabled={loading}\n              className=\"flex items-center justify-center space-x-2 px-3 sm:px-4 py-2 bg-sky-500 hover:bg-sky-400 rounded-lg transition-colors disabled:opacity-50 text-sm sm:text-base\"\n            >\n              <RefreshCw className={`h-4 w-4 sm:h-5 sm:w-5 ${loading ? 'animate-spin' : ''}`} />\n              <span>Refresh</span>\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Date Range Filter */}\n      <div className=\"bg-white p-4 sm:p-6 rounded-xl shadow-lg border border-gray-100\">\n        <div className=\"flex flex-col sm:flex-row sm:items-end space-y-4 sm:space-y-0 sm:space-x-4\">\n          <div className=\"flex-shrink-0\">\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">From Date</label>\n            <input\n              type=\"date\"\n              value={fromDate}\n              onChange={(e) => {\n                setFromDate(e.target.value);\n                setCurrentPage(1);\n              }}\n              className=\"px-3 py-2 w-full sm:w-auto border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent text-sm sm:text-base\"\n            />\n          </div>\n          <div className=\"flex-shrink-0\">\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">To Date</label>\n            <input\n              type=\"date\"\n              value={toDate}\n              onChange={(e) => {\n                setToDate(e.target.value);\n                setCurrentPage(1);\n              }}\n              className=\"px-3 py-2 w-full sm:w-auto border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent text-sm sm:text-base\"\n            />\n          </div>\n          <button\n            onClick={fetchReports}\n            disabled={loading || !fromDate || !toDate}\n            className=\"px-4 sm:px-6 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 transition-colors disabled:opacity-50 text-sm sm:text-base flex-shrink-0\"\n          >\n            Generate Report\n          </button>\n          <div className=\"text-xs sm:text-sm text-gray-600 break-words\">\n            <div className=\"sm:hidden\">\n              <div>Records: {reports.length}</div>\n              <div>Revenue: ₹{totalRevenue.toLocaleString()}</div>\n            </div>\n            <div className=\"hidden sm:block\">\n              Total Records: {reports.length} | Total Revenue: ₹{totalRevenue.toLocaleString()}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Table */}\n      <div className=\"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">Console Detail Activities</h2>\n          <p className=\"text-sm text-gray-600 mt-1\">\n            Report from {fromDate.split('-').reverse().join('-')} to {toDate.split('-').reverse().join('-')}\n          </p>\n        </div>\n\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">S.No</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">CRO</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Exam. Id</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Name</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Doctor</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Age</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Category</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Scan Type</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Films</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">No. Scan</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">CD/DVD</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Contrast</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Amount</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Start Time</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Stop Time</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Technician</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Nursing</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Remark</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Date</th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {loading ? (\n                <tr>\n                  <td colSpan={20} className=\"px-6 py-12 text-center\">\n                    <div className=\"flex items-center justify-center space-x-2\">\n                      <RefreshCw className=\"h-5 w-5 animate-spin text-blue-500\" />\n                      <span className=\"text-gray-500\">Loading detail report...</span>\n                    </div>\n                  </td>\n                </tr>\n              ) : reports.length === 0 ? (\n                <tr>\n                  <td colSpan={20} className=\"px-6 py-12 text-center text-gray-500\">\n                    No activities found for selected date range\n                  </td>\n                </tr>\n              ) : (\n                reports.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage).map((report, index) => (\n                  <tr key={`${report.c_p_cro || report.cro}-${index}`} className=\"hover:bg-gray-50 transition-colors\">\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black font-medium\">\n                      {(currentPage - 1) * itemsPerPage + index + 1}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"text-sm font-medium text-blue-600\">\n                        {report.c_p_cro || report.cro}\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\n                      {report.examination_id || 0}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"text-sm font-medium text-black\">\n                        {report.pre} {report.patient_name}\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\n                      {report.doctor_name || '-'}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\n                      {report.age || '-'}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\n                      {report.category || '-'}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\n                      {report.scan_names || report.scan_type || '-'}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\n                      {report.number_films || 0}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\n                      {report.number_scan || 0}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\n                      {report.issue_cd === 'YES' ? '1' : '0'}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\n                      {report.number_contrast || 0}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\n                      {report.amount || 0}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\n                      {report.start_time || '-'}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\n                      {report.stop_time || '-'}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\n                      {report.technician_name || '-'}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\n                      {report.nursing_name || '-'}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\n                      {report.remark || '-'}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <span className={`px-3 py-1 text-xs font-bold rounded-full border ${\n                        report.status === 'Complete' \n                          ? 'bg-green-100 text-green-900 border-green-300' \n                          : report.status === 'Pending'\n                          ? 'bg-yellow-100 text-yellow-900 border-yellow-300'\n                          : report.status === 'Recall'\n                          ? 'bg-red-100 text-red-900 border-red-300'\n                          : 'bg-gray-100 text-gray-900 border-gray-300'\n                      }`}>\n                        {report.status || 'N/A'}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-black\">\n                      {report.date ? report.date.split('-').reverse().join('-') : (report.added_on ? report.added_on.split('-').reverse().join('-') : '-')}\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </table>\n        </div>\n\n        {/* Client-side Pagination */}\n        {reports.length > itemsPerPage && (\n          <div className=\"px-6 py-4 border-t border-gray-200\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"text-sm text-gray-700\">\n                Page {currentPage} of {Math.ceil(reports.length / itemsPerPage)} | Total: {reports.length} records\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                {currentPage > 1 && (\n                  <>\n                    <button\n                      onClick={() => setCurrentPage(1)}\n                      className=\"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50\"\n                    >\n                      First\n                    </button>\n                    <button\n                      onClick={() => setCurrentPage(currentPage - 1)}\n                      className=\"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50\"\n                    >\n                      Previous\n                    </button>\n                  </>\n                )}\n                \n                <div className=\"flex items-center space-x-1\">\n                  {Array.from({ length: Math.min(5, Math.ceil(reports.length / itemsPerPage)) }, (_, i) => {\n                    const startPage = Math.max(1, currentPage - 2);\n                    const page = startPage + i;\n                    const totalPages = Math.ceil(reports.length / itemsPerPage);\n                    if (page > totalPages) return null;\n                    \n                    return (\n                      <button\n                        key={page}\n                        onClick={() => setCurrentPage(page)}\n                        className={`px-3 py-2 text-sm font-medium rounded-lg ${\n                          currentPage === page\n                            ? 'bg-sky-600 text-white'\n                            : 'text-gray-700 bg-white border border-gray-300 hover:bg-gray-50'\n                        }`}\n                      >\n                        {page}\n                      </button>\n                    );\n                  })}\n                </div>\n                \n                {currentPage < Math.ceil(reports.length / itemsPerPage) && (\n                  <>\n                    <button\n                      onClick={() => setCurrentPage(currentPage + 1)}\n                      className=\"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50\"\n                    >\n                      Next\n                    </button>\n                    <button\n                      onClick={() => setCurrentPage(Math.ceil(reports.length / itemsPerPage))}\n                      className=\"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50\"\n                    >\n                      Last\n                    </button>\n                  </>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}