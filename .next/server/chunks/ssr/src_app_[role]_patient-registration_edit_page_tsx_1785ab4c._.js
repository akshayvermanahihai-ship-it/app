module.exports=[26307,a=>{"use strict";a.s(["default",()=>n]);var b=a.i(87924),c=a.i(65402),d=a.i(55957),e=a.i(18604),f=a.i(72131),g=a.i(87532),h=a.i(14548),i=a.i(33508),j=a.i(41710),k=a.i(4720),l=a.i(46842),m=a.i(50944);function n(){let a=(0,m.useParams)().role,[n,o]=(0,f.useState)(""),[p,q]=(0,f.useState)(null),[r,s]=(0,f.useState)(!1),[t,u]=(0,f.useState)(1),[v,w]=(0,f.useState)([]),[x,y]=(0,f.useState)([]),[z,A]=(0,f.useState)([]),[B,C]=(0,f.useState)([]),{toast:D,showToast:E,hideToast:F}=(0,e.useToast)();(0,f.useEffect)(()=>{G()},[]);let G=async()=>{try{let[a,b,c]=await Promise.all([fetch("/api/hospitals"),fetch("/api/doctors"),fetch("/api/scans")]);w(await a.json()),y(await b.json()),A(await c.json());let d=[];for(let a=8;a<=18;a++)d.push({time_id:a,time_slot:`${a}:00`}),d.push({time_id:a+.5,time_slot:`${a}:30`});C(d)}catch(a){console.error("Error fetching master data:",a)}},H=async()=>{if(!n.trim())return void E("Please enter CRO number","error");s(!0);try{let a=await fetch(`/api/patients?cro=${n}`),b=await a.json();b&&b.length>0?(q(b[0]),E("Patient found successfully","success")):(E("Patient not found with this CRO number","error"),q(null))}catch(a){console.error("Error searching patient:",a),E("Error searching patient","error")}finally{s(!1)}},I=async()=>{if(p){s(!0);try{(await fetch("/api/patients",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).ok?E("Patient updated successfully!","success"):E("Error updating patient","error")}catch(a){console.error("Error updating patient:",a),E("Error updating patient","error")}finally{s(!1)}}},J=(a,b)=>{p&&q({...p,[a]:b})};return(0,b.jsx)(c.default,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:(0,b.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Edit Patient Registration - ",a]})}),p?(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[(0,b.jsx)("ul",{className:"flex border-b border-gray-200 mb-6",children:[{step:1,title:"1. Enrollment Detail",icon:l.User},{step:2,title:"2. Scan Options",icon:k.FileText},{step:3,title:"3. Payment Details",icon:j.Clock}].map(({step:a,title:c,icon:d})=>(0,b.jsx)("li",{className:"flex-1",children:(0,b.jsxs)("button",{onClick:()=>u(a),className:`w-full flex items-center justify-center px-4 py-3 text-sm font-medium border-b-2 transition-colors ${t===a?"border-sky-500 text-sky-600 bg-sky-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[(0,b.jsx)(d,{className:"h-4 w-4 mr-2"}),c]})},a))}),(0,b.jsxs)("div",{className:"min-h-96",children:[1===t&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CRO No."}),(0,b.jsx)("input",{type:"text",value:p?.cro||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),(0,b.jsx)("input",{type:"date",value:p?.date||"",onChange:a=>J("date",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hospital Name"}),(0,b.jsxs)("select",{value:p?.hospital_id||"",onChange:a=>J("hospital_id",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"",children:"Select Hospital"}),v.map(a=>(0,b.jsx)("option",{value:a.h_id,children:a.h_name},a.h_id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doctor Name"}),(0,b.jsxs)("select",{value:p?.doctor_name||"",onChange:a=>J("doctor_name",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"",children:"Select Doctor"}),x.map(a=>(0,b.jsx)("option",{value:a.d_id,children:a.dname},a.d_id))]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4",children:[(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),(0,b.jsxs)("select",{value:p?.pre||"",onChange:a=>J("pre",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"Mr.",children:"Mr."}),(0,b.jsx)("option",{value:"Mrs.",children:"Mrs."}),(0,b.jsx)("option",{value:"Master",children:"Master"}),(0,b.jsx)("option",{value:"Miss",children:"Miss"}),(0,b.jsx)("option",{value:"Baby",children:"Baby"})]})]}),(0,b.jsxs)("div",{className:"md:col-span-10",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient Name"}),(0,b.jsx)("input",{type:"text",value:p?.patient_name||"",onChange:a=>J("patient_name",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Enter patient name"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Age"}),(0,b.jsx)("input",{type:"number",value:p?.age||"",onChange:a=>J("age",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Age Type"}),(0,b.jsxs)("select",{value:p?.age_type||"",onChange:a=>J("age_type",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"",children:"Select"}),(0,b.jsx)("option",{value:"Year",children:"Year"}),(0,b.jsx)("option",{value:"Month",children:"Month"}),(0,b.jsx)("option",{value:"Days",children:"Days"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender"}),(0,b.jsxs)("select",{value:p?.gender||"",onChange:a=>J("gender",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"",children:"Select"}),(0,b.jsx)("option",{value:"Male",children:"Male"}),(0,b.jsx)("option",{value:"Female",children:"Female"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,b.jsxs)("select",{value:p?.category||"",onChange:a=>J("category",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"",children:"Select"}),(0,b.jsx)("option",{value:"GEN",children:"GEN / Paid"}),(0,b.jsx)("option",{value:"IPD FREE",children:"IPD Free"}),(0,b.jsx)("option",{value:"OPD FREE",children:"OPD Free"}),(0,b.jsx)("option",{value:"RTA",children:"RTA"}),(0,b.jsx)("option",{value:"RGHS",children:"RGHS"}),(0,b.jsx)("option",{value:"Chiranjeevi",children:"Chiranjeevi"}),(0,b.jsx)("option",{value:"Destitute",children:"Destitute"}),(0,b.jsx)("option",{value:"PRISONER",children:"PRISONER"}),(0,b.jsx)("option",{value:"Sn. CITIZEN",children:"Sn. CITIZEN"}),(0,b.jsx)("option",{value:"Aayushmaan",children:"Aayushmaan"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),(0,b.jsx)("input",{type:"text",value:p?.address||"",onChange:a=>J("address",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Enter address"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),(0,b.jsx)("input",{type:"text",value:p?.city||"",onChange:a=>J("city",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Enter city"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Number"}),(0,b.jsx)("input",{type:"tel",value:p?.contact_number||"",onChange:a=>J("contact_number",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Enter contact number"})]})]}),2===t&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Previously Selected Scans"}),(0,b.jsx)("input",{type:"text",value:p?.scan_type||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Update Scan Type"}),(0,b.jsx)("select",{multiple:!0,value:p?.scan_type?.split(",")||[],onChange:a=>{J("scan_type",Array.from(a.target.selectedOptions,a=>a.value).join(","))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg h-32",children:z.map(a=>(0,b.jsx)("option",{value:a.s_id,children:a.s_name},a.s_id))})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Appointment Date"}),(0,b.jsx)("input",{type:"date",value:p?.date||"",onChange:a=>J("date",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time In"}),(0,b.jsxs)("select",{value:p?.allot_time||"",onChange:a=>J("allot_time",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"",children:"Select Time"}),B.map(a=>(0,b.jsx)("option",{value:a.time_id,children:a.time_slot},a.time_id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Out"}),(0,b.jsxs)("select",{value:p?.allot_time_out||"",onChange:a=>J("allot_time_out",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"",children:"Select Time"}),B.map(a=>(0,b.jsx)("option",{value:a.time_id,children:a.time_slot},a.time_id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),(0,b.jsx)("input",{type:"number",value:p?.amount||"",onChange:a=>J("amount",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Time"}),(0,b.jsx)("input",{type:"text",placeholder:"Auto calculated",className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50",readOnly:!0})]})]})]}),3===t&&(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Payment Summary"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Patient Name:"}),(0,b.jsx)("span",{className:"font-medium",children:p?.patient_name})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Age:"}),(0,b.jsxs)("span",{children:[p?.age," ",p?.age_type]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Gender:"}),(0,b.jsx)("span",{children:p?.gender})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Total Amount:"}),(0,b.jsxs)("span",{className:"font-medium",children:["â‚¹",p?.amount]})]})]})]})})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center mt-8 pt-6 border-t",children:[(0,b.jsx)("div",{className:"flex space-x-2",children:t>1&&(0,b.jsx)("button",{onClick:()=>u(t-1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Previous"})}),(0,b.jsx)("div",{className:"flex space-x-2",children:t<3?(0,b.jsx)("button",{onClick:()=>u(t+1),className:"px-4 py-2 bg-sky-500 text-white rounded-lg hover:bg-sky-600",children:"Next"}):(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsxs)(d.FormButton,{onClick:I,disabled:r,children:[(0,b.jsx)(h.Save,{className:"h-4 w-4 mr-2"}),r?"Saving...":"Save Changes"]}),(0,b.jsxs)("button",{onClick:()=>{q(null),o(""),u(1)},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:[(0,b.jsx)(i.X,{className:"h-4 w-4 mr-2"}),"Exit"]})]})})]})]}):(0,b.jsx)("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:(0,b.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,b.jsxs)("div",{className:"text-center mb-6",children:[(0,b.jsx)(g.Search,{className:"h-12 w-12 text-sky-500 mx-auto mb-4"}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Search Patient"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Enter CRO number to find patient"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CRO Number"}),(0,b.jsx)("input",{type:"text",value:n,onChange:a=>o(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-sky-500",placeholder:"Enter CRO number"})]}),(0,b.jsx)(d.FormButton,{onClick:H,disabled:r,className:"w-full",children:r?"Searching...":"Search Patient"})]})]})}),(0,b.jsx)(e.Toast,{message:D.message,type:D.type,isVisible:D.isVisible,onClose:F})]})})}}];

//# sourceMappingURL=src_app_%5Brole%5D_patient-registration_edit_page_tsx_1785ab4c._.js.map