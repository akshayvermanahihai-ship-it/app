module.exports=[69520,a=>{"use strict";a.s(["RefreshCw",()=>b],69520);let b=(0,a.i(70106).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},89703,a=>{"use strict";a.s(["default",()=>h]);var b=a.i(87924),c=a.i(72131),d=a.i(87532),e=a.i(69520),f=a.i(66632),g=a.i(50944);function h(){let a=(0,f.useToastContext)(),h=(0,g.useRouter)(),[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(1),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)(new Date().toLocaleDateString("en-CA",{timeZone:"Asia/Calcutta"})),[w,x]=(0,c.useState)(new Date().toLocaleDateString("en-CA",{timeZone:"Asia/Calcutta"}));(0,c.useEffect)(()=>{p(1)},[u,w]),(0,c.useEffect)(()=>{y()},[u,w]),(0,c.useEffect)(()=>{m.trim()?t(q.filter(a=>a.cro.toLowerCase().includes(m.toLowerCase())||a.patient_name.toLowerCase().includes(m.toLowerCase()))):t(q),p(1)},[m,q]);let y=async()=>{if(u&&w?!(new Date(u)>new Date(w))||(a.error("From date cannot be later than to date"),!1):(a.error("Please select both from and to dates"),!1)){l(!0);try{let b=new URLSearchParams({from_date:u.split("-").reverse().join("-"),to_date:w.split("-").reverse().join("-")}),c=await fetch(`/api/doctor/ct-scan-doctor-list?${b}`);if(c.ok){let b=await c.json();r(b.data||[]),t(b.data||[]),b.data&&0!==b.data.length?a.success(`Found ${b.data.length} records for the selected date range`):a.error("No data found for the selected date range")}else{let b=await c.json().catch(()=>({}));a.error(b.error||"Failed to fetch patient data")}}catch(b){console.error("Error fetching patient data:",b),a.error("Error loading data")}finally{l(!1)}}},z=a=>{console.log("Navigating to nursing page with CRO:",a);let b=encodeURIComponent(a),c=`/doctor/nursing/${b}`;console.log("Navigation URL:",c),h.push(c)},A=(o-1)*10,B=Math.ceil(s.length/10),C=s.slice(A,A+10);return(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white p-6 rounded-xl shadow-lg",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"CT Scan Doctor List"}),(0,b.jsx)("p",{className:"text-emerald-100",children:"Manage CT scan doctor assignments with date filtering"})]}),(0,b.jsxs)("button",{onClick:y,disabled:k,className:"flex items-center space-x-2 px-4 py-2 bg-emerald-500 hover:bg-emerald-400 rounded-lg transition-colors disabled:opacity-50",children:[(0,b.jsx)(e.RefreshCw,{className:`h-5 w-5 ${k?"animate-spin":""}`}),(0,b.jsx)("span",{children:"Refresh"})]})]})}),(0,b.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-end space-y-4 sm:space-y-0 sm:space-x-4",children:[(0,b.jsxs)("div",{className:"flex-shrink-0",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,b.jsx)("input",{type:"date",value:u,onChange:a=>{v(a.target.value),p(1)},className:"px-3 py-2 w-full sm:w-auto border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{className:"flex-shrink-0",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,b.jsx)("input",{type:"date",value:w,onChange:a=>{x(a.target.value),p(1)},className:"px-3 py-2 w-full sm:w-auto border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(d.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,b.jsx)("input",{type:"text",placeholder:"Search by CRO or Patient Name...",value:m,onChange:a=>n(a.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]})]}),(0,b.jsx)("button",{onClick:y,disabled:k||!u||!w,className:"px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 flex-shrink-0",children:"Generate Report"}),(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:["Total Records: ",s.length]})]})}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,b.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"CT Scan Doctor Assignments"}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Report from ",u.split("-").reverse().join("-")," to ",w.split("-").reverse().join("-")," | Page ",o," of ",B," | Total: ",s.length," records"]})]}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full border-collapse",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-b-2 border-gray-200",children:[(0,b.jsx)("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200",children:"Sr. No."}),(0,b.jsx)("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200",children:"CRO"}),(0,b.jsx)("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200",children:"Patient Name"}),(0,b.jsx)("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200",children:"Age"}),(0,b.jsx)("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200",children:"Date"}),(0,b.jsx)("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200",children:"CT Scan Doctor"}),(0,b.jsx)("th",{className:"px-4 py-4 text-center text-sm font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200",children:"CT Status"}),(0,b.jsx)("th",{className:"px-4 py-4 text-center text-sm font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200",children:"X-Ray Status"}),(0,b.jsx)("th",{className:"px-4 py-4 text-center text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"bg-white",children:k?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:9,className:"px-6 py-12 text-center border-b border-gray-200",children:(0,b.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,b.jsx)(e.RefreshCw,{className:"h-5 w-5 animate-spin text-emerald-500"}),(0,b.jsx)("span",{className:"text-gray-500",children:"Loading patient data..."})]})})}):0===C.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:9,className:"px-6 py-12 text-center text-gray-500 border-b border-gray-200",children:"No patient records found for selected date range"})}):C.map((a,c)=>(0,b.jsxs)("tr",{className:"hover:bg-blue-50 transition-colors border-b border-gray-200",children:[(0,b.jsx)("td",{className:"px-4 py-4 text-sm text-gray-900 border-r border-gray-200 font-medium",children:A+c+1}),(0,b.jsx)("td",{className:"px-4 py-4 border-r border-gray-200",children:(0,b.jsx)("div",{className:"text-sm font-semibold text-blue-600 cursor-pointer hover:text-blue-800 hover:underline",onClick:()=>z(a.cro),children:a.cro})}),(0,b.jsx)("td",{className:"px-4 py-4 border-r border-gray-200",children:(0,b.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[a.pre," ",a.patient_name]})}),(0,b.jsx)("td",{className:"px-4 py-4 text-sm text-gray-900 border-r border-gray-200",children:a.age||"-"}),(0,b.jsx)("td",{className:"px-4 py-4 text-sm text-gray-900 border-r border-gray-200",children:a.date}),(0,b.jsx)("td",{className:"px-4 py-4 text-sm text-gray-900 border-r border-gray-200",children:a.ct_doctor_name||"-"}),(0,b.jsx)("td",{className:"px-4 py-4 text-center border-r border-gray-200",children:(0,b.jsx)("span",{className:`px-3 py-1 text-xs font-bold rounded-full ${a.n_patient_ct?.toLowerCase()==="yes"?"bg-green-100 text-green-800":a.n_patient_ct?.toLowerCase()==="no"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:a.n_patient_ct?.toLowerCase()==="yes"?"Completed":a.n_patient_ct?.toLowerCase()==="no"?"Pending":"Not Set"})}),(0,b.jsx)("td",{className:"px-4 py-4 text-center border-r border-gray-200",children:(0,b.jsx)("span",{className:`px-3 py-1 text-xs font-bold rounded-full ${a.n_patient_x_ray?.toLowerCase()==="yes"?"bg-green-100 text-green-800":a.n_patient_x_ray?.toLowerCase()==="no"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:a.n_patient_x_ray?.toLowerCase()==="yes"?"Completed":a.n_patient_x_ray?.toLowerCase()==="no"?"Pending":"Not Set"})}),(0,b.jsx)("td",{className:"px-4 py-4 text-center",children:(0,b.jsx)("button",{onClick:()=>z(a.cro),className:"inline-flex items-center justify-center px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-all duration-200 text-sm font-medium shadow-md hover:shadow-lg transform hover:scale-105",title:"View Nursing Details",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"font-semibold",children:a.cro}),(0,b.jsx)("div",{className:"text-xs opacity-90",children:a.date})]})})})]},a.patient_id))})]})}),B>1&&(0,b.jsx)("div",{className:"px-6 py-4 border-t border-gray-200",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"text-sm text-gray-700",children:["Page ",o," of ",B," | Total: ",s.length," records"]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[o>1&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>p(1),className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"First"}),(0,b.jsx)("button",{onClick:()=>p(o-1),className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Previous"})]}),(0,b.jsx)("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,B)},(a,c)=>{let d=Math.max(1,o-2)+c;return d>B?null:(0,b.jsx)("button",{onClick:()=>p(d),className:`px-3 py-2 text-sm font-medium rounded-lg ${o===d?"bg-emerald-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"}`,children:d},d)})}),o<B&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>p(o+1),className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Next"}),(0,b.jsx)("button",{onClick:()=>p(B),className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Last"})]})]})]})})]})]})}}];

//# sourceMappingURL=_01d17ac3._.js.map