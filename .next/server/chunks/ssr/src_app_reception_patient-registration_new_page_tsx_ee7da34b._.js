module.exports=[82701,a=>{"use strict";a.s(["default",()=>k]);var b=a.i(87924),c=a.i(72131),d=a.i(46842),e=a.i(4720),f=a.i(210),g=a.i(32860),h=a.i(33441),i=a.i(5784),j=a.i(66632);function k(){let a=(0,j.useToastContext)(),[k,l]=(0,c.useState)(1),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(!1),[O,P]=(0,c.useState)(""),[Q,R]=(0,c.useState)(""),[S,T]=(0,c.useState)({}),[U,V]=(0,c.useState)(null),[W,X]=(0,c.useState)([]),[Y,Z]=(0,c.useState)(!1),[$,_]=(0,c.useState)(null),[aa,ab]=(0,c.useState)({date:new Date().toLocaleDateString("en-GB").split("/").reverse().join("-"),hospital_name:"",doctor_name:"",pre:"Mr.",firstname:"",age:"",age_type:"Year",gender:"Male",petient_type:"GEN / Paid",p_uni_submit:"N",p_uni_id_name:"",address:"",city:"",contact_number:"",type_of_scan:[],appoint_date:new Date().toLocaleDateString("en-GB").split("/").reverse().join("-"),time:"",time_in:"",amount:"0",est_time:"0",total_amount:"0",rec_amount:"0",dis_amount:"0",due_amount:"0"});(0,c.useEffect)(()=>{ac(),ad(),ae(),af(),ah();let a=new URLSearchParams(window.location.search).get("edit");a&&(n(!0),p(a),ak(a));let b=a=>{a.target.closest(".relative")||(H(!1),J(!1),L(!1),N(!1))};return document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[]),(0,c.useEffect)(()=>{if(!m&&!aa.time){let a=new Date;if(new Date(aa.appoint_date).toDateString()===a.toDateString()){let a=ao(),b=am(a);ab(b=>({...b,time:a})),P(b)}}},[aa.appoint_date]),(0,c.useEffect)(()=>{aa.time&&aa.est_time&&parseInt(aa.est_time)>0&&an(aa.time,parseInt(aa.est_time))},[aa.time,aa.est_time]),(0,c.useEffect)(()=>{if(aa.time&&aa.est_time&&parseInt(aa.est_time)>0){let a=W.find(a=>a.time_id.toString()===aa.time);if(a){let b=a.time_slot.match(/(\d{1,2}):(\d{2})\s*(AM|PM)/i);if(b){let a=parseInt(b[1]),c=parseInt(b[2]),d=b[3].toUpperCase();"PM"===d&&12!==a?a+=12:"AM"===d&&12===a&&(a=0),an(`${a.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`,parseInt(aa.est_time))}}}},[aa.est_time,aa.time,W]);let ac=async()=>{try{let a=await fetch("https://varahasdc.co.in/api/reception/hospitals");if(a.ok){let b=await a.json();r(Array.isArray(b)?b:[])}}catch(a){console.error("Error fetching hospitals:",a)}},ad=async()=>{try{let a=await fetch("https://varahasdc.co.in/api/reception/doctors");if(a.ok){let b=await a.json();t(Array.isArray(b)?b:[])}}catch(a){console.error("Error fetching doctors:",a)}},ae=async()=>{try{let a=await fetch("https://varahasdc.co.in/api/reception/scans");if(a.ok){let b=await a.json();v(Array.isArray(b)?b:[])}}catch(a){console.error("Error fetching scans:",a)}},af=async()=>{try{let a=await fetch("https://varahasdc.co.in/api/reception/time-slots");if(a.ok){let b=await a.json(),c=Array.isArray(b)?b:[];console.log("Fetched time slots:",c),X(c)}else console.error("Failed to fetch time slots, using fallback"),ag()}catch(a){console.error("Error fetching time slots:",a),ag()}},ag=()=>{let a=[];for(let b=0;b<24;b++)for(let c=0;c<60;c+=15){let d=am(`${b.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`);a.push({time_id:a.length+1,time_slot:d})}console.log("Using fallback time slots:",a.length),X(a)},ah=async()=>{try{let a=await fetch("https://varahasdc.co.in/api/reception/patients/last-enrolled");if(a.ok){let b=await a.json();V(b.data)}}catch(a){console.error("Error fetching last patient:",a)}},[ai,aj]=(0,c.useState)(null),ak=async a=>{try{let b=await fetch(`https://varahasdc.co.in/api/reception/patients/${a}`);if(b.ok){let a=await b.json();aj(a.data)}}catch(a){console.error("Error fetching patient data:",a)}};(0,c.useEffect)(()=>{if(ai&&u.length>0){let a=ai.scan_type?ai.scan_type.split(","):[],b=u.filter(b=>a.includes(b.s_id.toString()));x(b);let c=b.reduce((a,b)=>{let c=b.estimate_time?.match(/(\d+)/);return a+(c?parseInt(c[1]):0)},0);ab({date:ai.date||new Date().toLocaleDateString("en-GB").split("/").reverse().join("-"),hospital_name:ai.hospital_id?.toString()||"",doctor_name:ai.doctor_name?.toString()||"",pre:ai.pre||"Mr.",firstname:ai.patient_name||"",age:ai.age?.replace(/[^0-9]/g,"")||"",age_type:ai.age?.includes("Year")?"Year":ai.age?.includes("Month")?"Month":"Days",gender:ai.gender||"Male",petient_type:ai.petient_type||"GEN / Paid",p_uni_submit:ai.p_uni_submit||"N",p_uni_id_name:ai.p_uni_id_name||"",address:ai.address||"",city:ai.city||"",contact_number:ai.contact_number||"",type_of_scan:a,appoint_date:ai.appoint_date?ai.appoint_date.includes("-")?ai.appoint_date.split("-").reverse().join("-"):ai.appoint_date:new Date().toLocaleDateString("en-GB").split("/").reverse().join("-"),time:ai.time||"",time_in:ai.time_in||"",amount:ai.amount?.toString()||"0",est_time:c.toString(),total_amount:ai.total_amount?.toString()||"0",rec_amount:ai.rec_amount?.toString()||"0",dis_amount:ai.dis_amount?.toString()||"0",due_amount:ai.due_amount?.toString()||"0"}),ai.h_name&&D(ai.h_name),ai.dname&&F(ai.dname),setTimeout(()=>{if(ai.time&&W.length>0){let a=W.find(a=>a.time_id.toString()===ai.time.toString());a?(P(a.time_slot),ab(b=>({...b,time:a.time_slot}))):"string"==typeof ai.time&&ai.time.includes(":")&&P(am(ai.time))}if(ai.time_in&&W.length>0){let a=W.find(a=>a.time_id.toString()===ai.time_in.toString());a?(R(a.time_slot),ab(b=>({...b,time_in:a.time_slot}))):"string"==typeof ai.time_in&&ai.time_in.includes(":")&&R(am(ai.time_in))}ai.time&&c>0&&ai.time.includes(":")&&an(ai.time,c)},500)}},[ai,u,W]);let al=a=>{let{name:b,value:c}=a.target;ab(a=>({...a,[b]:c})),S[b]&&T(a=>({...a,[b]:""})),"petient_type"===b&&z(["IPD FREE","OPD FREE","RTA","RGHS","Chiranjeevi","Destitute","PRISONER","Sn. CITIZEN","Aayushmaan"].includes(c))},am=a=>{let[b,c]=a.split(":").map(Number);return`${(b%12||12).toString().padStart(2,"0")}:${c.toString().padStart(2,"0")} ${b>=12?"PM":"AM"}`},an=(a,b)=>{let c,d;if(!a||!b)return;if(a.includes("AM")||a.includes("PM")){let b=a.match(/(\d{1,2}):(\d{2})\s*(AM|PM)/i);if(!b)return;c=parseInt(b[1]),d=parseInt(b[2]);let e=b[3].toUpperCase();"PM"===e&&12!==c?c+=12:"AM"===e&&12===c&&(c=0)}else[c,d]=a.split(":").map(Number);let e=new Date;e.setHours(c,d,0,0);let f=new Date(e.getTime()+6e4*b),g=`${f.getHours().toString().padStart(2,"0")}:${f.getMinutes().toString().padStart(2,"0")}`;ab(a=>({...a,time_in:g})),R(am(g))},ao=()=>{let a=new Date;return`${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}`},ap=()=>!!["Destitute","Chiranjeevi","RGHS","RTA","OPD FREE","IPD FREE","BPL/POOR","Sn. CITIZEN","BHAMASHAH","JSSY","PRISONER","Aayushmaan"].includes(aa.petient_type)||0===(parseFloat(aa.due_amount)||0),aq=async b=>{if("Print"===b){$&&(as($),a&&"function"==typeof a.info&&a.info("Receipt printed successfully!"),setTimeout(()=>{window.location.href="/reception/patient-registration"},2e3));return}try{let c,d={hospital_name:aa.hospital_name,DoctorName:aa.doctor_name,pre:aa.pre,firstname:aa.firstname,age:aa.age,age_type:aa.age_type,gender:aa.gender,petient_type:aa.petient_type,p_uni_submit:aa.p_uni_submit||"N",p_uni_id_name:aa.p_uni_id_name||"",address:aa.address,city:aa.city,contact_number:aa.contact_number,type_of_scan:aa.type_of_scan,appoint_date:aa.appoint_date,time:aa.time,time_in:aa.time_in,amount:aa.amount,total_amount:aa.total_amount,dis_amount:aa.dis_amount,rec_amount:aa.rec_amount,due_amount:aa.due_amount,admin_id:1,action:b};if((c=m&&o?await fetch(`https://varahasdc.co.in/api/reception/patients/${o}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}):await fetch("https://varahasdc.co.in/api/reception/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})).ok){let b=await c.json(),d=b.data?.cro||(m?"Updated":"Registered");Z(!0),_(b.data),a&&"function"==typeof a.success&&a.success(`Patient ${m?"updated":"registered"} successfully! CRO: ${d}`)}else{let b=await c.json().catch(()=>({}));a&&"function"==typeof a.error&&a.error(`Error: ${b.error||(m?"Failed to update patient":"Failed to register patient")}`)}}catch(b){console.error("Error saving patient:",b),a&&"function"==typeof a.error&&a.error(m?"Error updating patient":"Error saving patient")}},ar=a=>{let b=["","one","two","three","four","five","six","seven","eight","nine"];return 0===a?"zero":a<10?b[a]:a<20?["ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"][a-10]:a<100?["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"][Math.floor(a/10)]+(a%10?" "+b[a%10]:""):a<1e3?b[Math.floor(a/100)]+" hundred"+(a%100?" "+ar(a%100):""):a<1e5?ar(Math.floor(a/1e3))+" thousand"+(a%1e3?" "+ar(a%1e3):""):a.toString()},as=a=>{let b=new Date().toLocaleDateString("en-GB"),c=w.map(a=>a.s_name).join(", "),d=ar(parseInt(aa.rec_amount||aa.total_amount)).toUpperCase(),e=`
<!DOCTYPE html>
<html>
<head>
<title>Receipt - ${a.cro||"New Patient"}</title>
<style>
.admission_form { text-align: center; color: #000000; font-size: 10px; width: 100%; }
.admission_form table { width: 98%; font-size: 10px; margin: -5px 8px; }
.admission_form .form_input { padding: 2px 1%; font-size: 10px; border: none; font-weight: bold; font-style: italic; width: 99%; border-bottom: 1px dotted #000000; }
.admission_form .form_input_box { border-bottom: 0px dotted #000000; padding: 0px 0px 2px 0px; width: 100%; display: inline-block; }
@media print { .no_print, .no_print * { display: none !important; } .admission_div_desc { border: 0px !important; } .page_break { page-break-after: always; } }
</style>
</head>
<body bgcolor="#FFFFFF" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" onload="window.print(); setTimeout(() => window.close(), 1000);">
<div class="admission_form" align="center" style="border:solid thin; margin-top:18px;width:93.0%;margin-left:30px;">
  <table align="center" style="margin-top:2px;">
    <tr><td colspan="6"><b>Dr. S.N. MEDICAL COLLEGE AND ATTACHED GROUP OF HOSPITAL, JODHPUR</b></td></tr>
    <tr><td colspan="6"><b>Rajasthan Medical Relief Society, M.D.M. Hospital, Jodhpur</b></td></tr>
    <tr><td colspan="6"><b>IMAGING CENTRE UNDER P.P.P.MODE : VARAHA SDC</b></td></tr>
    <tr><td colspan="6"><b>256 SLICE DUAL ENERGY CT SCAN, M.D.M HOSPITAL Jodhpur(Raj.) - 342003</b></td></tr>
    <tr><td colspan="6"><b>Tel. : +91-291-2648120 , 0291-2648121 , 0291-2648122</b></td></tr>
  </table>
  
  <table>
    <tr>
      <td width="55">Reg.No :</td>
      <td width="200"><span class="form_input_box"><input type="text" class="form_input" value="${a.cro||""}(${a.patient_id||""})"></span></td>
      <td colspan="6"><span style="margin-left:30%; border: 1px solid #02C; border-radius: 11px;padding: 3px 15px;">Cash Receipt</span></td>
      <td width="36">Date</td>
      <td width="144"><span class="form_input_box"><input type="text" class="form_input" value="${b}"></span></td>
    </tr>
  </table>
  
  <table>
    <tr>
      <td width="56">Ref. By :</td>
      <td width="482"><span class="form_input_box"><input type="text" class="form_input" value="${E||""}"></span></td>
      <td width="174">Date and Time of Appointment :</td>
      <td width="316"><span class="form_input_box"><input type="text" class="form_input" value="${aa.appoint_date.split("-").reverse().join("-")} ${O||""}-${Q||""}"></span></td>
    </tr>
  </table>
  
  <table>
    <tr>
      <td width="78">Patient Name:</td>
      <td width="650"><span class="form_input_box"><input type="text" class="form_input" value="${aa.pre} ${aa.firstname}"></span></td>
      <td width="33">Age :</td>
      <td width="144"><span class="form_input_box"><input type="text" class="form_input" value="${aa.age}"></span></td>
      <td width="36">Gender</td>
      <td width="144"><span class="form_input_box"><input type="text" class="form_input" value="${aa.gender}"></span></td>
    </tr>
  </table>
  
  <table>
    <tr>
      <td width="40">Address</td>
      <td width="687"><span class="form_input_box"><input type="text" class="form_input" value="${aa.address||""}"></span></td>
      <td width="687"><span class="form_input_box"><label>Category</label><input type="text" class="form_input" value="${aa.petient_type}"></span></td>
      <td width="33">Phone:</td>
      <td width="333"><span class="form_input_box"><input type="text" class="form_input" value="${aa.contact_number||""}"></span></td>
    </tr>
  </table>
  
  <table>
    <tr>
      <td width="59">Investigations:</td>
      <td width="1042"><span class="form_input_box"><input type="text" class="form_input" value="${c}"></span></td>
    </tr>
  </table>
  
  <table>
    <tr>
      <td width="129">For Sum Of Rupees:</td>
      <td width="733"><span class="form_input_box"><input type="text" class="form_input" value="${d} RUPEES ONLY"></span></td>
      <td width="147"><label>Scan Amount</label><input type="text" value="₹ ${aa.total_amount}" style="border:1px solid #5E60AE;"></td>
      <td width="147"><label>Received Amount</label><input type="text" value="₹ ${aa.rec_amount}" style="border:1px solid #5E60AE;"></td>
    </tr>
  </table>
  
  <table>
    <tr>
      <td colspan="6" align="right" style="padding-top: 20px;">For Varaha SDC, Jodhpur</td>
    </tr>
    <tr>
      <td colspan="6" align="right" style="padding-top: 30px;">Signature</td>
    </tr>
  </table>
  
  <table style="margin-top: 10px;">
    <tr>
      <td colspan="6" style="font-size: 8px; text-align: center;">This is a computer generated receipt</td>
    </tr>
  </table>
</div>

<div style="page-break-before: always;"></div>

<div class="admission_form" align="center" style="border:solid thin; margin-top:18px;width:93.0%;margin-left:30px;">
  <table align="center" style="margin-top:2px;">
    <tr><td colspan="6"><b>Dr. S.N. MEDICAL COLLEGE AND ATTACHED GROUP OF HOSPITAL, JODHPUR</b></td></tr>
    <tr><td colspan="6"><b>Rajasthan Medical Relief Society, M.D.M. Hospital, Jodhpur</b></td></tr>
    <tr><td colspan="6"><b>IMAGING CENTRE UNDER P.P.P.MODE : VARAHA SDC</b></td></tr>
    <tr><td colspan="6"><b>256 SLICE DUAL ENERGY CT SCAN, M.D.M HOSPITAL Jodhpur(Raj.) - 342003</b></td></tr>
    <tr><td colspan="6"><b>Tel. : +91-291-2648120 , 0291-2648121 , 0291-2648122</b></td></tr>
  </table>
  
  <table>
    <tr>
      <td width="55">Reg.No :</td>
      <td width="200"><span class="form_input_box"><input type="text" class="form_input" value="${a.cro||""}(${a.patient_id||""})"></span></td>
      <td colspan="6"><span style="margin-left:30%; border: 1px solid #02C; border-radius: 11px;padding: 3px 15px;">Cash Receipt</span></td>
      <td width="36">Date</td>
      <td width="144"><span class="form_input_box"><input type="text" class="form_input" value="${b}"></span></td>
    </tr>
  </table>
  
  <table>
    <tr>
      <td width="56">Ref. By :</td>
      <td width="482"><span class="form_input_box"><input type="text" class="form_input" value="${E||""}"></span></td>
      <td width="174">Date and Time of Appointment :</td>
      <td width="316"><span class="form_input_box"><input type="text" class="form_input" value="${aa.appoint_date.split("-").reverse().join("-")} ${O||""}-${Q||""}"></span></td>
    </tr>
  </table>
  
  <table>
    <tr>
      <td width="78">Patient Name:</td>
      <td width="650"><span class="form_input_box"><input type="text" class="form_input" value="${aa.pre} ${aa.firstname}"></span></td>
      <td width="33">Age :</td>
      <td width="144"><span class="form_input_box"><input type="text" class="form_input" value="${aa.age}"></span></td>
      <td width="36">Gender</td>
      <td width="144"><span class="form_input_box"><input type="text" class="form_input" value="${aa.gender}"></span></td>
    </tr>
  </table>
  
  <table>
    <tr>
      <td width="40">Address</td>
      <td width="687"><span class="form_input_box"><input type="text" class="form_input" value="${aa.address||""}"></span></td>
      <td width="687"><span class="form_input_box"><label>Category</label><input type="text" class="form_input" value="${aa.petient_type}"></span></td>
      <td width="33">Phone:</td>
      <td width="333"><span class="form_input_box"><input type="text" class="form_input" value="${aa.contact_number||""}"></span></td>
    </tr>
  </table>
  
  <table>
    <tr>
      <td width="59">Investigations:</td>
      <td width="1042"><span class="form_input_box"><input type="text" class="form_input" value="${c}"></span></td>
    </tr>
  </table>
  
  <table>
    <tr>
      <td width="129">For Sum Of Rupees:</td>
      <td width="733"><span class="form_input_box"><input type="text" class="form_input" value="${d} RUPEES ONLY"></span></td>
      <td width="147"><label>Scan Amount</label><input type="text" value="₹ ${aa.total_amount}" style="border:1px solid #5E60AE;"></td>
      <td width="147"><label>Received Amount</label><input type="text" value="₹ ${aa.rec_amount}" style="border:1px solid #5E60AE;"></td>
    </tr>
  </table>
  
  <table>
    <tr>
      <td colspan="6" align="right" style="padding-top: 20px;">For Varaha SDC, Jodhpur</td>
    </tr>
    <tr>
      <td colspan="6" align="right" style="padding-top: 30px;">Signature</td>
    </tr>
  </table>
  
  <table style="margin-top: 10px;">
    <tr>
      <td colspan="6" style="font-size: 8px; text-align: center;">This is a computer generated receipt</td>
    </tr>
  </table>
</div>
</body>
</html>`,f=window.open("","_blank");f&&(f.document.write(e),f.document.close())};return(0,b.jsxs)("div",{className:"p-3 sm:p-6 space-y-4 sm:space-y-6 min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 text-white p-4 sm:p-6 rounded-xl shadow-2xl",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start space-y-4 sm:space-y-0",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl sm:text-3xl font-bold mb-2",children:m?"Edit Patient Registration":"New Patient Registration"}),(0,b.jsx)("p",{className:"text-sky-100 text-sm sm:text-lg",children:m?"Update patient information and scan details":"Complete patient enrollment and scan booking"})]}),U&&!m&&(0,b.jsxs)("div",{className:"bg-sky-600 bg-opacity-50 rounded-lg px-4 py-2 min-w-0 flex-shrink-0",children:[(0,b.jsx)("p",{className:"text-sky-200 text-xs mb-1",children:"Last Enrolled Patient"}),(0,b.jsxs)("p",{className:"text-white font-medium text-sm truncate",children:[U.cro," - ",U.patient_name]})]})]})}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl border border-gray-100",children:[(0,b.jsx)("div",{className:"border-b border-gray-200",children:(0,b.jsxs)("nav",{className:"flex flex-col sm:flex-row",children:[(0,b.jsxs)("button",{className:`flex-1 py-3 sm:py-4 px-3 sm:px-6 text-center border-b-2 font-medium text-xs sm:text-sm ${1===k?"border-sky-500 text-sky-600 bg-sky-50":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>l(1),children:[(0,b.jsx)("span",{className:"sm:hidden",children:"1. Enrollment"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"1. Enrollment Detail"})]}),(0,b.jsxs)("button",{className:`flex-1 py-3 sm:py-4 px-3 sm:px-6 text-center border-b-2 font-medium text-xs sm:text-sm ${2===k?"border-sky-500 text-sky-600 bg-sky-50":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>l(2),children:[(0,b.jsx)("span",{className:"sm:hidden",children:"2. Scans"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"2. Scan Options"})]}),(0,b.jsxs)("button",{className:`flex-1 py-3 sm:py-4 px-3 sm:px-6 text-center border-b-2 font-medium text-xs sm:text-sm ${3===k?"border-sky-500 text-sky-600 bg-sky-50":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>l(3),children:[(0,b.jsx)("span",{className:"sm:hidden",children:"3. Payment"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"3. Payment Details"})]})]})}),(0,b.jsxs)("form",{className:"p-3 sm:p-6",children:[1===k&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,b.jsx)("input",{type:"text",name:"date",value:aa.date.split("-").reverse().join("-"),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50",readOnly:!0})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Hospital Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"text",value:C,onChange:a=>{D(a.target.value),H(!0)},onFocus:()=>H(!0),className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 ${S.hospital_name?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`,placeholder:"Search and select hospital",required:!0}),(0,b.jsx)(i.ChevronDown,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),G&&(0,b.jsxs)("div",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md mt-1 max-h-60 overflow-y-auto shadow-lg",children:[q.filter(a=>a.h_name.toLowerCase().includes(C.toLowerCase())).map(a=>(0,b.jsx)("div",{className:"px-3 py-2 hover:bg-blue-50 cursor-pointer",onClick:()=>{ab(b=>({...b,hospital_name:a.h_id.toString()})),D(a.h_name),H(!1),S.hospital_name&&T(a=>({...a,hospital_name:""}))},children:a.h_name},a.h_id)),0===q.filter(a=>a.h_name.toLowerCase().includes(C.toLowerCase())).length&&(0,b.jsx)("div",{className:"px-3 py-2 text-gray-500",children:"No hospitals found"})]}),S.hospital_name&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:S.hospital_name})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Doctor Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"text",value:E,onChange:a=>{F(a.target.value),J(!0)},onFocus:()=>J(!0),className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 ${S.doctor_name?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`,placeholder:"Search and select doctor",required:!0}),(0,b.jsx)(i.ChevronDown,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),I&&(0,b.jsxs)("div",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md mt-1 max-h-60 overflow-y-auto shadow-lg",children:[s.filter(a=>a.dname.toLowerCase().includes(E.toLowerCase())).map(a=>(0,b.jsx)("div",{className:"px-3 py-2 hover:bg-blue-50 cursor-pointer",onClick:()=>{ab(b=>({...b,doctor_name:a.d_id.toString()})),F(a.dname),J(!1),S.doctor_name&&T(a=>({...a,doctor_name:""}))},children:a.dname},a.d_id)),0===s.filter(a=>a.dname.toLowerCase().includes(E.toLowerCase())).length&&(0,b.jsx)("div",{className:"px-3 py-2 text-gray-500",children:"No doctors found"})]}),S.doctor_name&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:S.doctor_name})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Patient Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("select",{name:"pre",value:aa.pre,onChange:al,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"Mr.",children:"Mr."}),(0,b.jsx)("option",{value:"Mrs.",children:"Mrs."}),(0,b.jsx)("option",{value:"Master",children:"Master"}),(0,b.jsx)("option",{value:"Miss",children:"Miss"}),(0,b.jsx)("option",{value:"Baby",children:"Baby"})]})]}),(0,b.jsxs)("div",{className:"md:col-span-3",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),(0,b.jsx)("input",{type:"text",name:"firstname",value:aa.firstname,onChange:al,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ${S.firstname?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`,placeholder:"Please enter your First name",required:!0}),S.firstname&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:S.firstname})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Age ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",name:"age",value:aa.age,onChange:a=>{let b=a.target.value;/^\d*$/.test(b)&&(""===b||parseInt(b)>=0&&100>=parseInt(b))&&al(a)},onKeyPress:a=>{/[0-9]/.test(a.key)||"Backspace"===a.key||"Delete"===a.key||a.preventDefault()},className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ${S.age?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`,placeholder:"Age (0-100)",maxLength:3}),S.age&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:S.age})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"In (Year/Month/Days)"}),(0,b.jsxs)("select",{name:"age_type",value:aa.age_type,onChange:al,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"Year",children:"Year"}),(0,b.jsx)("option",{value:"Month",children:"Month"}),(0,b.jsx)("option",{value:"Days",children:"Days"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),(0,b.jsxs)("select",{name:"gender",value:aa.gender,onChange:al,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"Male",children:"Male"}),(0,b.jsx)("option",{value:"Female",children:"Female"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,b.jsxs)("select",{name:"petient_type",value:aa.petient_type,onChange:a=>{let{name:b,value:c}=a.target;ab(a=>({...a,[b]:c})),z(["IPD FREE","OPD FREE","RTA","RGHS","Chiranjeevi","Destitute","PRISONER","Sn. CITIZEN","Aayushmaan"].includes(c));let d=w.reduce((a,b)=>a+b.charges,0);"GEN / Paid"===c?ab(a=>({...a,total_amount:d.toString(),amount:d.toString(),rec_amount:d.toString(),due_amount:"0"})):ab(a=>({...a,total_amount:d.toString(),amount:d.toString(),rec_amount:"0",due_amount:"0"}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"GEN / Paid",children:"GEN / Paid"}),(0,b.jsx)("option",{value:"IPD FREE",children:"IPD Free"}),(0,b.jsx)("option",{value:"OPD FREE",children:"OPD Free"}),(0,b.jsx)("option",{value:"RTA",children:"RTA"}),(0,b.jsx)("option",{value:"RGHS",children:"RGHS"}),(0,b.jsx)("option",{value:"Chiranjeevi",children:"Chiranjeevi"}),(0,b.jsx)("option",{value:"Destitute",children:"Destitute"}),(0,b.jsx)("option",{value:"PRISONER",children:"PRISONER"}),(0,b.jsx)("option",{value:"Sn. CITIZEN",children:"Sn. CITIZEN"}),(0,b.jsx)("option",{value:"Aayushmaan",children:"Aayushmaan"})]})]})]}),y&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID"}),(0,b.jsx)("input",{type:"text",name:"p_uni_submit",value:aa.p_uni_submit,onChange:al,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Y / N"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name Of ID"}),(0,b.jsx)("input",{type:"text",name:"p_uni_id_name",value:aa.p_uni_id_name,onChange:al,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"ID Name"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Upload ID"}),(0,b.jsx)("input",{type:"file",name:"p_uni_id_scan",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,b.jsx)("input",{type:"text",name:"address",value:aa.address,onChange:al,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Please enter your Address"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),(0,b.jsx)("input",{type:"text",name:"city",value:aa.city,onChange:al,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Please enter your city"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Number"}),(0,b.jsx)("input",{type:"text",name:"contact_number",value:aa.contact_number,onChange:a=>{let b=a.target.value;/^\d*$/.test(b)&&b.length<=10&&al(a)},onKeyPress:a=>{/[0-9]/.test(a.key)||"Backspace"===a.key||"Delete"===a.key||a.preventDefault()},className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ${S.contact_number?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"}`,placeholder:"10-digit mobile number",maxLength:10}),S.contact_number&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:S.contact_number})]})]})]}),2===k&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Scan Type ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsx)("input",{type:"text",placeholder:"Search scans...",value:A,onChange:a=>B(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mb-3"})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-60 overflow-y-auto border border-gray-200 rounded-md p-4",children:[u.filter(a=>a.s_name.toLowerCase().includes(A.toLowerCase())).map(a=>(0,b.jsxs)("label",{className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:aa.type_of_scan.includes(a.s_id.toString()),onChange:b=>((a,b)=>{let c=[...aa.type_of_scan];b?c.push(a):c=c.filter(b=>b!==a),ab(a=>({...a,type_of_scan:c}));let d=u.filter(a=>c.includes(a.s_id.toString()));x(d);let e=d.reduce((a,b)=>a+b.charges,0),f=d.reduce((a,b)=>{let c=b.estimate_time?.match(/(\d+)/);return a+(c?parseInt(c[1]):0)},0);if(ab(a=>"GEN / Paid"===a.petient_type?{...a,amount:e.toString(),est_time:f.toString(),total_amount:e.toString(),rec_amount:e.toString(),due_amount:"0"}:{...a,amount:e.toString(),est_time:f.toString(),total_amount:e.toString(),rec_amount:"0",due_amount:"0"}),!aa.time&&W.length>0){let a=new Date;new Date(aa.appoint_date).toDateString()===a.toDateString()&&setTimeout(()=>(()=>{let a=new Date,b=60*a.getHours()+a.getMinutes(),c=W.find(a=>{let c=a.time_slot.match(/(\d{1,2}):(\d{2})\s*(AM|PM)/i);if(!c)return!1;let d=parseInt(c[1]),e=parseInt(c[2]),f=c[3].toUpperCase();return"PM"===f&&12!==d?d+=12:"AM"===f&&12===d&&(d=0),60*d+e>=b});c&&(ab(a=>({...a,time:c.time_id.toString()})),P(c.time_slot))})(),100)}})(a.s_id.toString(),b.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:a.s_name}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["₹",a.charges," • ",a.estimate_time," min"]})]})]},a.s_id)),0===u.filter(a=>a.s_name.toLowerCase().includes(A.toLowerCase())).length&&(0,b.jsx)("div",{className:"col-span-full text-center text-gray-500 py-4",children:"No scans found"})]}),S.type_of_scan&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:S.type_of_scan})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Appoint Date"}),(0,b.jsx)("input",{type:"date",name:"appoint_date",value:aa.appoint_date,onChange:a=>{let{name:b,value:c}=a.target;ab(a=>({...a,[b]:c})),ab(a=>({...a,time:"",time_in:""})),P(""),R("");let d=new Date(c),e=new Date;if(d.toDateString()===e.toDateString()){let a=ao(),b=am(a);ab(b=>({...b,time:a})),P(b);let c=parseInt(aa.est_time)||0;c>0&&an(a,c)}},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Time In ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",value:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50",readOnly:!0}),S.time&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:S.time})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Time Out ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",value:Q,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50",readOnly:!0}),S.time_in&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:S.time_in})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),(0,b.jsx)("input",{type:"text",name:"amount",value:aa.amount,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50",readOnly:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Time"}),(0,b.jsx)("input",{type:"text",name:"est_time",value:aa.est_time,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50",readOnly:!0})]})]}),w.length>0&&(0,b.jsxs)("div",{className:"mt-6",children:[(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Selected Scans"}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-gray-50",children:[(0,b.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"S.No"}),(0,b.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Name Of Scan"}),(0,b.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Charges"})]})}),(0,b.jsx)("tbody",{children:w.map((a,c)=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:c+1}),(0,b.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:a.s_name}),(0,b.jsxs)("td",{className:"border border-gray-300 px-4 py-2",children:["₹",a.charges]})]},a.s_id))})]})})]})]}),3===k&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-4 py-3 border-b border-gray-200",children:(0,b.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,b.jsx)(d.User,{className:"h-5 w-5 mr-2 text-blue-600"}),"Patient Summary"]})}),(0,b.jsx)("div",{className:"p-4",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Patient Name"}),(0,b.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:[aa.pre," ",aa.firstname]})]}),(0,b.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Age & Gender"}),(0,b.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:[aa.age," ",aa.age_type,", ",aa.gender]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Category"}),(0,b.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:aa.petient_type})]}),(0,b.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Appointment Date"}),(0,b.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:aa.appoint_date.split("-").reverse().join("-")})]})]}),(aa.contact_number||aa.address)&&(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[aa.contact_number&&(0,b.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Contact Number"}),(0,b.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:aa.contact_number})]}),aa.address&&(0,b.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Address"}),(0,b.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:aa.address})]})]}),aa.time&&aa.time_in&&(0,b.jsxs)("div",{className:"bg-blue-50 p-3 rounded-md border border-blue-200",children:[(0,b.jsx)("div",{className:"text-xs text-blue-600 uppercase tracking-wide mb-1",children:"Time Slot"}),(0,b.jsxs)("div",{className:"text-sm font-semibold text-blue-900",children:[am(aa.time)," - ",am(aa.time_in),(0,b.jsxs)("span",{className:"ml-2 text-xs text-blue-600",children:["(",aa.est_time," min estimated)"]})]})]})]})})]}),(0,b.jsxs)("div",{className:"bg-white border border-gray-300 rounded-lg overflow-hidden",children:[(0,b.jsx)("div",{className:"bg-gray-100 px-4 py-3 border-b border-gray-300",children:(0,b.jsx)("h4",{className:"font-semibold text-gray-800",children:"Payment Details"})}),(0,b.jsxs)("div",{className:"p-4 space-y-4",children:[w.length>0&&(0,b.jsxs)("div",{className:"border border-gray-200 rounded",children:[(0,b.jsx)("div",{className:"bg-gray-50 px-3 py-2 border-b border-gray-200",children:(0,b.jsx)("span",{className:"font-medium text-sm",children:"Selected Scans"})}),w.map((a,c)=>(0,b.jsxs)("div",{className:"px-3 py-2 border-b border-gray-100 last:border-b-0 flex justify-between",children:[(0,b.jsxs)("span",{className:"text-sm",children:[c+1,". ",a.s_name]}),(0,b.jsxs)("span",{className:"text-sm font-medium",children:["₹",a.charges]})]},a.s_id))]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Amount"}),(0,b.jsx)("input",{type:"text",name:"total_amount",value:`₹${aa.total_amount}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 font-semibold",readOnly:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Received Amount"}),(0,b.jsx)("input",{type:"number",name:"rec_amount",value:aa.rec_amount,max:aa.total_amount,onChange:a=>{let b=parseFloat(aa.total_amount)||0,c=parseFloat(a.target.value)||0;if("GEN / Paid"===aa.petient_type&&c>b)return;let d=b-c-(parseFloat(aa.dis_amount)||0);ab(b=>({...b,rec_amount:a.target.value,due_amount:d.toString()}))},className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 ${"GEN / Paid"!==aa.petient_type?"bg-gray-50":""}`,placeholder:"0",readOnly:"GEN / Paid"!==aa.petient_type})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount"}),(0,b.jsx)("input",{type:"number",name:"dis_amount",value:aa.dis_amount,onChange:a=>{let b=parseFloat(aa.total_amount)||0,c=b-(parseFloat(aa.rec_amount)||0)-(parseFloat(a.target.value)||0);ab(b=>({...b,dis_amount:a.target.value,due_amount:c.toString()}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500",placeholder:"0"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Amount"}),(0,b.jsx)("input",{type:"text",name:"due_amount",value:`₹${aa.due_amount}`,className:`w-full px-3 py-2 border border-gray-300 rounded-md font-semibold ${parseFloat(aa.due_amount)>0?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,readOnly:!0})]})]}),(0,b.jsx)("div",{className:`text-center p-3 rounded-md ${ap()?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:(0,b.jsx)("span",{className:`font-semibold ${ap()?"text-green-700":"text-red-700"}`,children:ap()?"Ready to print":"Payment Required - Complete payment to enable printing"})})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-between pt-6 border-t border-gray-200",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>{k>1&&l(k-1)},disabled:1===k,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,b.jsx)(f.ArrowLeft,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Previous"})]}),(0,b.jsx)("div",{className:"flex space-x-2",children:k<3?(0,b.jsxs)("button",{type:"button",onClick:()=>{(b=>{let c={};return 1===b&&(aa.hospital_name||(c.hospital_name="Hospital Name is required",a.error("Please select Hospital Name")),aa.doctor_name||(c.doctor_name="Doctor Name is required",a.error("Please select Doctor Name")),aa.firstname.trim()||(c.firstname="Patient Name is required",a.error("Please enter Patient Name")),aa.age.trim()||(c.age="Age is required",a.error("Please enter Age")),aa.contact_number&&!/^[0-9]{10}$/.test(aa.contact_number)&&(c.contact_number="Contact Number must be 10 digits",a.error("Contact Number must be 10 digits"))),2===b&&(0===aa.type_of_scan.length&&(c.type_of_scan="At least one scan type is required",a.error("Please select at least one scan type")),aa.time||(c.time="Time In is required",a.error("Please select Time In")),aa.time_in||(c.time_in="Time Out is required",a.error("Please select Time Out"))),T(c),0===Object.keys(c).length})(k)&&k<3&&l(k+1)},className:"flex items-center space-x-2 px-4 py-2 bg-sky-600 text-white rounded-md hover:bg-sky-700",children:[(0,b.jsx)("span",{children:"Next"}),(0,b.jsx)(g.ArrowRight,{className:"h-4 w-4"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{type:"button",onClick:()=>aq("Save"),disabled:Y,className:"flex items-center space-x-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium shadow-lg transition-all duration-200",children:[(0,b.jsx)(h.Check,{className:"h-5 w-5"}),(0,b.jsx)("span",{children:Y?"SAVED":"SAVE"})]}),(0,b.jsxs)("button",{type:"button",onClick:()=>aq("Print"),disabled:!Y,className:"flex items-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium shadow-lg transition-all duration-200",title:Y?"Print Receipt":"Save patient first to enable printing",children:[(0,b.jsx)(e.FileText,{className:"h-5 w-5"}),(0,b.jsx)("span",{children:"PRINT"})]}),(0,b.jsxs)("button",{type:"button",onClick:()=>{window.confirm("Are you sure you want to exit? Any unsaved changes will be lost.")&&(a&&"function"==typeof a.info&&a.info("Exiting patient registration"),window.location.href="/reception/patient-registration")},className:"flex items-center space-x-2 px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium shadow-lg transition-all duration-200",children:[(0,b.jsx)(f.ArrowLeft,{className:"h-5 w-5"}),(0,b.jsx)("span",{children:"EXIT"})]})]})})]})]})]})]})}}];

//# sourceMappingURL=src_app_reception_patient-registration_new_page_tsx_ee7da34b._.js.map