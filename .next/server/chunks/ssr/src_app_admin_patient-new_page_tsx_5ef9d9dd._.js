module.exports=[61769,a=>{"use strict";a.s(["default",()=>l]);var b=a.i(87924),c=a.i(72131),d=a.i(46842),e=a.i(4720),f=a.i(210),g=a.i(32860),h=a.i(33441),i=a.i(5784),j=a.i(82651),k=a.i(27747);function l(){let[a,l]=(0,c.useState)(1),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(""),[M,N]=(0,c.useState)(""),[O,P]=(0,c.useState)({}),[Q,R]=(0,c.useState)(null),[S,T]=(0,c.useState)([]),[U,V]=(0,c.useState)({date:new Date().toLocaleDateString("en-GB").split("/").reverse().join("-"),hospital_name:"",doctor_name:"",pre:"Mr.",firstname:"",age:"",age_type:"Year",gender:"Male",petient_type:"GEN / Paid",p_uni_submit:"N",p_uni_id_name:"",address:"",city:"",contact_number:"",type_of_scan:[],appoint_date:new Date().toLocaleDateString("en-GB").split("/").reverse().join("-"),time:"",time_in:"",amount:"0",est_time:"0",total_amount:"0",rec_amount:"0",dis_amount:"0",due_amount:"0"});(0,c.useEffect)(()=>{W(),X(),Y(),Z(),$();let a=a=>{a.target.closest(".relative")||(D(!1),F(!1),H(!1),J(!1))};return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[]);let W=async()=>{try{let a=await fetch("https://varahasdc.co.in/api/admin/hospitals");if(a.ok){let b=await a.json();n(b.data||[])}}catch(a){console.error("Error fetching hospitals:",a)}},X=async()=>{try{let a=await fetch("https://varahasdc.co.in/api/admin/doctors");if(a.ok){let b=await a.json();p(Array.isArray(b)?b:[])}}catch(a){console.error("Error fetching doctors:",a)}},Y=async()=>{try{let a=await fetch("https://varahasdc.co.in/api/admin/scans");if(a.ok){let b=await a.json();r(b.success?b.data:[])}}catch(a){console.error("Error fetching scans:",a)}},Z=async()=>{try{let a=[];for(let b=7;b<18;b++)for(let c=0;c<60;c+=15){let d=`${b.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`,e=aa(d);a.push({time_id:a.length+1,time_slot:e})}T(a)}catch(a){console.error("Error generating time slots:",a),T([])}},$=async()=>{try{let a=await fetch("https://varahasdc.co.in/api/admin/patients/last-enrolled");if(a.ok){let b=await a.json();R(b.data)}}catch(a){console.error("Error fetching last patient:",a)}},_=a=>{let{name:b,value:c}=a.target;V(a=>({...a,[b]:c})),O[b]&&P(a=>({...a,[b]:""})),"petient_type"===b&&v(["IPD FREE","OPD FREE","RTA","RGHS","Chiranjeevi","Destitute","PRISONER","Sn. CITIZEN","Aayushmaan"].includes(c))},aa=a=>{let[b,c]=a.split(":").map(Number);return`${(b%12||12).toString().padStart(2,"0")}:${c.toString().padStart(2,"0")} ${b>=12?"PM":"AM"}`},ab=a=>{let[b,c]=a.split(" "),[d,e]=b.split(":").map(Number),f=d;return"PM"===c&&12!==d?f+=12:"AM"===c&&12===d&&(f=0),`${f.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`},ac=(a,b)=>{if(!a||!b)return;let[c,d]=a.split(":").map(Number),e=new Date;e.setHours(c,d,0,0);let f=new Date(e.getTime()+6e4*b),g=`${f.getHours().toString().padStart(2,"0")}:${f.getMinutes().toString().padStart(2,"0")}`;V(a=>({...a,time_in:g})),N(aa(g))},ad=()=>!!["Destitute","Chiranjeevi","RGHS","RTA","OPD FREE","IPD FREE","BPL/POOR","Sn. CITIZEN","BHAMASHAH","JSSY","PRISONER","Aayushmaan"].includes(U.petient_type)||0===(parseFloat(U.due_amount)||0),ae=async a=>{try{let b={hospital_name:U.hospital_name,DoctorName:U.doctor_name,pre:U.pre,firstname:U.firstname,age:U.age,age_type:U.age_type,gender:U.gender,petient_type:U.petient_type,p_uni_submit:U.p_uni_submit||"N",p_uni_id_name:U.p_uni_id_name||"",address:U.address,city:U.city,contact_number:U.contact_number,type_of_scan:U.type_of_scan,appoint_date:U.appoint_date,time:U.time,time_in:U.time_in,amount:U.amount,total_amount:U.total_amount,dis_amount:U.dis_amount,rec_amount:U.rec_amount,due_amount:U.due_amount,admin_id:1,action:a},c=await fetch("https://varahasdc.co.in/api/admin/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(c.ok){let b=await c.json(),d=b.data?.cro||"Registered";alert(`Patient registered successfully! CRO: ${d}`),"Save_Print"===a&&ag(b.data),"Save"===a&&af()}else{let a=await c.json().catch(()=>({}));alert(`Error: ${a.error||"Failed to register patient"}`)}}catch(a){console.error("Error saving patient:",a),alert("Error saving patient")}},af=()=>{V({date:new Date().toLocaleDateString("en-GB").split("/").reverse().join("-"),hospital_name:"",doctor_name:"",pre:"Mr.",firstname:"",age:"",age_type:"Year",gender:"Male",petient_type:"GEN / Paid",p_uni_submit:"N",p_uni_id_name:"",address:"",city:"",contact_number:"",type_of_scan:[],appoint_date:new Date().toLocaleDateString("en-GB").split("/").reverse().join("-"),time:"",time_in:"",amount:"0",est_time:"0",total_amount:"0",rec_amount:"0",dis_amount:"0",due_amount:"0"}),z(""),B(""),L(""),N(""),x(""),t([]),l(1),$()},ag=a=>{let b=new Date().toLocaleDateString("en-GB"),c=s.map(a=>a.s_name).join(", "),d=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Patient Receipt - ${a.cro||"New Patient"}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 0; padding: 10px; }
            .admission_form { text-align: center; color: #000000; font-size: 14px; width: 100%; }
            .admission_form table { width: 100%; font-size: 10px; margin: -5px 0px; }
            .form_input { padding: 2px 1%; font-size: 16px; border: none; font-weight: bold; }
          </style>
        </head>
        <body>
          <div class="admission_form" style="border:solid thin; margin-top:20px;">
            <table>
              <tr><td colspan="6" align="center">Dr. S.N. MEDICL COLLEGE AND ATTACHED GROUP OF HOSPITAL, JODHPUR</td></tr>
              <tr><td colspan="6" align="center">VARAHA SDC - 256 SLICE CT SCAN</td></tr>
              <tr><td colspan="6" align="center">Cash Receipt</td></tr>
            </table>
            <table>
              <tr>
                <td width="80">Reg.No :</td>
                <td><input type="text" class="form_input" value="${a.cro||""}"></td>
                <td width="30">Date</td>
                <td><input type="text" class="form_input" value="${b}"></td>
              </tr>
            </table>
            <table>
              <tr>
                <td width="130">Name Of Patient :</td>
                <td><input type="text" class="form_input" value="${U.pre} ${U.firstname}"></td>
                <td>Age :</td>
                <td><input type="text" class="form_input" value="${U.age} ${U.age_type}"></td>
                <td>Gender</td>
                <td><input type="text" class="form_input" value="${U.gender}"></td>
              </tr>
            </table>
            <table>
              <tr>
                <td width="80">Investiations:</td>
                <td><input type="text" class="form_input" value="${c}"></td>
              </tr>
            </table>
            <table>
              <tr>
                <td width="150">For Sum Of Rupees:</td>
                <td><input type="text" class="form_input" value="Rs. ${U.total_amount}/-"></td>
                <td width="150"><input type="text" value="Rs. ${U.total_amount}" style="border:2px solid;"></td>
              </tr>
            </table>
          </div>
        </body>
      </html>
    `,e=window.open("","_blank","width=800,height=600");e&&(e.document.write(d),e.document.close(),setTimeout(()=>{e.focus(),e.print()},100))};return(0,b.jsx)(j.default,{title:"New Patient Registration",subtitle:"Complete patient enrollment and scan booking",actions:(0,b.jsx)(k.default,{}),children:(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[(0,b.jsx)("div",{className:"border-b border-gray-200",children:(0,b.jsxs)("nav",{className:"flex",children:[(0,b.jsx)("button",{className:`flex-1 py-4 px-6 text-center border-b-2 font-medium text-sm ${1===a?"border-red-500 text-red-600 bg-red-50":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>l(1),children:"1. Enrollment Detail"}),(0,b.jsx)("button",{className:`flex-1 py-4 px-6 text-center border-b-2 font-medium text-sm ${2===a?"border-red-500 text-red-600 bg-red-50":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>l(2),children:"2. Scan Options"}),(0,b.jsx)("button",{className:`flex-1 py-4 px-6 text-center border-b-2 font-medium text-sm ${3===a?"border-red-500 text-red-600 bg-red-50":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>l(3),children:"3. Payment Details"})]})}),(0,b.jsxs)("form",{className:"p-6",children:[1===a&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,b.jsx)("input",{type:"text",name:"date",value:U.date.split("-").reverse().join("-"),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50",readOnly:!0})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Hospital Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"text",value:y,onChange:a=>{z(a.target.value),D(!0)},onFocus:()=>D(!0),className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 ${O.hospital_name?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-red-500"}`,placeholder:"Search and select hospital",required:!0}),(0,b.jsx)(i.ChevronDown,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),C&&(0,b.jsx)("div",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md mt-1 max-h-60 overflow-y-auto shadow-lg",children:m.filter(a=>a.h_name.toLowerCase().includes(y.toLowerCase())).map(a=>(0,b.jsx)("div",{className:"px-3 py-2 hover:bg-red-50 cursor-pointer",onClick:()=>{V(b=>({...b,hospital_name:a.h_id.toString()})),z(a.h_name),D(!1),O.hospital_name&&P(a=>({...a,hospital_name:""}))},children:a.h_name},a.h_id))}),O.hospital_name&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:O.hospital_name})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Doctor Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"text",value:A,onChange:a=>{B(a.target.value),F(!0)},onFocus:()=>F(!0),className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 ${O.doctor_name?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-red-500"}`,placeholder:"Search and select doctor",required:!0}),(0,b.jsx)(i.ChevronDown,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),E&&(0,b.jsx)("div",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md mt-1 max-h-60 overflow-y-auto shadow-lg",children:o.filter(a=>a.dname.toLowerCase().includes(A.toLowerCase())).map(a=>(0,b.jsx)("div",{className:"px-3 py-2 hover:bg-red-50 cursor-pointer",onClick:()=>{V(b=>({...b,doctor_name:a.d_id.toString()})),B(a.dname),F(!1),O.doctor_name&&P(a=>({...a,doctor_name:""}))},children:a.dname},a.d_id))}),O.doctor_name&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:O.doctor_name})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Patient Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("select",{name:"pre",value:U.pre,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,b.jsx)("option",{value:"Mr.",children:"Mr."}),(0,b.jsx)("option",{value:"Mrs.",children:"Mrs."}),(0,b.jsx)("option",{value:"Master",children:"Master"}),(0,b.jsx)("option",{value:"Miss",children:"Miss"}),(0,b.jsx)("option",{value:"Baby",children:"Baby"})]})]}),(0,b.jsxs)("div",{className:"md:col-span-3",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),(0,b.jsx)("input",{type:"text",name:"firstname",value:U.firstname,onChange:_,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ${O.firstname?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-red-500"}`,placeholder:"Please enter your First name",required:!0}),O.firstname&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:O.firstname})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Age ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",name:"age",value:U.age,onChange:a=>{let b=a.target.value;/^\d*$/.test(b)&&(""===b||parseInt(b)>=0&&100>=parseInt(b))&&_(a)},className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ${O.age?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-red-500"}`,placeholder:"Age (0-100)",maxLength:3}),O.age&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:O.age})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"In (Year/Month/Days)"}),(0,b.jsxs)("select",{name:"age_type",value:U.age_type,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,b.jsx)("option",{value:"Year",children:"Year"}),(0,b.jsx)("option",{value:"Month",children:"Month"}),(0,b.jsx)("option",{value:"Days",children:"Days"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),(0,b.jsxs)("select",{name:"gender",value:U.gender,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,b.jsx)("option",{value:"Male",children:"Male"}),(0,b.jsx)("option",{value:"Female",children:"Female"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,b.jsxs)("select",{name:"petient_type",value:U.petient_type,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,b.jsx)("option",{value:"GEN / Paid",children:"GEN / Paid"}),(0,b.jsx)("option",{value:"IPD FREE",children:"IPD Free"}),(0,b.jsx)("option",{value:"OPD FREE",children:"OPD Free"}),(0,b.jsx)("option",{value:"RTA",children:"RTA"}),(0,b.jsx)("option",{value:"RGHS",children:"RGHS"}),(0,b.jsx)("option",{value:"Chiranjeevi",children:"Chiranjeevi"}),(0,b.jsx)("option",{value:"Destitute",children:"Destitute"}),(0,b.jsx)("option",{value:"PRISONER",children:"PRISONER"}),(0,b.jsx)("option",{value:"Sn. CITIZEN",children:"Sn. CITIZEN"}),(0,b.jsx)("option",{value:"Aayushmaan",children:"Aayushmaan"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,b.jsx)("input",{type:"text",name:"address",value:U.address,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Please enter your Address"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),(0,b.jsx)("input",{type:"text",name:"city",value:U.city,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Please enter your city"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Number"}),(0,b.jsx)("input",{type:"text",name:"contact_number",value:U.contact_number,onChange:a=>{let b=a.target.value;/^\d*$/.test(b)&&b.length<=10&&_(a)},className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ${O.contact_number?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-red-500"}`,placeholder:"10-digit mobile number",maxLength:10}),O.contact_number&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:O.contact_number})]})]})]}),2===a&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Scan Type ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsx)("input",{type:"text",placeholder:"Search scans...",value:w,onChange:a=>x(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 mb-3"})}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-60 overflow-y-auto border border-gray-200 rounded-md p-4",children:q.filter(a=>a.s_name.toLowerCase().includes(w.toLowerCase())).map(a=>(0,b.jsxs)("label",{className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:U.type_of_scan.includes(a.s_id.toString()),onChange:b=>((a,b)=>{let c=[...U.type_of_scan];b?c.push(a):c=c.filter(b=>b!==a),V(a=>({...a,type_of_scan:c}));let d=q.filter(a=>c.includes(a.s_id.toString()));t(d);let e=d.reduce((a,b)=>a+b.charges,0),f=d.reduce((a,b)=>{let c=b.estimate_time?.match(/(\d+)/);return a+(c?parseInt(c[1]):0)},0);["Destitute","Chiranjeevi","RGHS","RTA","OPD FREE","IPD FREE","BPL/POOR","Sn. CITIZEN","BHAMASHAH","JSSY","PRISONER","Aayushmaan"].includes(U.petient_type)&&(e=0),V(a=>{let b={...a,amount:e.toString(),est_time:f.toString(),total_amount:e.toString()},c=parseFloat(a.rec_amount)||0,d=parseFloat(a.dis_amount)||0,g=e-c-d;return{...b,due_amount:g.toString()}}),U.time&&f>0&&ac(U.time,f)})(a.s_id.toString(),b.target.checked),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:a.s_name}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["₹",a.charges," • ",a.estimate_time," min"]})]})]},a.s_id))}),O.type_of_scan&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:O.type_of_scan})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Appoint Date"}),(0,b.jsx)("input",{type:"date",name:"appoint_date",value:U.appoint_date,onChange:a=>{let{name:b,value:c}=a.target;V(a=>({...a,[b]:c}));let d=(()=>{let a=new Date;return`${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}`})();V(a=>({...a,time:d})),L(aa(d));let e=parseInt(U.est_time)||0;e>0&&ac(d,e)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Time In ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"text",value:K,onChange:a=>{L(a.target.value),H(!0)},onFocus:()=>H(!0),className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 ${O.time?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-red-500"}`,placeholder:"Search and select time",required:!0}),(0,b.jsx)(i.ChevronDown,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),G&&(0,b.jsx)("div",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md mt-1 max-h-60 overflow-y-auto shadow-lg",children:S.filter(a=>a.time_slot.toLowerCase().includes(K.toLowerCase())).map(a=>(0,b.jsx)("div",{className:"px-3 py-2 hover:bg-red-50 cursor-pointer",onClick:()=>{let b=ab(a.time_slot);V(a=>({...a,time:b})),L(a.time_slot),H(!1),O.time&&P(a=>({...a,time:""}));let c=parseInt(U.est_time)||0;c>0&&ac(b,c)},children:a.time_slot},a.time_id))}),O.time&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:O.time})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Time Out ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"text",value:M,onChange:a=>{N(a.target.value),J(!0)},onFocus:()=>J(!0),className:`w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 ${O.time_in?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-red-500"}`,placeholder:"Search and select time",required:!0}),(0,b.jsx)(i.ChevronDown,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),I&&(0,b.jsx)("div",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md mt-1 max-h-60 overflow-y-auto shadow-lg",children:S.filter(a=>a.time_slot.toLowerCase().includes(M.toLowerCase())).map(a=>(0,b.jsx)("div",{className:"px-3 py-2 hover:bg-red-50 cursor-pointer",onClick:()=>{let b=ab(a.time_slot);V(a=>({...a,time_in:b})),N(a.time_slot),J(!1),O.time_in&&P(a=>({...a,time_in:""}))},children:a.time_slot},a.time_id))}),O.time_in&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:O.time_in})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),(0,b.jsx)("input",{type:"text",name:"amount",value:U.amount,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50",readOnly:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Time"}),(0,b.jsx)("input",{type:"text",name:"est_time",value:U.est_time,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50",readOnly:!0})]})]}),s.length>0&&(0,b.jsxs)("div",{className:"mt-6",children:[(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Selected Scans"}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-gray-50",children:[(0,b.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"S.No"}),(0,b.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Name Of Scan"}),(0,b.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Charges"})]})}),(0,b.jsx)("tbody",{children:s.map((a,c)=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:c+1}),(0,b.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:a.s_name}),(0,b.jsxs)("td",{className:"border border-gray-300 px-4 py-2",children:["₹",a.charges]})]},a.s_id))})]})})]})]}),3===a&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-50 px-4 py-3 border-b border-gray-200",children:(0,b.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,b.jsx)(d.User,{className:"h-5 w-5 mr-2 text-red-600"}),"Patient Summary"]})}),(0,b.jsx)("div",{className:"p-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Patient Name"}),(0,b.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:[U.pre," ",U.firstname]})]}),(0,b.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Age & Gender"}),(0,b.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:[U.age," ",U.age_type,", ",U.gender]})]}),(0,b.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Category"}),(0,b.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:U.petient_type})]}),(0,b.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Appointment Date"}),(0,b.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:U.appoint_date.split("-").reverse().join("-")})]})]})})]}),(0,b.jsxs)("div",{className:"bg-white border border-gray-300 rounded-lg overflow-hidden",children:[(0,b.jsx)("div",{className:"bg-gray-100 px-4 py-3 border-b border-gray-300",children:(0,b.jsx)("h4",{className:"font-semibold text-gray-800",children:"Payment Details"})}),(0,b.jsxs)("div",{className:"p-4 space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Amount"}),(0,b.jsx)("input",{type:"text",name:"total_amount",value:`₹${U.total_amount}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 font-semibold",readOnly:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Received Amount"}),(0,b.jsx)("input",{type:"number",name:"rec_amount",value:U.rec_amount,onChange:a=>{let b=parseFloat(U.total_amount)||0,c=b-(parseFloat(a.target.value)||0)-(parseFloat(U.dis_amount)||0);V(b=>({...b,rec_amount:a.target.value,due_amount:c.toString()}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"0"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount"}),(0,b.jsx)("input",{type:"number",name:"dis_amount",value:U.dis_amount,onChange:a=>{let b=parseFloat(U.total_amount)||0,c=b-(parseFloat(U.rec_amount)||0)-(parseFloat(a.target.value)||0);V(b=>({...b,dis_amount:a.target.value,due_amount:c.toString()}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"0"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Amount"}),(0,b.jsx)("input",{type:"text",name:"due_amount",value:`₹${U.due_amount}`,className:`w-full px-3 py-2 border border-gray-300 rounded-md font-semibold ${parseFloat(U.due_amount)>0?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,readOnly:!0})]})]}),(0,b.jsx)("div",{className:`text-center p-3 rounded-md ${ad()?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:(0,b.jsx)("span",{className:`font-semibold ${ad()?"text-green-700":"text-red-700"}`,children:ad()?"Ready to print":"Payment Required - Complete payment to enable printing"})})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-between pt-6 border-t border-gray-200",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>{a>1&&l(a-1)},disabled:1===a,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,b.jsx)(f.ArrowLeft,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Previous"})]}),(0,b.jsx)("div",{className:"flex space-x-2",children:a<3?(0,b.jsxs)("button",{type:"button",onClick:()=>{(a=>{let b={};return 1===a&&(U.hospital_name||(b.hospital_name="Hospital Name is required"),U.doctor_name||(b.doctor_name="Doctor Name is required"),U.firstname.trim()||(b.firstname="Patient Name is required"),U.age.trim()||(b.age="Age is required"),U.contact_number&&!/^[0-9]{10}$/.test(U.contact_number)&&(b.contact_number="Contact Number must be 10 digits")),2===a&&(0===U.type_of_scan.length&&(b.type_of_scan="At least one scan type is required"),U.time||(b.time="Time In is required"),U.time_in||(b.time_in="Time Out is required")),P(b),0===Object.keys(b).length})(a)&&a<3&&l(a+1)},className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:[(0,b.jsx)("span",{children:"Next"}),(0,b.jsx)(g.ArrowRight,{className:"h-4 w-4"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{type:"button",onClick:()=>ae("Save"),className:"flex items-center space-x-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium shadow-lg transition-all duration-200",children:[(0,b.jsx)(h.Check,{className:"h-5 w-5"}),(0,b.jsx)("span",{children:"SAVE"})]}),(0,b.jsxs)("button",{type:"button",onClick:()=>{if(!ad())return void alert("Please complete payment before printing receipt");ae("Save_Print")},disabled:!ad(),className:"flex items-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium shadow-lg transition-all duration-200",children:[(0,b.jsx)(e.FileText,{className:"h-5 w-5"}),(0,b.jsx)("span",{children:"PRINT"})]})]})})]})]})]})})})}}];

//# sourceMappingURL=src_app_admin_patient-new_page_tsx_5ef9d9dd._.js.map