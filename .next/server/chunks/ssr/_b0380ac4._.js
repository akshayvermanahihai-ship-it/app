module.exports=[14548,a=>{"use strict";a.s(["Save",()=>b],14548);let b=(0,a.i(70106).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},210,a=>{"use strict";a.s(["ArrowLeft",()=>b],210);let b=(0,a.i(70106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},73924,a=>{"use strict";a.s(["default",()=>h]);var b=a.i(87924),c=a.i(72131),d=a.i(210),e=a.i(14548),f=a.i(66632),g=a.i(50944);function h({params:a}){let h=(0,f.useToastContext)(),i=(0,g.useRouter)(),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)("");(0,c.useEffect)(()=>{console.log("Edit page loaded, params:",a),a.then(({id:a})=>{console.log("ID extracted from params:",a),q(a)})},[a]);let r=a=>{if(!a||"-"===a)return"";if(a.includes("T"))return a.split("T")[0];if(a.match(/^\d{2}-\d{2}-\d{4}$/)){let b=a.split("-");return`${b[2]}-${b[1]}-${b[0]}`}return a};(0,c.useEffect)(()=>{p&&s()},[p]);let s=async()=>{try{let a=await fetch("https://varahasdc.co.in/api/console/detail-report");if(a.ok){let b=await a.json(),c=b.data?.find(a=>a.con_id.toString()===p);c?k({...c,date:r(c.date),scan_date:r(c.scan_date),allot_date:r(c.allot_date),added_on:r(c.added_on)}):(h.error("Console record not found"),i.push("/console/update"))}else h.error("Failed to fetch console record")}catch(a){console.error("Error fetching record:",a),h.error("Error loading console record")}finally{m(!1)}},t=async()=>{if(j){o(!0);try{(await fetch("https://varahasdc.co.in/api/console/update-console",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({con_id:j.con_id,scan_date:j.scan_date,allot_date:j.allot_date,date:j.date,examination_id:j.examination_id,status:j.status,number_scan:j.number_scan,number_film:j.number_film,number_contrast:j.number_contrast,technician_name:j.technician_name,issue_cd:j.issue_cd,remark:j.remark})})).ok?(h.success("Console record updated successfully"),i.push("/console/update")):h.error("Failed to update console record")}catch(a){console.error("Error updating record:",a),h.error("Error updating console record")}finally{o(!1)}}};return l?(0,b.jsx)("div",{className:"p-6 flex items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-sky-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading console record..."})]})}):j?(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 text-white p-6 rounded-xl shadow-lg",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)("button",{onClick:()=>i.push("/console/update"),className:"p-2 bg-sky-500 hover:bg-sky-400 rounded-lg transition-colors",children:(0,b.jsx)(d.ArrowLeft,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Edit Console Record"}),(0,b.jsxs)("p",{className:"text-sky-100",children:["CRO: ",j.c_p_cro]})]})]}),(0,b.jsxs)("button",{onClick:t,disabled:n,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg transition-colors disabled:opacity-50",children:[(0,b.jsx)(e.Save,{className:`h-5 w-5 ${n?"animate-spin":""}`}),(0,b.jsx)("span",{children:n?"Saving...":"Save Changes"})]})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Patient Information"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CRO Number"}),(0,b.jsx)("input",{type:"text",value:j.c_p_cro,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient Name"}),(0,b.jsx)("input",{type:"text",value:`${j.pre} ${j.patient_name}`,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Doctor"}),(0,b.jsx)("input",{type:"text",value:j.doctor_name||"-",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Console Details (Editable)"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Examination ID"}),(0,b.jsx)("input",{type:"number",value:j.examination_id||"",onChange:a=>k({...j,examination_id:parseInt(a.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,b.jsxs)("select",{value:j.status||"",onChange:a=>k({...j,status:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"",children:"Select Status"}),(0,b.jsx)("option",{value:"Pending",children:"Pending"}),(0,b.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,b.jsx)("option",{value:"Complete",children:"Complete"}),(0,b.jsx)("option",{value:"Cancelled",children:"Cancelled"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Scans"}),(0,b.jsx)("input",{type:"number",value:j.number_scan||"",onChange:a=>k({...j,number_scan:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Films"}),(0,b.jsx)("input",{type:"number",value:j.number_film||"",onChange:a=>k({...j,number_film:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Contrast"}),(0,b.jsx)("input",{type:"number",value:j.number_contrast||"",onChange:a=>k({...j,number_contrast:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Technician Name"}),(0,b.jsx)("input",{type:"text",value:j.technician_name||"",onChange:a=>k({...j,technician_name:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Issue CD/DVD"}),(0,b.jsxs)("select",{value:j.issue_cd||"",onChange:a=>k({...j,issue_cd:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"",children:"Select Option"}),(0,b.jsx)("option",{value:"Yes",children:"Yes"}),(0,b.jsx)("option",{value:"No",children:"No"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remark"}),(0,b.jsx)("textarea",{value:j.remark||"",onChange:a=>k({...j,remark:a.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Enter any remarks..."})]})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Patient Date Settings (Editable)"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Date"}),(0,b.jsx)("input",{type:"date",value:j.date,onChange:a=>k({...j,date:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Allot Date"}),(0,b.jsx)("input",{type:"date",value:j.allot_date,onChange:a=>k({...j,allot_date:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Scan Date"}),(0,b.jsx)("input",{type:"date",value:j.scan_date,onChange:a=>k({...j,scan_date:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Console Date & Time (Read Only)"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Console Date"}),(0,b.jsx)("input",{type:"date",value:j.added_on,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),(0,b.jsx)("input",{type:"time",value:j.start_time,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stop Time"}),(0,b.jsx)("input",{type:"time",value:j.stop_time,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]})]})]})]})]}):(0,b.jsx)("div",{className:"p-6 text-center",children:(0,b.jsx)("p",{className:"text-gray-600",children:"Console record not found"})})}}];

//# sourceMappingURL=_b0380ac4._.js.map