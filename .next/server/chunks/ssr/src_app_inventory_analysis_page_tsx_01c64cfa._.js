module.exports=[36945,a=>{"use strict";a.s(["default",()=>l]);var b=a.i(87924),c=a.i(72131),d=a.i(84505),e=a.i(24669),f=a.i(53277),g=a.i(83497),h=a.i(73570),i=a.i(39761),j=a.i(82651),k=a.i(66632);function l(){let a=(0,k.useToastContext)(),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)({from_date:"",to_date:""});(0,c.useEffect)(()=>{v()},[]);let v=async()=>{s(!0);try{let b=new URLSearchParams;Object.entries(t).forEach(([a,c])=>{c&&b.append(a,c)});let c=await fetch(`https://varahasdc.co.in/api/inventory/analysis?${b}`);if(c.ok){let b=await c.json();b.success?(m(b.data.stock_summary||[]),o(b.data.low_stock_alerts||[]),q(b.data.monthly_trend||[]),b.data.low_stock_alerts&&b.data.low_stock_alerts.length>0?a.error(`${b.data.low_stock_alerts.length} items have low stock!`):a.success("Analysis data loaded successfully")):a.error("Failed to fetch analysis data")}else a.error("Failed to fetch analysis data")}catch(b){console.error("Error fetching analysis:",b),a.error("Network error while fetching analysis data")}finally{s(!1)}},w=l.length,x=l.reduce((a,b)=>a+parseFloat(String(b.current_value||0)),0),y=n.length,z=l.reduce((a,b)=>a+parseInt(String(b.total_inward||0)),0),A=l.reduce((a,b)=>a+parseInt(String(b.total_outward||0)),0);return(0,b.jsx)(j.default,{title:"Inventory Analysis",subtitle:"Comprehensive stock analysis and reporting",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Date"}),(0,b.jsx)("input",{type:"text",placeholder:"DD-MM-YYYY",value:t.from_date,onChange:a=>{let b=a.target.value.replace(/\D/g,"");b.length>=2&&(b=b.slice(0,2)+"-"+b.slice(2)),b.length>=5&&(b=b.slice(0,5)+"-"+b.slice(5,9)),u(a=>({...a,from_date:b}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500",maxLength:10})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Date"}),(0,b.jsx)("input",{type:"text",placeholder:"DD-MM-YYYY",value:t.to_date,onChange:a=>{let b=a.target.value.replace(/\D/g,"");b.length>=2&&(b=b.slice(0,2)+"-"+b.slice(2)),b.length>=5&&(b=b.slice(0,5)+"-"+b.slice(5,9)),u(a=>({...a,to_date:b}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500",maxLength:10})]}),(0,b.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,b.jsx)("button",{onClick:v,disabled:r,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:r?"Loading...":"Analyze"}),(0,b.jsxs)("button",{onClick:()=>{try{if(0===l.length)return void a.error("No data to export");let b=t.from_date&&t.to_date?`${t.from_date} to ${t.to_date}`:"All Time",c=new Date().toLocaleDateString("en-GB"),d='<html><meta http-equiv="Content-Type" content="text/html; charset=Windows-1252"><body>';d+=`<table border="1" style="border-collapse: collapse; width: 100%;"><tr><th colspan="10" style="background-color:#2F75B5; color:white; text-align:center; font-weight:bold; padding:8px;">VARAHA SDC : 256 SLICE CT SCAN</th></tr><tr><th colspan="10" style="background-color:#2F75B5; color:white; text-align:center; font-weight:bold; padding:8px;">INVENTORY ANALYSIS REPORT</th></tr><tr><th colspan="10" style="background-color:#FFEA00; color:black; text-align:center; font-weight:bold; padding:8px;">Period: ${b}</th></tr><tr><th colspan="10" style="background-color:#FFEA00; color:black; text-align:center; font-weight:bold; padding:8px;">Generated on: ${c}</th></tr><tr><th colspan="10" style="text-align:center; padding:4px;">&nbsp;</th></tr><tr><th colspan="10" style="background-color:#2F75B5; color:white; text-align:center; font-weight:bold; padding:8px;">STOCK SUMMARY</th></tr><tr><th style="background-color:#2F75B5; color:white; text-align:center; font-weight:bold; padding:8px; border:1px solid black;">Item Name</th><th style="background-color:#2F75B5; color:white; text-align:center; font-weight:bold; padding:8px; border:1px solid black;">Unit</th><th style="background-color:#2F75B5; color:white; text-align:center; font-weight:bold; padding:8px; border:1px solid black;">Opening Stock</th><th style="background-color:#2F75B5; color:white; text-align:center; font-weight:bold; padding:8px; border:1px solid black;">Current Stock</th><th style="background-color:#2F75B5; color:white; text-align:center; font-weight:bold; padding:8px; border:1px solid black;">Total Inward</th><th style="background-color:#2F75B5; color:white; text-align:center; font-weight:bold; padding:8px; border:1px solid black;">Total Outward</th><th style="background-color:#2F75B5; color:white; text-align:center; font-weight:bold; padding:8px; border:1px solid black;">Inward Value</th><th style="background-color:#2F75B5; color:white; text-align:center; font-weight:bold; padding:8px; border:1px solid black;">Current Value</th><th style="background-color:#2F75B5; color:white; text-align:center; font-weight:bold; padding:8px; border:1px solid black;">Stock Status</th><th style="background-color:#2F75B5; color:white; text-align:center; font-weight:bold; padding:8px; border:1px solid black;">Turnover %</th></tr>`;let e=0,f=0,g=0,h=0,i=0;l.forEach(a=>{let b=a.opening_stock>0?(a.total_outward/a.opening_stock*100).toFixed(1):"0",c=a.current_stock<10?"LOW STOCK":a.current_stock>100?"OVERSTOCK":"NORMAL";e+=a.current_value,f+=a.inward_value,g+=a.current_stock,h+=a.total_inward,i+=a.total_outward,d+=`<tr><td style="text-align:left; padding:4px; border:1px solid black;">${a.item_name}</td><td style="text-align:center; padding:4px; border:1px solid black;">${a.unit}</td><td style="text-align:right; padding:4px; border:1px solid black;">${a.opening_stock}</td><td style="text-align:right; padding:4px; border:1px solid black;">${a.current_stock}</td><td style="text-align:right; padding:4px; border:1px solid black;">${a.total_inward}</td><td style="text-align:right; padding:4px; border:1px solid black;">${a.total_outward}</td><td style="text-align:right; padding:4px; border:1px solid black;">₹${a.inward_value.toFixed(2)}</td><td style="text-align:right; padding:4px; border:1px solid black;">₹${a.current_value.toFixed(2)}</td><td style="text-align:center; padding:4px; border:1px solid black;">${c}</td><td style="text-align:right; padding:4px; border:1px solid black;">${b}%</td></tr>`}),d+=`<tr><th style="background-color:#FFEA00; color:black; text-align:right; font-weight:bold; padding:8px; border:1px solid black;">TOTAL</th><th style="background-color:#FFEA00; color:black; padding:8px; border:1px solid black;">&nbsp;</th><th style="background-color:#FFEA00; color:black; padding:8px; border:1px solid black;">&nbsp;</th><th style="background-color:#FFEA00; color:black; text-align:right; font-weight:bold; padding:8px; border:1px solid black;">${g}</th><th style="background-color:#FFEA00; color:black; text-align:right; font-weight:bold; padding:8px; border:1px solid black;">${h}</th><th style="background-color:#FFEA00; color:black; text-align:right; font-weight:bold; padding:8px; border:1px solid black;">${i}</th><th style="background-color:#FFEA00; color:black; text-align:right; font-weight:bold; padding:8px; border:1px solid black;">₹${f.toFixed(2)}</th><th style="background-color:#FFEA00; color:black; text-align:right; font-weight:bold; padding:8px; border:1px solid black;">₹${e.toFixed(2)}</th><th colspan="2" style="background-color:#FFEA00; color:black; padding:8px; border:1px solid black;">&nbsp;</th></tr>`,n.length>0&&(d+='<tr><th colspan="10" style="text-align:center; padding:8px;">&nbsp;</th></tr><tr><th colspan="10" style="background-color:#FF6B6B; color:white; text-align:center; font-weight:bold; padding:8px;">LOW STOCK ALERTS - IMMEDIATE ACTION REQUIRED</th></tr><tr><th style="background-color:#FF6B6B; color:white; text-align:center; font-weight:bold; padding:8px; border:1px solid black;">Item Name</th><th style="background-color:#FF6B6B; color:white; text-align:center; font-weight:bold; padding:8px; border:1px solid black;">Current Stock</th><th style="background-color:#FF6B6B; color:white; text-align:center; font-weight:bold; padding:8px; border:1px solid black;">Unit</th><th colspan="7" style="background-color:#FF6B6B; color:white; text-align:center; font-weight:bold; padding:8px; border:1px solid black;">Action Required</th></tr>',n.forEach(a=>{d+=`<tr><td style="text-align:left; padding:4px; border:1px solid black; background-color:#FFE6E6;">${a.item_name}</td><td style="text-align:right; padding:4px; border:1px solid black; background-color:#FFE6E6; font-weight:bold; color:red;">${a.quantity}</td><td style="text-align:center; padding:4px; border:1px solid black; background-color:#FFE6E6;">${a.unit}</td><td colspan="7" style="text-align:center; padding:4px; border:1px solid black; background-color:#FFE6E6; font-weight:bold; color:red;">REORDER IMMEDIATELY</td></tr>`})),d+="</table></body></html>";let j=new Blob([d],{type:"application/vnd.ms-excel"}),k=window.URL.createObjectURL(j),m=document.createElement("a");m.href=k,m.download=`INVENTORY-ANALYSIS-${b.replace(/\s+/g,"-")}.xls`,m.click(),window.URL.revokeObjectURL(k),a.success("Analysis report exported successfully")}catch(b){console.error("Export error:",b),a.error("Error exporting analysis report")}},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center",children:[(0,b.jsx)(d.Download,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[(0,b.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(g.Package,{className:"h-8 w-8 text-blue-600"}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Items"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:w})]})]})}),(0,b.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(i.BarChart3,{className:"h-8 w-8 text-green-600"}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["₹",x.toLocaleString()]})]})]})}),(0,b.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(e.TrendingUp,{className:"h-8 w-8 text-purple-600"}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Inward"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:z})]})]})}),(0,b.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(f.TrendingDown,{className:"h-8 w-8 text-orange-600"}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Outward"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:A})]})]})}),(0,b.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(h.AlertTriangle,{className:"h-8 w-8 text-red-600"}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:y})]})]})})]}),n.length>0&&(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6",children:[(0,b.jsxs)("div",{className:"flex items-center mb-4",children:[(0,b.jsx)(h.AlertTriangle,{className:"h-5 w-5 text-red-600 mr-2"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-red-800",children:"Low Stock Alerts"})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:n.map((a,c)=>(0,b.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-red-200",children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:a.item_name}),(0,b.jsxs)("p",{className:"text-sm text-red-600",children:["Only ",a.quantity," ",a.unit," remaining"]})]},c))})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,b.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Stock Summary"})}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Item"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Opening"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Current"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Inward"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Outward"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Value"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:r?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:8,className:"px-6 py-8 text-center",children:"Loading..."})}):0===l.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:8,className:"px-6 py-8 text-center text-gray-500",children:"No data available"})}):l.map((a,c)=>{let d=a.current_stock<10?"LOW":a.current_stock>100?"HIGH":"NORMAL",e="LOW"===d?"text-red-600":"HIGH"===d?"text-blue-600":"text-green-600";return(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:a.item_name}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:a.unit}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:a.opening_stock}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:a.current_stock}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:a.total_inward}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:a.total_outward}),(0,b.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900",children:["₹",a.current_value.toLocaleString()]}),(0,b.jsx)("td",{className:`px-6 py-4 text-sm font-medium ${e}`,children:d})]},a.id)})})]})})]})]})})}}];

//# sourceMappingURL=src_app_inventory_analysis_page_tsx_01c64cfa._.js.map