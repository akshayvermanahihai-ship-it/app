module.exports=[14548,a=>{"use strict";a.s(["Save",()=>b],14548);let b=(0,a.i(70106).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},210,a=>{"use strict";a.s(["ArrowLeft",()=>b],210);let b=(0,a.i(70106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1363,a=>{"use strict";a.s(["default",()=>h]);var b=a.i(87924),c=a.i(72131),d=a.i(210),e=a.i(14548),f=a.i(50944),g=a.i(66632);function h(){let a=(0,f.useParams)(),h=(0,f.useRouter)(),i=(0,g.useToastContext)(),j=decodeURIComponent(a.cro),k=a=>{if(!a||"0000-00-00"===a)return"";try{if(a.includes("T")&&a.includes("Z")){let b=new Date(a);if(isNaN(b.getTime()))return"";return b.toISOString().split("T")[0]}if(a.includes("-")&&3===a.split("-").length){let b=a.split("-");if(4===b[0].length)return a.split("T")[0];return`${b[2]}-${b[1].padStart(2,"0")}-${b[0].padStart(2,"0")}`}let b=new Date(a);if(isNaN(b.getTime()))return"";return b.toISOString().split("T")[0]}catch{return""}},[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(0),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)("No"),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)("No"),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)("");(0,c.useEffect)(()=>{j&&H()},[j]);let H=async()=>{o(!0);try{let a=await fetch(`/api/doctor/nursing/${encodeURIComponent(j)}`);if(a.ok){let b=await a.json();m(b.data);let c=b.data.patient;s(c.ct_scan_doctor_id||0),u(k(c.n_patient_ct_report_date||"")),w(c.n_patient_ct||"No"),y(k(c.n_patient_ct_report_date||"")),A(c.n_patient_ct_remark||""),C(c.n_patient_x_ray||"No"),E(k(c.n_patient_x_ray_report_date||"")),G(c.n_patient_x_ray_remark||"")}else i.error("Patient not found"),h.push("/doctor/ct-scan-doctor-list")}catch{i.error("Error loading patient details")}finally{o(!1)}},I=async()=>{q(!0);try{let a=await fetch("/api/doctor/save-nursing",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cro:j,ct_scan_doctor_id:r||null,ct_scan_report_date:t||null,n_patient_ct:v,n_patient_ct_report_date:x||null,n_patient_ct_remark:z,n_patient_x_ray:B,n_patient_x_ray_report_date:D||null,n_patient_x_ray_remark:F})}),b=await a.json();a.ok&&b.success?(i.success("Nursing data saved successfully"),H()):(console.error("Save error:",b),i.error(b.error||"Failed to save nursing data"))}catch(a){console.error("Save nursing error:",a),i.error("Error saving nursing data")}finally{q(!1)}};return n?(0,b.jsx)("div",{className:"p-6 space-y-6",children:(0,b.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading patient details..."})]})})}):l?(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50 p-4",children:[(0,b.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200 p-4 mb-6 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)("button",{onClick:()=>h.push("/doctor/ct-scan-doctor-list"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,b.jsx)(d.ArrowLeft,{className:"h-5 w-5 text-gray-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Nursing Details"}),(0,b.jsxs)("p",{className:"text-gray-600",children:["Patient CRO: ",l.patient.cro]})]})]})}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:[(0,b.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Patient Information"})}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsx)("table",{className:"w-full",children:(0,b.jsxs)("tbody",{className:"divide-y divide-gray-200",children:[(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-6 py-3 text-sm font-medium text-gray-900 bg-gray-50 w-1/4",children:"CRO Number"}),(0,b.jsx)("td",{className:"px-6 py-3 text-sm text-gray-900",children:l.patient.cro}),(0,b.jsx)("td",{className:"px-6 py-3 text-sm font-medium text-gray-900 bg-gray-50 w-1/4",children:"Patient Name"}),(0,b.jsx)("td",{className:"px-6 py-3 text-sm text-gray-900",children:l.patient.patient_name})]}),(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-6 py-3 text-sm font-medium text-gray-900 bg-gray-50",children:"Age"}),(0,b.jsx)("td",{className:"px-6 py-3 text-sm text-gray-900",children:l.patient.age}),(0,b.jsx)("td",{className:"px-6 py-3 text-sm font-medium text-gray-900 bg-gray-50",children:"Gender"}),(0,b.jsx)("td",{className:"px-6 py-3 text-sm text-gray-900",children:l.patient.gender})]}),(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-6 py-3 text-sm font-medium text-gray-900 bg-gray-50",children:"Mobile"}),(0,b.jsx)("td",{className:"px-6 py-3 text-sm text-gray-900",children:l.patient.mobile}),(0,b.jsx)("td",{className:"px-6 py-3 text-sm font-medium text-gray-900 bg-gray-50",children:"Contact"}),(0,b.jsx)("td",{className:"px-6 py-3 text-sm text-gray-900",children:l.patient.contact_number||"-"})]}),(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-6 py-3 text-sm font-medium text-gray-900 bg-gray-50",children:"Category"}),(0,b.jsx)("td",{className:"px-6 py-3 text-sm text-gray-900",children:l.patient.category||"-"}),(0,b.jsx)("td",{className:"px-6 py-3 text-sm font-medium text-gray-900 bg-gray-50",children:"Date"}),(0,b.jsx)("td",{className:"px-6 py-3 text-sm text-gray-900",children:(a=>{if(!a||"0000-00-00"===a)return"-";try{let b;if(a.includes("-")&&3===a.split("-").length){let c=a.split("-");b=new Date(4===c[0].length?a:`${c[2]}-${c[1]}-${c[0]}`)}else b=new Date(a);if(isNaN(b.getTime()))return"-";let c=b.getDate().toString().padStart(2,"0"),d=b.toLocaleDateString("en-US",{month:"short"}),e=b.getFullYear();return`${c}-${d}-${e}`}catch{return"-"}})(l.patient.date)})]}),(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-6 py-3 text-sm font-medium text-gray-900 bg-gray-50",children:"Address"}),(0,b.jsx)("td",{className:"px-6 py-3 text-sm text-gray-900",colSpan:3,children:l.patient.address||"-"})]})]})})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:[(0,b.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Scan Information"})}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"S.No"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Scan Type"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Scan Head"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:l.scans.map((a,c)=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-6 py-3 text-sm text-gray-900",children:c+1}),(0,b.jsx)("td",{className:"px-6 py-3 text-sm text-gray-900",children:a.s_name}),(0,b.jsx)("td",{className:"px-6 py-3 text-sm text-gray-900",children:a.head_name||"Not Assigned"})]},a.s_id))})]})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,b.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Nursing Information"})}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CT Scan Doctor"}),(0,b.jsxs)("select",{value:r,onChange:a=>s(Number(a.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:[(0,b.jsx)("option",{value:0,children:"--Select Doctor--"}),l.doctors.map(a=>(0,b.jsx)("option",{value:a.id,children:a.doctor_name},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CT Scan Report Date"}),(0,b.jsx)("input",{type:"date",value:t,onChange:a=>u(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full border border-gray-300",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-gray-100",children:[(0,b.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Examination"}),(0,b.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Retained"}),(0,b.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Report Date"}),(0,b.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Remark"})]})}),(0,b.jsxs)("tbody",{children:[(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"border border-gray-300 px-4 py-3 text-sm font-medium text-gray-900 bg-blue-50",children:"CT-Scan"}),(0,b.jsx)("td",{className:"border border-gray-300 px-4 py-3",children:(0,b.jsxs)("div",{className:"flex space-x-4",children:[(0,b.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,b.jsx)("input",{type:"radio",name:"ct",value:"Yes",checked:"Yes"===v,onChange:a=>w(a.target.value),className:"mr-2 text-blue-600 focus:ring-blue-500"}),(0,b.jsx)("span",{className:"text-sm",children:"Yes"})]}),(0,b.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,b.jsx)("input",{type:"radio",name:"ct",value:"No",checked:"No"===v,onChange:a=>w(a.target.value),className:"mr-2 text-blue-600 focus:ring-blue-500"}),(0,b.jsx)("span",{className:"text-sm",children:"No"})]})]})}),(0,b.jsx)("td",{className:"border border-gray-300 px-4 py-3",children:(0,b.jsx)("input",{type:"date",value:x,onChange:a=>y(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})}),(0,b.jsx)("td",{className:"border border-gray-300 px-4 py-3",children:(0,b.jsx)("textarea",{value:z,onChange:a=>A(a.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Enter CT-Scan remarks..."})})]}),(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"border border-gray-300 px-4 py-3 text-sm font-medium text-gray-900 bg-green-50",children:"X-Ray Film"}),(0,b.jsx)("td",{className:"border border-gray-300 px-4 py-3",children:(0,b.jsxs)("div",{className:"flex space-x-4",children:[(0,b.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,b.jsx)("input",{type:"radio",name:"xray",value:"Yes",checked:"Yes"===B,onChange:a=>C(a.target.value),className:"mr-2 text-green-600 focus:ring-green-500"}),(0,b.jsx)("span",{className:"text-sm",children:"Yes"})]}),(0,b.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,b.jsx)("input",{type:"radio",name:"xray",value:"No",checked:"No"===B,onChange:a=>C(a.target.value),className:"mr-2 text-green-600 focus:ring-green-500"}),(0,b.jsx)("span",{className:"text-sm",children:"No"})]})]})}),(0,b.jsx)("td",{className:"border border-gray-300 px-4 py-3",children:(0,b.jsx)("input",{type:"date",value:D,onChange:a=>E(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm"})}),(0,b.jsx)("td",{className:"border border-gray-300 px-4 py-3",children:(0,b.jsx)("textarea",{value:F,onChange:a=>G(a.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm",placeholder:"Enter X-Ray film remarks..."})})]})]})]})}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mt-6 pt-6 border-t border-gray-200",children:[(0,b.jsxs)("button",{onClick:I,disabled:p,className:"flex items-center justify-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:[(0,b.jsx)(e.Save,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:p?"Saving...":"Save Data"})]}),(0,b.jsx)("button",{onClick:()=>h.push("/doctor/ct-scan-doctor-list"),className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors font-medium",children:"Back to List"})]})]})]})]}):(0,b.jsx)("div",{className:"p-6 space-y-6",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-gray-500",children:"Patient not found"}),(0,b.jsx)("button",{onClick:()=>h.push("/doctor/ct-scan-doctor-list"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Back to List"})]})})}}];

//# sourceMappingURL=_ec87baf9._.js.map