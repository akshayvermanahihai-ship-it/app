(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33651,e=>{"use strict";e.s(["Download",()=>t],33651);let t=(0,e.i(75254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},44112,e=>{"use strict";e.s(["default",()=>r]);var t=e.i(43476),a=e.i(71645),s=e.i(84614),n=e.i(63059);function r(){let[e,r]=(0,a.useState)(null);(0,a.useEffect)(()=>{c()},[]);let c=async()=>{try{let e=await fetch("https://varahasdc.co.in/api/reception/patients/last-enrolled");if(e.ok){let t=await e.json();r(t.data)}}catch(e){console.error("Error fetching last patient:",e)}};return e?(0,t.jsx)("div",{className:"bg-blue-600 bg-opacity-20 rounded-lg p-4 border border-blue-200",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-white",children:[(0,t.jsx)(s.User,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm font-medium text-white",children:"Last Enrolled Patient"}),(0,t.jsx)(n.ChevronRight,{className:"h-3 w-3 text-white"}),(0,t.jsx)("span",{className:"text-sm font-bold text-white",children:e.cro}),(0,t.jsx)(n.ChevronRight,{className:"h-3 w-3 text-white"}),(0,t.jsx)("span",{className:"text-sm font-medium text-white",children:e.patient_name})]})}):null}},62003,e=>{"use strict";e.s(["default",()=>i]);var t=e.i(43476),a=e.i(71645),s=e.i(87316),n=e.i(78583),r=e.i(33651),c=e.i(55436),l=e.i(8776),d=e.i(44112);function i(){let e=(0,l.useToastContext)(),[i,o]=(0,a.useState)(""),[x,m]=(0,a.useState)([]),[h,p]=(0,a.useState)(null),[u,g]=(0,a.useState)(!1),[f,y]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=(()=>{let e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),s=e.getFullYear();return"".concat(t,"-").concat(a,"-").concat(s)})();o(e),b(e)},[]);let b=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;if(!t)return void e.error("Please select a date");g(!0);try{let a=await fetch("https://varahasdc.co.in/api/reception/reports/revenue?date=".concat(t));if(a.ok){let t=await a.json();t.success?(m(t.data||[]),p(t.summary),y(!0),0===t.data.length&&e.info("No data found for the selected date")):(e.error("Failed to generate report"),m([]),p(null),y(!1))}else 404===a.status?e.error("Revenue report API not available. Please contact administrator."):e.error("Failed to generate report"),m([]),p(null),y(!1)}catch(t){console.error("Error generating report:",t),e.error("Revenue report service unavailable"),m([]),p(null),y(!1)}finally{g(!1)}},j=async e=>{e.preventDefault(),b()};return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-6",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 text-white p-6 rounded-xl shadow-lg mb-6",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Revenue Report"}),(0,t.jsx)("p",{className:"text-sky-100 text-lg",children:"Generate console revenue and scan completion reports"})]}),(0,t.jsx)("div",{className:"ml-6",children:(0,t.jsx)(d.default,{})})]})}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-blue-100 mb-6",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 text-white p-4 rounded-lg mb-6",children:(0,t.jsxs)("h3",{className:"text-lg font-semibold flex items-center",children:[(0,t.jsx)(s.Calendar,{className:"h-5 w-5 mr-2"}),"Report By Day"]})}),(0,t.jsx)("form",{onSubmit:j,className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-end",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Date ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"date",value:i.split("-").reverse().join("-"),onChange:e=>{let t=e.target.value.split("-");o("".concat(t[2],"-").concat(t[1],"-").concat(t[0]))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("button",{type:"submit",disabled:u,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-gradient-to-r from-sky-500 to-sky-600 text-white rounded-lg hover:from-sky-600 hover:to-sky-700 transition-all duration-200 disabled:opacity-50 shadow-md font-medium",children:[(0,t.jsx)(c.Search,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:u?"Generating...":"Generate Report"})]})})]})})]}),f&&(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-blue-100",children:[(0,t.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"VARAHA SDC"}),(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-700 mt-1",children:["CONSOLE REVENUE - ",i]})]}),(0,t.jsxs)("button",{onClick:()=>{if(!i||0===x.length)return void e.error("No data to export");let t='\n      <html>\n        <head>\n          <meta charset="UTF-8">\n          <style>\n            table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; }\n            th, td { border: 1px solid black; padding: 8px; text-align: left; }\n            th { background-color: #f0f0f0; font-weight: bold; text-align: center; }\n            .header { text-align: center; font-weight: bold; font-size: 16px; }\n            .center { text-align: center; }\n            .amount { text-align: right; }\n          </style>\n        </head>\n        <body>\n          <table>\n            <tr><th colspan="13" class="header">VARAHA SDC</th></tr>\n            <tr><th colspan="13" class="header">CONSOLE REVENUE REPORT Date: '.concat(i,"</th></tr>\n            <tr>\n              <th>S.No</th>\n              <th>CRO</th>\n              <th>Name</th>\n              <th>Age</th>\n              <th>Category</th>\n              <th>Scan Type</th>\n              <th>Films</th>\n              <th>Number of Scan</th>\n              <th>Issue CD/DVD</th>\n              <th>Contrast</th>\n              <th>Paid</th>\n              <th>Free</th>\n              <th>Amount</th>\n            </tr>\n    ");x.forEach(e=>{t+='\n        <tr>\n          <td class="center">'.concat(e.sno,"</td>\n          <td>").concat(e.cro,"</td>\n          <td>").concat(e.patientName,'</td>\n          <td class="center">').concat(e.age,"</td>\n          <td>").concat(e.category,"</td>\n          <td>").concat(e.scanType,'</td>\n          <td class="center">').concat(e.films,'</td>\n          <td class="center">').concat(e.numberOfScan,'</td>\n          <td class="center">').concat(e.issueCd,'</td>\n          <td class="center">').concat(e.contrast,'</td>\n          <td class="center">').concat(e.paid||"-",'</td>\n          <td class="center">').concat(e.free||"-",'</td>\n          <td class="amount">₹').concat(e.amount.toLocaleString(),"</td>\n        </tr>\n      ")}),h&&(t+='\n            <tr><td colspan="13"></td></tr>\n            <tr style="font-weight: bold; background-color: #f0f0f0;">\n              <td colspan="5" class="center">TOTAL</td>\n              <td class="center">-</td>\n              <td class="center">'.concat(h.totalFilms,'</td>\n              <td class="center">').concat(h.totalScans,'</td>\n              <td class="center">').concat(h.totalCd,'</td>\n              <td class="center">').concat(h.totalContrast,'</td>\n              <td class="center">').concat(h.totalPaid,'</td>\n              <td class="center">').concat(h.totalFree,'</td>\n              <td class="amount">₹').concat(h.totalAmount.toLocaleString(),"</td>\n            </tr>\n      "));let a=new Blob([t+="\n          </table>\n        </body>\n      </html>\n    "],{type:"application/vnd.ms-excel;charset=utf-8"}),s=window.URL.createObjectURL(a),n=document.createElement("a");n.href=s,n.download="CONSOLE REVENUE REPORT-".concat(i,".xls"),n.click(),window.URL.revokeObjectURL(s)},className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-sky-500 to-sky-600 text-white rounded-lg hover:from-sky-600 hover:to-sky-700 transition-all duration-200 shadow-md font-medium",children:[(0,t.jsx)(r.Download,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Export to Excel"})]})]})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"S.No"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CRO"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Age"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Scan Type"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Films"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Number of Scan"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Issue CD/DVD"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contrast"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Paid"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Free"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),(0,t.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[x.map((e,a)=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black font-medium",children:e.sno}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm font-medium text-blue-600",children:e.cro})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm font-medium text-black",children:e.patientName})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.age}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.category}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.scanType}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.films}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.numberOfScan}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.issueCd}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.contrast}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.paid||"-"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.free||"-"}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:["₹",e.amount.toLocaleString()]})]},a)),h&&(0,t.jsxs)("tr",{className:"bg-blue-100 font-bold",children:[(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-blue-900",colSpan:5}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-blue-900 font-medium",children:"TOTAL"}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-blue-900 font-medium",children:h.totalFilms}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-blue-900 font-medium",children:h.totalScans}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-blue-900 font-medium",children:h.totalCd}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-blue-900 font-medium",children:h.totalContrast}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-blue-900 font-medium",children:h.totalPaid}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-blue-900 font-medium",children:h.totalFree}),(0,t.jsxs)("td",{className:"px-6 py-4 text-sm text-blue-900 font-medium",children:["₹",h.totalAmount.toLocaleString()]})]})]})]})}),0===x.length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(n.FileText,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Data Found"}),(0,t.jsx)("p",{className:"text-gray-500",children:"No completed scans found for the selected date."})]})]}),!f&&!u&&(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-lg border border-blue-100 p-12",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(n.FileText,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Generate Revenue Report"}),(0,t.jsx)("p",{className:"text-gray-500",children:'Select a date above and click "Generate Report" to view console revenue data.'})]})})]})})}}]);