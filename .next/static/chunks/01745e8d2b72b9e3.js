(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,44112,e=>{"use strict";e.s(["default",()=>r]);var t=e.i(43476),a=e.i(71645),s=e.i(84614),i=e.i(63059);function r(){let[e,r]=(0,a.useState)(null);(0,a.useEffect)(()=>{n()},[]);let n=async()=>{try{let e=await fetch("https://varahasdc.co.in/api/reception/patients/last-enrolled");if(e.ok){let t=await e.json();r(t.data)}}catch(e){console.error("Error fetching last patient:",e)}};return e?(0,t.jsx)("div",{className:"bg-blue-600 bg-opacity-20 rounded-lg p-4 border border-blue-200",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-white",children:[(0,t.jsx)(s.User,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm font-medium text-white",children:"Last Enrolled Patient"}),(0,t.jsx)(i.ChevronRight,{className:"h-3 w-3 text-white"}),(0,t.jsx)("span",{className:"text-sm font-bold text-white",children:e.cro}),(0,t.jsx)(i.ChevronRight,{className:"h-3 w-3 text-white"}),(0,t.jsx)("span",{className:"text-sm font-medium text-white",children:e.patient_name})]})}):null}},86536,e=>{"use strict";e.s(["Eye",()=>t],86536);let t=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},61269,e=>{"use strict";e.s(["default",()=>s]);var t=e.i(43476),a=e.i(71645);function s(e){let{onDateChange:s,className:i=""}=e,[r,n]=(0,a.useState)(""),[l,o]=(0,a.useState)(""),d=new Date,c=d.toISOString().split("T")[0],m=new Date(d.getTime()-7776e6).toISOString().split("T")[0];return(0,a.useEffect)(()=>{n(c),o(c),s(c,c)},[c]),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-end space-y-4 sm:space-y-0 sm:space-x-4 ".concat(i),children:[(0,t.jsxs)("div",{className:"flex-shrink-0",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,t.jsx)("input",{type:"date",value:r,min:m,max:c,onChange:e=>{var t;n(t=e.target.value),s(t,l)},className:"px-3 py-2 w-full sm:w-auto border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]}),(0,t.jsxs)("div",{className:"flex-shrink-0",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,t.jsx)("input",{type:"date",value:l,min:m,max:c,onChange:e=>{var t;o(t=e.target.value),s(r,t)},className:"px-3 py-2 w-full sm:w-auto border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base"})]})]})}},14764,e=>{"use strict";e.s(["Send",()=>t],14764);let t=(0,e.i(75254).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},99776,e=>{"use strict";e.s(["default",()=>h]);var t=e.i(43476),a=e.i(71645),s=e.i(55436),i=e.i(88511),r=e.i(86536),n=e.i(78583),l=e.i(14764),o=e.i(84614),d=e.i(37727),c=e.i(8776),m=e.i(44112),x=e.i(61269);function h(){let e=(0,c.useToastContext)(),[h,u]=(0,a.useState)([]),[p,g]=(0,a.useState)(!0),[f,b]=(0,a.useState)(""),[y,j]=(0,a.useState)(1),[N]=(0,a.useState)(10),[w,v]=(0,a.useState)(!1),[k,C]=(0,a.useState)(null),[S,P]=(0,a.useState)({destination:"Nursing",cro:""}),[E,T]=(0,a.useState)(null);(0,a.useEffect)(()=>{D()},[]);let D=async(t,a)=>{try{let s="https://varahasdc.co.in/api/reception/patients/list";t&&a&&(s+="?from=".concat(t,"&to=").concat(a));let i=await fetch(s);if(i.ok){let e=await i.json();console.log("Patients data:",e),u(e.data||[])}else console.error("Failed to fetch patients"),e.error("Failed to fetch patients")}catch(t){console.error("Error fetching patients:",t),e.error("Error fetching patients")}finally{g(!1)}},R=(0,a.useCallback)((e,t)=>{T({from:e,to:t}),g(!0),D(e,t)},[]),_=async()=>{try{(await fetch("/api/admin/patients/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)})).ok&&(e.success("Patient sent to ".concat(S.destination," successfully!")),v(!1),E?D(E.from,E.to):D())}catch(t){e.error("Error sending patient")}},F=h.filter(e=>e.cro.toLowerCase().includes(f.toLowerCase())||e.patient_name.toLowerCase().includes(f.toLowerCase())),L=Math.ceil(F.length/N),O=(y-1)*N,A=F.slice(O,O+N);return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-6",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-6 rounded-xl shadow-lg mb-6",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Registered Patient List"}),(0,t.jsx)("p",{className:"text-blue-100 text-lg",children:"Manage and view all registered patients"})]}),(0,t.jsx)("div",{className:"ml-6",children:(0,t.jsx)(m.default,{})})]})}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-blue-100 mb-6",children:[(0,t.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Search Patients"})}),(0,t.jsx)(x.default,{onDateChange:R}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(s.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,t.jsx)("input",{type:"text",placeholder:"Search by CRO or patient name...",value:f,onChange:e=>b(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("button",{onClick:()=>E?D(E.from,E.to):D(),disabled:p,title:"Refresh patient list",className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 disabled:opacity-50 shadow-md",children:[(0,t.jsx)(s.Search,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:p?"Loading...":"Refresh"})]})]})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-blue-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider",children:"S. No."}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider",children:"CRO No."}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider",children:"Name"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider",children:"Amount Status"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider",children:"Doctor Name"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider",children:"Hospital Name"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map((e,a)=>(0,t.jsxs)("tr",{className:"hover:bg-blue-50 transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black font-medium",children:O+a+1}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm font-medium text-blue-600",children:e.cro})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm font-medium text-black",children:e.patient_name})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:0===e.amount_due?(0,t.jsx)("span",{className:"px-3 py-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-full text-xs font-medium shadow-md",children:"No Due"}):(0,t.jsx)("span",{className:"px-3 py-1 bg-gradient-to-r from-red-500 to-pink-600 text-white rounded-full text-xs font-medium shadow-md",children:"Due"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.dname||"-"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.h_name||"-"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-2",children:[(e=>{let a=e.amount_due>0,s=e.scan_status,i="",r=a;switch(s){case 0:i="Awaiting For Process";break;case 2:i="Stand In Corridor Queue",r=!0;break;case 3:i="Recall";break;case 4:i="Pending";break;default:i="Unknown Status"}return 2===s&&(r=!0),(0,t.jsx)("button",{onClick:()=>!r&&void(C(e),P({destination:"Nursing",cro:e.cro}),v(!0)),disabled:r,title:i,className:"px-3 py-1 rounded-lg text-sm font-medium transition-all duration-200 ".concat(r?"bg-gray-400 text-white cursor-not-allowed opacity-60":"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700 shadow-md"),children:i})})(e),(0,t.jsxs)("div",{className:"flex space-x-1",children:[(0,t.jsx)("a",{href:"/reception/patient-registration/new?edit=".concat(e.patient_id),title:"Edit Patient Details",children:(0,t.jsx)("button",{className:"px-2 py-1 bg-gradient-to-r from-blue-500 to-indigo-600 text-white text-xs rounded-lg hover:from-blue-600 hover:to-indigo-700 font-medium transition-all duration-200 shadow-md",title:"Edit Patient Details",children:(0,t.jsx)(i.Edit,{className:"h-4 w-4"})})}),(0,t.jsx)("a",{href:"/reception/patient-registration/payment/".concat(e.patient_id),title:"View Payment Details",children:(0,t.jsx)("button",{className:"px-2 py-1 bg-gradient-to-r from-indigo-500 to-purple-600 text-white text-xs rounded-lg hover:from-indigo-600 hover:to-purple-700 font-medium transition-all duration-200 shadow-md",title:"View Payment Details",children:(0,t.jsx)(n.FileText,{className:"h-4 w-4"})})}),(0,t.jsx)("button",{className:"px-2 py-1 bg-gradient-to-r from-purple-500 to-pink-600 text-white text-xs rounded-lg hover:from-purple-600 hover:to-pink-700 font-medium transition-all duration-200 shadow-md",title:"View Invoice",children:(0,t.jsx)(r.Eye,{className:"h-4 w-4"})})]})]})})]},e.patient_id))})]})}),L>1&&(0,t.jsx)("div",{className:"px-6 py-4 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-700",children:["Page ",y," of ",L," | Total: ",F.length," records"]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[y>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>j(1),title:"Go to first page",className:"px-3 py-2 text-sm font-medium bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all duration-200 shadow-md",children:"First"}),(0,t.jsx)("button",{onClick:()=>j(y-1),title:"Go to previous page",className:"px-3 py-2 text-sm font-medium bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all duration-200 shadow-md",children:"Previous"})]}),(0,t.jsx)("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,L)},(e,a)=>{let s=Math.max(1,y-2)+a;return s>L?null:(0,t.jsx)("button",{onClick:()=>j(s),title:"Go to page ".concat(s),className:"px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 shadow-md ".concat(y===s?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white":"bg-gradient-to-r from-gray-400 to-gray-500 text-white hover:from-gray-500 hover:to-gray-600"),children:s},s)})}),y<L&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>j(y+1),title:"Go to next page",className:"px-3 py-2 text-sm font-medium bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all duration-200 shadow-md",children:"Next"}),(0,t.jsx)("button",{onClick:()=>j(L),title:"Go to last page",className:"px-3 py-2 text-sm font-medium bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all duration-200 shadow-md",children:"Last"})]})]})]})}),0===F.length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(o.User,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Patients Found"}),(0,t.jsx)("p",{className:"text-gray-500",children:p?"Loading patients...":"No registered patients found."})]})]}),w&&(0,t.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-md",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-4 rounded-t-lg",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Send To"}),(0,t.jsx)("button",{onClick:()=>v(!1),title:"Close modal",className:"text-white hover:text-gray-200 transition-colors duration-200",children:(0,t.jsx)(d.X,{className:"h-5 w-5"})})]})}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600 mb-3",children:["Send patient ",(0,t.jsx)("strong",{children:null==k?void 0:k.cro})," to:"]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"radio",name:"destination",value:"Nursing",checked:"Nursing"===S.destination,onChange:e=>P(t=>({...t,destination:e.target.value})),className:"mr-2"}),(0,t.jsx)("span",{className:"text-sm",children:"Nursing"})]}),(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"radio",name:"destination",value:"Console",checked:"Console"===S.destination,onChange:e=>P(t=>({...t,destination:e.target.value})),className:"mr-2"}),(0,t.jsx)("span",{className:"text-sm",children:"Console"})]})]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)("button",{onClick:_,title:"Send patient to selected destination",className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white py-2 rounded-lg hover:from-green-600 hover:to-emerald-700 flex items-center justify-center space-x-2 transition-all duration-200 shadow-md font-medium",children:[(0,t.jsx)(l.Send,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Submit"})]}),(0,t.jsx)("button",{onClick:()=>v(!1),title:"Cancel and close modal",className:"flex-1 bg-gradient-to-r from-gray-500 to-gray-600 text-white py-2 rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all duration-200 shadow-md font-medium",children:"Cancel"})]})]})]})})]})})}}]);