(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,44112,e=>{"use strict";e.s(["default",()=>n]);var t=e.i(43476),a=e.i(71645),r=e.i(84614),s=e.i(63059);function n(){let[e,n]=(0,a.useState)(null);(0,a.useEffect)(()=>{i()},[]);let i=async()=>{try{let e=await fetch("https://varahasdc.co.in/api/reception/patients/last-enrolled");if(e.ok){let t=await e.json();n(t.data)}}catch(e){console.error("Error fetching last patient:",e)}};return e?(0,t.jsx)("div",{className:"bg-blue-600 bg-opacity-20 rounded-lg p-4 border border-blue-200",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-white",children:[(0,t.jsx)(r.User,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm font-medium text-white",children:"Last Enrolled Patient"}),(0,t.jsx)(s.ChevronRight,{className:"h-3 w-3 text-white"}),(0,t.jsx)("span",{className:"text-sm font-bold text-white",children:e.cro}),(0,t.jsx)(s.ChevronRight,{className:"h-3 w-3 text-white"}),(0,t.jsx)("span",{className:"text-sm font-medium text-white",children:e.patient_name})]})}):null}},29562,e=>{"use strict";e.s(["Button",()=>c,"Card",()=>r,"Pagination",()=>m,"Table",()=>s,"TableBody",()=>l,"TableCell",()=>d,"TableHeader",()=>n,"TableHeaderCell",()=>i,"TableRow",()=>o,"default",()=>a]);var t=e.i(43476);function a(e){let{children:a,title:r,subtitle:s,actions:n}=e;return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"bg-white border-b border-gray-200 shadow-sm",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:r}),s&&(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:s})]}),n&&(0,t.jsx)("div",{className:"flex space-x-3",children:n})]})})}),(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:a})]})}function r(e){let{children:a,className:r=""}=e;return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 ".concat(r),children:a})}function s(e){let{children:a}=e;return(0,t.jsx)("div",{className:"overflow-hidden",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsx)("table",{className:"min-w-full divide-y divide-gray-200",children:a})})})}function n(e){let{children:a}=e;return(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsx)("tr",{children:a})})}function i(e){let{children:a,className:r=""}=e;return(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ".concat(r),children:a})}function l(e){let{children:a}=e;return(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a})}function o(e){let{children:a,className:r=""}=e;return(0,t.jsx)("tr",{className:"hover:bg-gray-50 ".concat(r),children:a})}function d(e){let{children:a,className:r="",...s}=e;return(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 ".concat(r),...s,children:a})}function c(e){let{children:a,variant:r="primary",size:s="md",className:n="",...i}=e;return(0,t.jsx)("button",{className:"".concat("inline-flex items-center justify-center font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}[r]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[s]," ").concat(n),...i,children:a})}function m(e){let{currentPage:a,totalPages:r,onPageChange:s,totalItems:n,itemsPerPage:i}=e,l=Math.min(a*i,n);return(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-white border-t border-gray-200",children:[(0,t.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,t.jsx)(c,{variant:"secondary",size:"sm",onClick:()=>s(a-1),disabled:1===a,children:"Previous"}),(0,t.jsx)(c,{variant:"secondary",size:"sm",onClick:()=>s(a+1),disabled:a===r,children:"Next"})]}),(0,t.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing ",(0,t.jsx)("span",{className:"font-medium",children:(a-1)*i+1})," to"," ",(0,t.jsx)("span",{className:"font-medium",children:l})," of"," ",(0,t.jsx)("span",{className:"font-medium",children:n})," results"]})}),(0,t.jsxs)("div",{className:"flex space-x-1",children:[(0,t.jsx)(c,{variant:"secondary",size:"sm",onClick:()=>s(a-1),disabled:1===a,children:"Previous"}),Array.from({length:Math.min(5,r)},(e,n)=>{let i=Math.max(1,a-2)+n;return i<=r?(0,t.jsx)(c,{variant:a===i?"primary":"secondary",size:"sm",onClick:()=>s(i),children:i},i):null}),(0,t.jsx)(c,{variant:"secondary",size:"sm",onClick:()=>s(a+1),disabled:a===r,children:"Next"})]})]})]})}},71689,e=>{"use strict";e.s(["ArrowLeft",()=>t],71689);let t=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},72520,e=>{"use strict";e.s(["ArrowRight",()=>t],72520);let t=(0,e.i(75254).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},43531,e=>{"use strict";e.s(["Check",()=>t],43531);let t=(0,e.i(75254).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},63812,e=>{"use strict";e.s(["default",()=>m]);var t=e.i(43476),a=e.i(71645),r=e.i(84614),s=e.i(78583),n=e.i(71689),i=e.i(72520),l=e.i(43531),o=e.i(64659),d=e.i(29562),c=e.i(44112);function m(){let[e,m]=(0,a.useState)(1),[u,x]=(0,a.useState)([]),[p,h]=(0,a.useState)([]),[g,b]=(0,a.useState)([]),[y,f]=(0,a.useState)([]),[j,v]=(0,a.useState)(!1),[N,_]=(0,a.useState)(""),[w,S]=(0,a.useState)(""),[C,k]=(0,a.useState)(""),[P,D]=(0,a.useState)(!1),[R,A]=(0,a.useState)(!1),[E,T]=(0,a.useState)(!1),[O,I]=(0,a.useState)(!1),[F,M]=(0,a.useState)(""),[L,H]=(0,a.useState)(""),[G,B]=(0,a.useState)({}),[q,z]=(0,a.useState)(null),[Y,U]=(0,a.useState)([]),[Z,J]=(0,a.useState)({date:new Date().toLocaleDateString("en-GB").split("/").reverse().join("-"),hospital_name:"",doctor_name:"",pre:"Mr.",firstname:"",age:"",age_type:"Year",gender:"Male",petient_type:"GEN / Paid",p_uni_submit:"N",p_uni_id_name:"",address:"",city:"",contact_number:"",type_of_scan:[],appoint_date:new Date().toLocaleDateString("en-GB").split("/").reverse().join("-"),time:"",time_in:"",amount:"0",est_time:"0",total_amount:"0",rec_amount:"0",dis_amount:"0",due_amount:"0"});(0,a.useEffect)(()=>{$(),K(),V(),Q(),W();let e=e=>{e.target.closest(".relative")||(D(!1),A(!1),T(!1),I(!1))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let $=async()=>{try{let e=await fetch("https://varahasdc.co.in/api/admin/hospitals");if(e.ok){let t=await e.json();x(t.data||[])}}catch(e){console.error("Error fetching hospitals:",e)}},K=async()=>{try{let e=await fetch("https://varahasdc.co.in/api/admin/doctors");if(e.ok){let t=await e.json();h(Array.isArray(t)?t:[])}}catch(e){console.error("Error fetching doctors:",e)}},V=async()=>{try{let e=await fetch("https://varahasdc.co.in/api/admin/scans");if(e.ok){let t=await e.json();b(t.success?t.data:[])}}catch(e){console.error("Error fetching scans:",e)}},Q=async()=>{try{let e=[];for(let t=7;t<18;t++)for(let a=0;a<60;a+=15){let r="".concat(t.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0")),s=ee(r);e.push({time_id:e.length+1,time_slot:s})}U(e)}catch(e){console.error("Error generating time slots:",e),U([])}},W=async()=>{try{let e=await fetch("https://varahasdc.co.in/api/admin/patients/last-enrolled");if(e.ok){let t=await e.json();z(t.data)}}catch(e){console.error("Error fetching last patient:",e)}},X=e=>{let{name:t,value:a}=e.target;J(e=>({...e,[t]:a})),G[t]&&B(e=>({...e,[t]:""})),"petient_type"===t&&v(["IPD FREE","OPD FREE","RTA","RGHS","Chiranjeevi","Destitute","PRISONER","Sn. CITIZEN","Aayushmaan"].includes(a))},ee=e=>{let[t,a]=e.split(":").map(Number);return"".concat((t%12||12).toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0")," ").concat(t>=12?"PM":"AM")},et=e=>{let[t,a]=e.split(" "),[r,s]=t.split(":").map(Number),n=r;return"PM"===a&&12!==r?n+=12:"AM"===a&&12===r&&(n=0),"".concat(n.toString().padStart(2,"0"),":").concat(s.toString().padStart(2,"0"))},ea=(e,t)=>{if(!e||!t)return;let[a,r]=e.split(":").map(Number),s=new Date;s.setHours(a,r,0,0);let n=new Date(s.getTime()+6e4*t),i="".concat(n.getHours().toString().padStart(2,"0"),":").concat(n.getMinutes().toString().padStart(2,"0"));J(e=>({...e,time_in:i})),H(ee(i))},er=()=>!!["Destitute","Chiranjeevi","RGHS","RTA","OPD FREE","IPD FREE","BPL/POOR","Sn. CITIZEN","BHAMASHAH","JSSY","PRISONER","Aayushmaan"].includes(Z.petient_type)||0===(parseFloat(Z.due_amount)||0),es=async e=>{try{let a={hospital_name:Z.hospital_name,DoctorName:Z.doctor_name,pre:Z.pre,firstname:Z.firstname,age:Z.age,age_type:Z.age_type,gender:Z.gender,petient_type:Z.petient_type,p_uni_submit:Z.p_uni_submit||"N",p_uni_id_name:Z.p_uni_id_name||"",address:Z.address,city:Z.city,contact_number:Z.contact_number,type_of_scan:Z.type_of_scan,appoint_date:Z.appoint_date,time:Z.time,time_in:Z.time_in,amount:Z.amount,total_amount:Z.total_amount,dis_amount:Z.dis_amount,rec_amount:Z.rec_amount,due_amount:Z.due_amount,admin_id:1,action:e},r=await fetch("https://varahasdc.co.in/api/admin/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(r.ok){var t;let a=await r.json(),s=(null==(t=a.data)?void 0:t.cro)||"Registered";alert("Patient registered successfully! CRO: ".concat(s)),"Save_Print"===e&&ei(a.data),"Save"===e&&en()}else{let e=await r.json().catch(()=>({}));alert("Error: ".concat(e.error||"Failed to register patient"))}}catch(e){console.error("Error saving patient:",e),alert("Error saving patient")}},en=()=>{J({date:new Date().toLocaleDateString("en-GB").split("/").reverse().join("-"),hospital_name:"",doctor_name:"",pre:"Mr.",firstname:"",age:"",age_type:"Year",gender:"Male",petient_type:"GEN / Paid",p_uni_submit:"N",p_uni_id_name:"",address:"",city:"",contact_number:"",type_of_scan:[],appoint_date:new Date().toLocaleDateString("en-GB").split("/").reverse().join("-"),time:"",time_in:"",amount:"0",est_time:"0",total_amount:"0",rec_amount:"0",dis_amount:"0",due_amount:"0"}),S(""),k(""),M(""),H(""),_(""),f([]),m(1),W()},ei=e=>{let t=new Date().toLocaleDateString("en-GB"),a=y.map(e=>e.s_name).join(", "),r="\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Patient Receipt - ".concat(e.cro||"New Patient",'</title>\n          <style>\n            body { font-family: Arial, sans-serif; margin: 0; padding: 10px; }\n            .admission_form { text-align: center; color: #000000; font-size: 14px; width: 100%; }\n            .admission_form table { width: 100%; font-size: 10px; margin: -5px 0px; }\n            .form_input { padding: 2px 1%; font-size: 16px; border: none; font-weight: bold; }\n          </style>\n        </head>\n        <body>\n          <div class="admission_form" style="border:solid thin; margin-top:20px;">\n            <table>\n              <tr><td colspan="6" align="center">Dr. S.N. MEDICL COLLEGE AND ATTACHED GROUP OF HOSPITAL, JODHPUR</td></tr>\n              <tr><td colspan="6" align="center">VARAHA SDC - 256 SLICE CT SCAN</td></tr>\n              <tr><td colspan="6" align="center">Cash Receipt</td></tr>\n            </table>\n            <table>\n              <tr>\n                <td width="80">Reg.No :</td>\n                <td><input type="text" class="form_input" value="').concat(e.cro||"",'"></td>\n                <td width="30">Date</td>\n                <td><input type="text" class="form_input" value="').concat(t,'"></td>\n              </tr>\n            </table>\n            <table>\n              <tr>\n                <td width="130">Name Of Patient :</td>\n                <td><input type="text" class="form_input" value="').concat(Z.pre," ").concat(Z.firstname,'"></td>\n                <td>Age :</td>\n                <td><input type="text" class="form_input" value="').concat(Z.age," ").concat(Z.age_type,'"></td>\n                <td>Gender</td>\n                <td><input type="text" class="form_input" value="').concat(Z.gender,'"></td>\n              </tr>\n            </table>\n            <table>\n              <tr>\n                <td width="80">Investiations:</td>\n                <td><input type="text" class="form_input" value="').concat(a,'"></td>\n              </tr>\n            </table>\n            <table>\n              <tr>\n                <td width="150">For Sum Of Rupees:</td>\n                <td><input type="text" class="form_input" value="Rs. ').concat(Z.total_amount,'/-"></td>\n                <td width="150"><input type="text" value="Rs. ').concat(Z.total_amount,'" style="border:2px solid;"></td>\n              </tr>\n            </table>\n          </div>\n        </body>\n      </html>\n    '),s=window.open("","_blank","width=800,height=600");s&&(s.document.write(r),s.document.close(),setTimeout(()=>{s.focus(),s.print()},100))};return(0,t.jsx)(d.default,{title:"New Patient Registration",subtitle:"Complete patient enrollment and scan booking",actions:(0,t.jsx)(c.default,{}),children:(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[(0,t.jsx)("div",{className:"border-b border-gray-200",children:(0,t.jsxs)("nav",{className:"flex",children:[(0,t.jsx)("button",{className:"flex-1 py-4 px-6 text-center border-b-2 font-medium text-sm ".concat(1===e?"border-red-500 text-red-600 bg-red-50":"border-transparent text-gray-500 hover:text-gray-700"),onClick:()=>m(1),children:"1. Enrollment Detail"}),(0,t.jsx)("button",{className:"flex-1 py-4 px-6 text-center border-b-2 font-medium text-sm ".concat(2===e?"border-red-500 text-red-600 bg-red-50":"border-transparent text-gray-500 hover:text-gray-700"),onClick:()=>m(2),children:"2. Scan Options"}),(0,t.jsx)("button",{className:"flex-1 py-4 px-6 text-center border-b-2 font-medium text-sm ".concat(3===e?"border-red-500 text-red-600 bg-red-50":"border-transparent text-gray-500 hover:text-gray-700"),onClick:()=>m(3),children:"3. Payment Details"})]})}),(0,t.jsxs)("form",{className:"p-6",children:[1===e&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,t.jsx)("input",{type:"text",name:"date",value:Z.date.split("-").reverse().join("-"),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50",readOnly:!0})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Hospital Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",value:w,onChange:e=>{S(e.target.value),D(!0)},onFocus:()=>D(!0),className:"w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 ".concat(G.hospital_name?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-red-500"),placeholder:"Search and select hospital",required:!0}),(0,t.jsx)(o.ChevronDown,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),P&&(0,t.jsx)("div",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md mt-1 max-h-60 overflow-y-auto shadow-lg",children:u.filter(e=>e.h_name.toLowerCase().includes(w.toLowerCase())).map(e=>(0,t.jsx)("div",{className:"px-3 py-2 hover:bg-red-50 cursor-pointer",onClick:()=>{J(t=>({...t,hospital_name:e.h_id.toString()})),S(e.h_name),D(!1),G.hospital_name&&B(e=>({...e,hospital_name:""}))},children:e.h_name},e.h_id))}),G.hospital_name&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:G.hospital_name})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Doctor Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",value:C,onChange:e=>{k(e.target.value),A(!0)},onFocus:()=>A(!0),className:"w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 ".concat(G.doctor_name?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-red-500"),placeholder:"Search and select doctor",required:!0}),(0,t.jsx)(o.ChevronDown,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),R&&(0,t.jsx)("div",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md mt-1 max-h-60 overflow-y-auto shadow-lg",children:p.filter(e=>e.dname.toLowerCase().includes(C.toLowerCase())).map(e=>(0,t.jsx)("div",{className:"px-3 py-2 hover:bg-red-50 cursor-pointer",onClick:()=>{J(t=>({...t,doctor_name:e.d_id.toString()})),k(e.dname),A(!1),G.doctor_name&&B(e=>({...e,doctor_name:""}))},children:e.dname},e.d_id))}),G.doctor_name&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:G.doctor_name})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Patient Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{name:"pre",value:Z.pre,onChange:X,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,t.jsx)("option",{value:"Mr.",children:"Mr."}),(0,t.jsx)("option",{value:"Mrs.",children:"Mrs."}),(0,t.jsx)("option",{value:"Master",children:"Master"}),(0,t.jsx)("option",{value:"Miss",children:"Miss"}),(0,t.jsx)("option",{value:"Baby",children:"Baby"})]})]}),(0,t.jsxs)("div",{className:"md:col-span-3",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),(0,t.jsx)("input",{type:"text",name:"firstname",value:Z.firstname,onChange:X,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ".concat(G.firstname?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-red-500"),placeholder:"Please enter your First name",required:!0}),G.firstname&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:G.firstname})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Age ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"age",value:Z.age,onChange:e=>{let t=e.target.value;/^\d*$/.test(t)&&(""===t||parseInt(t)>=0&&100>=parseInt(t))&&X(e)},className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ".concat(G.age?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-red-500"),placeholder:"Age (0-100)",maxLength:3}),G.age&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:G.age})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"In (Year/Month/Days)"}),(0,t.jsxs)("select",{name:"age_type",value:Z.age_type,onChange:X,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,t.jsx)("option",{value:"Year",children:"Year"}),(0,t.jsx)("option",{value:"Month",children:"Month"}),(0,t.jsx)("option",{value:"Days",children:"Days"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),(0,t.jsxs)("select",{name:"gender",value:Z.gender,onChange:X,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,t.jsx)("option",{value:"Male",children:"Male"}),(0,t.jsx)("option",{value:"Female",children:"Female"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,t.jsxs)("select",{name:"petient_type",value:Z.petient_type,onChange:X,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,t.jsx)("option",{value:"GEN / Paid",children:"GEN / Paid"}),(0,t.jsx)("option",{value:"IPD FREE",children:"IPD Free"}),(0,t.jsx)("option",{value:"OPD FREE",children:"OPD Free"}),(0,t.jsx)("option",{value:"RTA",children:"RTA"}),(0,t.jsx)("option",{value:"RGHS",children:"RGHS"}),(0,t.jsx)("option",{value:"Chiranjeevi",children:"Chiranjeevi"}),(0,t.jsx)("option",{value:"Destitute",children:"Destitute"}),(0,t.jsx)("option",{value:"PRISONER",children:"PRISONER"}),(0,t.jsx)("option",{value:"Sn. CITIZEN",children:"Sn. CITIZEN"}),(0,t.jsx)("option",{value:"Aayushmaan",children:"Aayushmaan"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,t.jsx)("input",{type:"text",name:"address",value:Z.address,onChange:X,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Please enter your Address"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),(0,t.jsx)("input",{type:"text",name:"city",value:Z.city,onChange:X,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Please enter your city"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Number"}),(0,t.jsx)("input",{type:"text",name:"contact_number",value:Z.contact_number,onChange:e=>{let t=e.target.value;/^\d*$/.test(t)&&t.length<=10&&X(e)},className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ".concat(G.contact_number?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-red-500"),placeholder:"10-digit mobile number",maxLength:10}),G.contact_number&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:G.contact_number})]})]})]}),2===e&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Scan Type ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("input",{type:"text",placeholder:"Search scans...",value:N,onChange:e=>_(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 mb-3"})}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-60 overflow-y-auto border border-gray-200 rounded-md p-4",children:g.filter(e=>e.s_name.toLowerCase().includes(N.toLowerCase())).map(e=>(0,t.jsxs)("label",{className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:Z.type_of_scan.includes(e.s_id.toString()),onChange:t=>((e,t)=>{let a=[...Z.type_of_scan];t?a.push(e):a=a.filter(t=>t!==e),J(e=>({...e,type_of_scan:a}));let r=g.filter(e=>a.includes(e.s_id.toString()));f(r);let s=r.reduce((e,t)=>e+t.charges,0),n=r.reduce((e,t)=>{var a;let r=null==(a=t.estimate_time)?void 0:a.match(/(\d+)/);return e+(r?parseInt(r[1]):0)},0);["Destitute","Chiranjeevi","RGHS","RTA","OPD FREE","IPD FREE","BPL/POOR","Sn. CITIZEN","BHAMASHAH","JSSY","PRISONER","Aayushmaan"].includes(Z.petient_type)&&(s=0),J(e=>{let t={...e,amount:s.toString(),est_time:n.toString(),total_amount:s.toString()},a=parseFloat(e.rec_amount)||0,r=parseFloat(e.dis_amount)||0,i=s-a-r;return{...t,due_amount:i.toString()}}),Z.time&&n>0&&ea(Z.time,n)})(e.s_id.toString(),t.target.checked),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:e.s_name}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["₹",e.charges," • ",e.estimate_time," min"]})]})]},e.s_id))}),G.type_of_scan&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:G.type_of_scan})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Appoint Date"}),(0,t.jsx)("input",{type:"date",name:"appoint_date",value:Z.appoint_date,onChange:e=>{let{name:t,value:a}=e.target;J(e=>({...e,[t]:a}));let r=(()=>{let e=new Date;return"".concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))})();J(e=>({...e,time:r})),M(ee(r));let s=parseInt(Z.est_time)||0;s>0&&ea(r,s)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Time In ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",value:F,onChange:e=>{M(e.target.value),T(!0)},onFocus:()=>T(!0),className:"w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 ".concat(G.time?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-red-500"),placeholder:"Search and select time",required:!0}),(0,t.jsx)(o.ChevronDown,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),E&&(0,t.jsx)("div",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md mt-1 max-h-60 overflow-y-auto shadow-lg",children:Y.filter(e=>e.time_slot.toLowerCase().includes(F.toLowerCase())).map(e=>(0,t.jsx)("div",{className:"px-3 py-2 hover:bg-red-50 cursor-pointer",onClick:()=>{let t=et(e.time_slot);J(e=>({...e,time:t})),M(e.time_slot),T(!1),G.time&&B(e=>({...e,time:""}));let a=parseInt(Z.est_time)||0;a>0&&ea(t,a)},children:e.time_slot},e.time_id))}),G.time&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:G.time})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Time Out ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",value:L,onChange:e=>{H(e.target.value),I(!0)},onFocus:()=>I(!0),className:"w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 ".concat(G.time_in?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-red-500"),placeholder:"Search and select time",required:!0}),(0,t.jsx)(o.ChevronDown,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),O&&(0,t.jsx)("div",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md mt-1 max-h-60 overflow-y-auto shadow-lg",children:Y.filter(e=>e.time_slot.toLowerCase().includes(L.toLowerCase())).map(e=>(0,t.jsx)("div",{className:"px-3 py-2 hover:bg-red-50 cursor-pointer",onClick:()=>{let t=et(e.time_slot);J(e=>({...e,time_in:t})),H(e.time_slot),I(!1),G.time_in&&B(e=>({...e,time_in:""}))},children:e.time_slot},e.time_id))}),G.time_in&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:G.time_in})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),(0,t.jsx)("input",{type:"text",name:"amount",value:Z.amount,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50",readOnly:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Time"}),(0,t.jsx)("input",{type:"text",name:"est_time",value:Z.est_time,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50",readOnly:!0})]})]}),y.length>0&&(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Selected Scans"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gray-50",children:[(0,t.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"S.No"}),(0,t.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Name Of Scan"}),(0,t.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Charges"})]})}),(0,t.jsx)("tbody",{children:y.map((e,a)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:a+1}),(0,t.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.s_name}),(0,t.jsxs)("td",{className:"border border-gray-300 px-4 py-2",children:["₹",e.charges]})]},e.s_id))})]})})]})]}),3===e&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-red-50 px-4 py-3 border-b border-gray-200",children:(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(r.User,{className:"h-5 w-5 mr-2 text-red-600"}),"Patient Summary"]})}),(0,t.jsx)("div",{className:"p-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Patient Name"}),(0,t.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:[Z.pre," ",Z.firstname]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Age & Gender"}),(0,t.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:[Z.age," ",Z.age_type,", ",Z.gender]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Category"}),(0,t.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:Z.petient_type})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Appointment Date"}),(0,t.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:Z.appoint_date.split("-").reverse().join("-")})]})]})})]}),(0,t.jsxs)("div",{className:"bg-white border border-gray-300 rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"bg-gray-100 px-4 py-3 border-b border-gray-300",children:(0,t.jsx)("h4",{className:"font-semibold text-gray-800",children:"Payment Details"})}),(0,t.jsxs)("div",{className:"p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Amount"}),(0,t.jsx)("input",{type:"text",name:"total_amount",value:"₹".concat(Z.total_amount),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 font-semibold",readOnly:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Received Amount"}),(0,t.jsx)("input",{type:"number",name:"rec_amount",value:Z.rec_amount,onChange:e=>{let t=parseFloat(Z.total_amount)||0,a=t-(parseFloat(e.target.value)||0)-(parseFloat(Z.dis_amount)||0);J(t=>({...t,rec_amount:e.target.value,due_amount:a.toString()}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"0"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount"}),(0,t.jsx)("input",{type:"number",name:"dis_amount",value:Z.dis_amount,onChange:e=>{let t=parseFloat(Z.total_amount)||0,a=t-(parseFloat(Z.rec_amount)||0)-(parseFloat(e.target.value)||0);J(t=>({...t,dis_amount:e.target.value,due_amount:a.toString()}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"0"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Amount"}),(0,t.jsx)("input",{type:"text",name:"due_amount",value:"₹".concat(Z.due_amount),className:"w-full px-3 py-2 border border-gray-300 rounded-md font-semibold ".concat(parseFloat(Z.due_amount)>0?"bg-red-50 text-red-700":"bg-green-50 text-green-700"),readOnly:!0})]})]}),(0,t.jsx)("div",{className:"text-center p-3 rounded-md ".concat(er()?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:(0,t.jsx)("span",{className:"font-semibold ".concat(er()?"text-green-700":"text-red-700"),children:er()?"Ready to print":"Payment Required - Complete payment to enable printing"})})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between pt-6 border-t border-gray-200",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>{e>1&&m(e-1)},disabled:1===e,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)(n.ArrowLeft,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Previous"})]}),(0,t.jsx)("div",{className:"flex space-x-2",children:e<3?(0,t.jsxs)("button",{type:"button",onClick:()=>{(e=>{let t={};return 1===e&&(Z.hospital_name||(t.hospital_name="Hospital Name is required"),Z.doctor_name||(t.doctor_name="Doctor Name is required"),Z.firstname.trim()||(t.firstname="Patient Name is required"),Z.age.trim()||(t.age="Age is required"),Z.contact_number&&!/^[0-9]{10}$/.test(Z.contact_number)&&(t.contact_number="Contact Number must be 10 digits")),2===e&&(0===Z.type_of_scan.length&&(t.type_of_scan="At least one scan type is required"),Z.time||(t.time="Time In is required"),Z.time_in||(t.time_in="Time Out is required")),B(t),0===Object.keys(t).length})(e)&&e<3&&m(e+1)},className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:[(0,t.jsx)("span",{children:"Next"}),(0,t.jsx)(i.ArrowRight,{className:"h-4 w-4"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{type:"button",onClick:()=>es("Save"),className:"flex items-center space-x-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium shadow-lg transition-all duration-200",children:[(0,t.jsx)(l.Check,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"SAVE"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>{if(!er())return void alert("Please complete payment before printing receipt");es("Save_Print")},disabled:!er(),className:"flex items-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium shadow-lg transition-all duration-200",children:[(0,t.jsx)(s.FileText,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"PRINT"})]})]})})]})]})]})})})}}]);