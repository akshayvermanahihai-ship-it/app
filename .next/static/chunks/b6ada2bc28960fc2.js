(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15105,e=>{"use strict";e.s(["default",()=>c]);var t=e.i(43476),a=e.i(71645),n=e.i(84614),s=e.i(78583),r=e.i(71689),i=e.i(72520),o=e.i(43531),l=e.i(64659),d=e.i(8776);function c(){let e=(0,d.useToastContext)(),[c,m]=(0,a.useState)(1),[p,u]=(0,a.useState)(!1),[x,g]=(0,a.useState)(null),[h,b]=(0,a.useState)([]),[y,f]=(0,a.useState)([]),[_,v]=(0,a.useState)([]),[j,N]=(0,a.useState)([]),[w,S]=(0,a.useState)(!1),[C,D]=(0,a.useState)(""),[E,A]=(0,a.useState)(""),[P,k]=(0,a.useState)(""),[R,I]=(0,a.useState)(!1),[M,T]=(0,a.useState)(!1),[O,L]=(0,a.useState)(!1),[F,G]=(0,a.useState)(!1),[H,U]=(0,a.useState)(""),[B,Y]=(0,a.useState)(""),[q,J]=(0,a.useState)({}),[z,V]=(0,a.useState)(null),[Z,K]=(0,a.useState)([]),[$,X]=(0,a.useState)(!1),[Q,W]=(0,a.useState)(null),[ee,et]=(0,a.useState)({date:new Date().toLocaleDateString("en-GB").split("/").reverse().join("-"),hospital_name:"",doctor_name:"",pre:"Mr.",firstname:"",age:"",age_type:"Year",gender:"Male",petient_type:"GEN / Paid",p_uni_submit:"N",p_uni_id_name:"",address:"",city:"",contact_number:"",type_of_scan:[],appoint_date:new Date().toLocaleDateString("en-GB").split("/").reverse().join("-"),time:"",time_in:"",amount:"0",est_time:"0",total_amount:"0",rec_amount:"0",dis_amount:"0",due_amount:"0"});(0,a.useEffect)(()=>{ea(),en(),es(),er(),eo();let e=new URLSearchParams(window.location.search).get("edit");e&&(u(!0),g(e),ec(e));let t=e=>{e.target.closest(".relative")||(I(!1),T(!1),L(!1),G(!1))};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]),(0,a.useEffect)(()=>{if(!p&&!ee.time){let e=new Date;if(new Date(ee.appoint_date).toDateString()===e.toDateString()){let e=ex(),t=ep(e);et(t=>({...t,time:e})),U(t)}}},[ee.appoint_date]),(0,a.useEffect)(()=>{ee.time&&ee.est_time&&parseInt(ee.est_time)>0&&eu(ee.time,parseInt(ee.est_time))},[ee.time,ee.est_time]),(0,a.useEffect)(()=>{if(ee.time&&ee.est_time&&parseInt(ee.est_time)>0){let e=Z.find(e=>e.time_id.toString()===ee.time);if(e){let t=e.time_slot.match(/(\d{1,2}):(\d{2})\s*(AM|PM)/i);if(t){let e=parseInt(t[1]),a=parseInt(t[2]),n=t[3].toUpperCase();"PM"===n&&12!==e?e+=12:"AM"===n&&12===e&&(e=0),eu("".concat(e.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0")),parseInt(ee.est_time))}}}},[ee.est_time,ee.time,Z]);let ea=async()=>{try{let e=await fetch("https://varahasdc.co.in/api/reception/hospitals");if(e.ok){let t=await e.json();b(Array.isArray(t)?t:[])}}catch(e){console.error("Error fetching hospitals:",e)}},en=async()=>{try{let e=await fetch("https://varahasdc.co.in/api/reception/doctors");if(e.ok){let t=await e.json();f(Array.isArray(t)?t:[])}}catch(e){console.error("Error fetching doctors:",e)}},es=async()=>{try{let e=await fetch("https://varahasdc.co.in/api/reception/scans");if(e.ok){let t=await e.json();v(Array.isArray(t)?t:[])}}catch(e){console.error("Error fetching scans:",e)}},er=async()=>{try{let e=await fetch("https://varahasdc.co.in/api/reception/time-slots");if(e.ok){let t=await e.json(),a=Array.isArray(t)?t:[];console.log("Fetched time slots:",a),K(a)}else console.error("Failed to fetch time slots, using fallback"),ei()}catch(e){console.error("Error fetching time slots:",e),ei()}},ei=()=>{let e=[];for(let t=0;t<24;t++)for(let a=0;a<60;a+=15){let n=ep("".concat(t.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0")));e.push({time_id:e.length+1,time_slot:n})}console.log("Using fallback time slots:",e.length),K(e)},eo=async()=>{try{let e=await fetch("https://varahasdc.co.in/api/reception/patients/last-enrolled");if(e.ok){let t=await e.json();V(t.data)}}catch(e){console.error("Error fetching last patient:",e)}},[el,ed]=(0,a.useState)(null),ec=async e=>{try{let t=await fetch("https://varahasdc.co.in/api/reception/patients/".concat(e));if(t.ok){let e=await t.json();ed(e.data)}}catch(e){console.error("Error fetching patient data:",e)}};(0,a.useEffect)(()=>{if(el&&_.length>0){var e,t,a,n,s,r,i,o,l,d;let c=el.scan_type?el.scan_type.split(","):[],m=_.filter(e=>c.includes(e.s_id.toString()));N(m);let p=m.reduce((e,t)=>{var a;let n=null==(a=t.estimate_time)?void 0:a.match(/(\d+)/);return e+(n?parseInt(n[1]):0)},0);et({date:el.date||new Date().toLocaleDateString("en-GB").split("/").reverse().join("-"),hospital_name:(null==(e=el.hospital_id)?void 0:e.toString())||"",doctor_name:(null==(t=el.doctor_name)?void 0:t.toString())||"",pre:el.pre||"Mr.",firstname:el.patient_name||"",age:(null==(a=el.age)?void 0:a.replace(/[^0-9]/g,""))||"",age_type:(null==(n=el.age)?void 0:n.includes("Year"))?"Year":(null==(s=el.age)?void 0:s.includes("Month"))?"Month":"Days",gender:el.gender||"Male",petient_type:el.petient_type||"GEN / Paid",p_uni_submit:el.p_uni_submit||"N",p_uni_id_name:el.p_uni_id_name||"",address:el.address||"",city:el.city||"",contact_number:el.contact_number||"",type_of_scan:c,appoint_date:el.appoint_date?el.appoint_date.includes("-")?el.appoint_date.split("-").reverse().join("-"):el.appoint_date:new Date().toLocaleDateString("en-GB").split("/").reverse().join("-"),time:el.time||"",time_in:el.time_in||"",amount:(null==(r=el.amount)?void 0:r.toString())||"0",est_time:p.toString(),total_amount:(null==(i=el.total_amount)?void 0:i.toString())||"0",rec_amount:(null==(o=el.rec_amount)?void 0:o.toString())||"0",dis_amount:(null==(l=el.dis_amount)?void 0:l.toString())||"0",due_amount:(null==(d=el.due_amount)?void 0:d.toString())||"0"}),el.h_name&&A(el.h_name),el.dname&&k(el.dname),setTimeout(()=>{if(el.time&&Z.length>0){let e=Z.find(e=>e.time_id.toString()===el.time.toString());e?(U(e.time_slot),et(t=>({...t,time:e.time_slot}))):"string"==typeof el.time&&el.time.includes(":")&&U(ep(el.time))}if(el.time_in&&Z.length>0){let e=Z.find(e=>e.time_id.toString()===el.time_in.toString());e?(Y(e.time_slot),et(t=>({...t,time_in:e.time_slot}))):"string"==typeof el.time_in&&el.time_in.includes(":")&&Y(ep(el.time_in))}el.time&&p>0&&el.time.includes(":")&&eu(el.time,p)},500)}},[el,_,Z]);let em=e=>{let{name:t,value:a}=e.target;et(e=>({...e,[t]:a})),q[t]&&J(e=>({...e,[t]:""})),"petient_type"===t&&S(["IPD FREE","OPD FREE","RTA","RGHS","Chiranjeevi","Destitute","PRISONER","Sn. CITIZEN","Aayushmaan"].includes(a))},ep=e=>{let[t,a]=e.split(":").map(Number);return"".concat((t%12||12).toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0")," ").concat(t>=12?"PM":"AM")},eu=(e,t)=>{let a,n;if(!e||!t)return;if(e.includes("AM")||e.includes("PM")){let t=e.match(/(\d{1,2}):(\d{2})\s*(AM|PM)/i);if(!t)return;a=parseInt(t[1]),n=parseInt(t[2]);let s=t[3].toUpperCase();"PM"===s&&12!==a?a+=12:"AM"===s&&12===a&&(a=0)}else[a,n]=e.split(":").map(Number);let s=new Date;s.setHours(a,n,0,0);let r=new Date(s.getTime()+6e4*t),i="".concat(r.getHours().toString().padStart(2,"0"),":").concat(r.getMinutes().toString().padStart(2,"0"));et(e=>({...e,time_in:i})),Y(ep(i))},ex=()=>{let e=new Date;return"".concat(e.getHours().toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0"))},eg=()=>!!["Destitute","Chiranjeevi","RGHS","RTA","OPD FREE","IPD FREE","BPL/POOR","Sn. CITIZEN","BHAMASHAH","JSSY","PRISONER","Aayushmaan"].includes(ee.petient_type)||0===(parseFloat(ee.due_amount)||0),eh=async t=>{if("Print"===t){Q&&(ey(Q),e&&"function"==typeof e.info&&e.info("Receipt printed successfully!"),setTimeout(()=>{window.location.href="/reception/patient-registration"},2e3));return}try{let n,s={hospital_name:ee.hospital_name,DoctorName:ee.doctor_name,pre:ee.pre,firstname:ee.firstname,age:ee.age,age_type:ee.age_type,gender:ee.gender,petient_type:ee.petient_type,p_uni_submit:ee.p_uni_submit||"N",p_uni_id_name:ee.p_uni_id_name||"",address:ee.address,city:ee.city,contact_number:ee.contact_number,type_of_scan:ee.type_of_scan,appoint_date:ee.appoint_date,time:ee.time,time_in:ee.time_in,amount:ee.amount,total_amount:ee.total_amount,dis_amount:ee.dis_amount,rec_amount:ee.rec_amount,due_amount:ee.due_amount,admin_id:1,action:t};if((n=p&&x?await fetch("https://varahasdc.co.in/api/reception/patients/".concat(x),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}):await fetch("https://varahasdc.co.in/api/reception/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok){var a;let t=await n.json(),s=(null==(a=t.data)?void 0:a.cro)||(p?"Updated":"Registered");X(!0),W(t.data),e&&"function"==typeof e.success&&e.success("Patient ".concat(p?"updated":"registered"," successfully! CRO: ").concat(s))}else{let t=await n.json().catch(()=>({}));e&&"function"==typeof e.error&&e.error("Error: ".concat(t.error||(p?"Failed to update patient":"Failed to register patient")))}}catch(t){console.error("Error saving patient:",t),e&&"function"==typeof e.error&&e.error(p?"Error updating patient":"Error saving patient")}},eb=e=>{let t=["","one","two","three","four","five","six","seven","eight","nine"];return 0===e?"zero":e<10?t[e]:e<20?["ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"][e-10]:e<100?["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"][Math.floor(e/10)]+(e%10?" "+t[e%10]:""):e<1e3?t[Math.floor(e/100)]+" hundred"+(e%100?" "+eb(e%100):""):e<1e5?eb(Math.floor(e/1e3))+" thousand"+(e%1e3?" "+eb(e%1e3):""):e.toString()},ey=e=>{let t=new Date().toLocaleDateString("en-GB"),a=j.map(e=>e.s_name).join(", "),n=eb(parseInt(ee.rec_amount||ee.total_amount)).toUpperCase(),s="\n<!DOCTYPE html>\n<html>\n<head>\n<title>Receipt - ".concat(e.cro||"New Patient",'</title>\n<style>\n.admission_form { text-align: center; color: #000000; font-size: 10px; width: 100%; }\n.admission_form table { width: 98%; font-size: 10px; margin: -5px 8px; }\n.admission_form .form_input { padding: 2px 1%; font-size: 10px; border: none; font-weight: bold; font-style: italic; width: 99%; border-bottom: 1px dotted #000000; }\n.admission_form .form_input_box { border-bottom: 0px dotted #000000; padding: 0px 0px 2px 0px; width: 100%; display: inline-block; }\n@media print { .no_print, .no_print * { display: none !important; } .admission_div_desc { border: 0px !important; } .page_break { page-break-after: always; } }\n</style>\n</head>\n<body bgcolor="#FFFFFF" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" onload="window.print(); setTimeout(() => window.close(), 1000);">\n<div class="admission_form" align="center" style="border:solid thin; margin-top:18px;width:93.0%;margin-left:30px;">\n  <table align="center" style="margin-top:2px;">\n    <tr><td colspan="6"><b>Dr. S.N. MEDICAL COLLEGE AND ATTACHED GROUP OF HOSPITAL, JODHPUR</b></td></tr>\n    <tr><td colspan="6"><b>Rajasthan Medical Relief Society, M.D.M. Hospital, Jodhpur</b></td></tr>\n    <tr><td colspan="6"><b>IMAGING CENTRE UNDER P.P.P.MODE : VARAHA SDC</b></td></tr>\n    <tr><td colspan="6"><b>256 SLICE DUAL ENERGY CT SCAN, M.D.M HOSPITAL Jodhpur(Raj.) - 342003</b></td></tr>\n    <tr><td colspan="6"><b>Tel. : +91-291-2648120 , 0291-2648121 , 0291-2648122</b></td></tr>\n  </table>\n  \n  <table>\n    <tr>\n      <td width="55">Reg.No :</td>\n      <td width="200"><span class="form_input_box"><input type="text" class="form_input" value="').concat(e.cro||"","(").concat(e.patient_id||"",')"></span></td>\n      <td colspan="6"><span style="margin-left:30%; border: 1px solid #02C; border-radius: 11px;padding: 3px 15px;">Cash Receipt</span></td>\n      <td width="36">Date</td>\n      <td width="144"><span class="form_input_box"><input type="text" class="form_input" value="').concat(t,'"></span></td>\n    </tr>\n  </table>\n  \n  <table>\n    <tr>\n      <td width="56">Ref. By :</td>\n      <td width="482"><span class="form_input_box"><input type="text" class="form_input" value="').concat(P||"",'"></span></td>\n      <td width="174">Date and Time of Appointment :</td>\n      <td width="316"><span class="form_input_box"><input type="text" class="form_input" value="').concat(ee.appoint_date.split("-").reverse().join("-")," ").concat(H||"","-").concat(B||"",'"></span></td>\n    </tr>\n  </table>\n  \n  <table>\n    <tr>\n      <td width="78">Patient Name:</td>\n      <td width="650"><span class="form_input_box"><input type="text" class="form_input" value="').concat(ee.pre," ").concat(ee.firstname,'"></span></td>\n      <td width="33">Age :</td>\n      <td width="144"><span class="form_input_box"><input type="text" class="form_input" value="').concat(ee.age,'"></span></td>\n      <td width="36">Gender</td>\n      <td width="144"><span class="form_input_box"><input type="text" class="form_input" value="').concat(ee.gender,'"></span></td>\n    </tr>\n  </table>\n  \n  <table>\n    <tr>\n      <td width="40">Address</td>\n      <td width="687"><span class="form_input_box"><input type="text" class="form_input" value="').concat(ee.address||"",'"></span></td>\n      <td width="687"><span class="form_input_box"><label>Category</label><input type="text" class="form_input" value="').concat(ee.petient_type,'"></span></td>\n      <td width="33">Phone:</td>\n      <td width="333"><span class="form_input_box"><input type="text" class="form_input" value="').concat(ee.contact_number||"",'"></span></td>\n    </tr>\n  </table>\n  \n  <table>\n    <tr>\n      <td width="59">Investigations:</td>\n      <td width="1042"><span class="form_input_box"><input type="text" class="form_input" value="').concat(a,'"></span></td>\n    </tr>\n  </table>\n  \n  <table>\n    <tr>\n      <td width="129">For Sum Of Rupees:</td>\n      <td width="733"><span class="form_input_box"><input type="text" class="form_input" value="').concat(n,' RUPEES ONLY"></span></td>\n      <td width="147"><label>Scan Amount</label><input type="text" value="₹ ').concat(ee.total_amount,'" style="border:1px solid #5E60AE;"></td>\n      <td width="147"><label>Received Amount</label><input type="text" value="₹ ').concat(ee.rec_amount,'" style="border:1px solid #5E60AE;"></td>\n    </tr>\n  </table>\n  \n  <table>\n    <tr>\n      <td colspan="6" align="right" style="padding-top: 20px;">For Varaha SDC, Jodhpur</td>\n    </tr>\n    <tr>\n      <td colspan="6" align="right" style="padding-top: 30px;">Signature</td>\n    </tr>\n  </table>\n  \n  <table style="margin-top: 10px;">\n    <tr>\n      <td colspan="6" style="font-size: 8px; text-align: center;">This is a computer generated receipt</td>\n    </tr>\n  </table>\n</div>\n\n<div style="page-break-before: always;"></div>\n\n<div class="admission_form" align="center" style="border:solid thin; margin-top:18px;width:93.0%;margin-left:30px;">\n  <table align="center" style="margin-top:2px;">\n    <tr><td colspan="6"><b>Dr. S.N. MEDICAL COLLEGE AND ATTACHED GROUP OF HOSPITAL, JODHPUR</b></td></tr>\n    <tr><td colspan="6"><b>Rajasthan Medical Relief Society, M.D.M. Hospital, Jodhpur</b></td></tr>\n    <tr><td colspan="6"><b>IMAGING CENTRE UNDER P.P.P.MODE : VARAHA SDC</b></td></tr>\n    <tr><td colspan="6"><b>256 SLICE DUAL ENERGY CT SCAN, M.D.M HOSPITAL Jodhpur(Raj.) - 342003</b></td></tr>\n    <tr><td colspan="6"><b>Tel. : +91-291-2648120 , 0291-2648121 , 0291-2648122</b></td></tr>\n  </table>\n  \n  <table>\n    <tr>\n      <td width="55">Reg.No :</td>\n      <td width="200"><span class="form_input_box"><input type="text" class="form_input" value="').concat(e.cro||"","(").concat(e.patient_id||"",')"></span></td>\n      <td colspan="6"><span style="margin-left:30%; border: 1px solid #02C; border-radius: 11px;padding: 3px 15px;">Cash Receipt</span></td>\n      <td width="36">Date</td>\n      <td width="144"><span class="form_input_box"><input type="text" class="form_input" value="').concat(t,'"></span></td>\n    </tr>\n  </table>\n  \n  <table>\n    <tr>\n      <td width="56">Ref. By :</td>\n      <td width="482"><span class="form_input_box"><input type="text" class="form_input" value="').concat(P||"",'"></span></td>\n      <td width="174">Date and Time of Appointment :</td>\n      <td width="316"><span class="form_input_box"><input type="text" class="form_input" value="').concat(ee.appoint_date.split("-").reverse().join("-")," ").concat(H||"","-").concat(B||"",'"></span></td>\n    </tr>\n  </table>\n  \n  <table>\n    <tr>\n      <td width="78">Patient Name:</td>\n      <td width="650"><span class="form_input_box"><input type="text" class="form_input" value="').concat(ee.pre," ").concat(ee.firstname,'"></span></td>\n      <td width="33">Age :</td>\n      <td width="144"><span class="form_input_box"><input type="text" class="form_input" value="').concat(ee.age,'"></span></td>\n      <td width="36">Gender</td>\n      <td width="144"><span class="form_input_box"><input type="text" class="form_input" value="').concat(ee.gender,'"></span></td>\n    </tr>\n  </table>\n  \n  <table>\n    <tr>\n      <td width="40">Address</td>\n      <td width="687"><span class="form_input_box"><input type="text" class="form_input" value="').concat(ee.address||"",'"></span></td>\n      <td width="687"><span class="form_input_box"><label>Category</label><input type="text" class="form_input" value="').concat(ee.petient_type,'"></span></td>\n      <td width="33">Phone:</td>\n      <td width="333"><span class="form_input_box"><input type="text" class="form_input" value="').concat(ee.contact_number||"",'"></span></td>\n    </tr>\n  </table>\n  \n  <table>\n    <tr>\n      <td width="59">Investigations:</td>\n      <td width="1042"><span class="form_input_box"><input type="text" class="form_input" value="').concat(a,'"></span></td>\n    </tr>\n  </table>\n  \n  <table>\n    <tr>\n      <td width="129">For Sum Of Rupees:</td>\n      <td width="733"><span class="form_input_box"><input type="text" class="form_input" value="').concat(n,' RUPEES ONLY"></span></td>\n      <td width="147"><label>Scan Amount</label><input type="text" value="₹ ').concat(ee.total_amount,'" style="border:1px solid #5E60AE;"></td>\n      <td width="147"><label>Received Amount</label><input type="text" value="₹ ').concat(ee.rec_amount,'" style="border:1px solid #5E60AE;"></td>\n    </tr>\n  </table>\n  \n  <table>\n    <tr>\n      <td colspan="6" align="right" style="padding-top: 20px;">For Varaha SDC, Jodhpur</td>\n    </tr>\n    <tr>\n      <td colspan="6" align="right" style="padding-top: 30px;">Signature</td>\n    </tr>\n  </table>\n  \n  <table style="margin-top: 10px;">\n    <tr>\n      <td colspan="6" style="font-size: 8px; text-align: center;">This is a computer generated receipt</td>\n    </tr>\n  </table>\n</div>\n</body>\n</html>'),r=window.open("","_blank");r&&(r.document.write(s),r.document.close())};return(0,t.jsxs)("div",{className:"p-3 sm:p-6 space-y-4 sm:space-y-6 min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 text-white p-4 sm:p-6 rounded-xl shadow-2xl",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start space-y-4 sm:space-y-0",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl sm:text-3xl font-bold mb-2",children:p?"Edit Patient Registration":"New Patient Registration"}),(0,t.jsx)("p",{className:"text-sky-100 text-sm sm:text-lg",children:p?"Update patient information and scan details":"Complete patient enrollment and scan booking"})]}),z&&!p&&(0,t.jsxs)("div",{className:"bg-sky-600 bg-opacity-50 rounded-lg px-4 py-2 min-w-0 flex-shrink-0",children:[(0,t.jsx)("p",{className:"text-sky-200 text-xs mb-1",children:"Last Enrolled Patient"}),(0,t.jsxs)("p",{className:"text-white font-medium text-sm truncate",children:[z.cro," - ",z.patient_name]})]})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl border border-gray-100",children:[(0,t.jsx)("div",{className:"border-b border-gray-200",children:(0,t.jsxs)("nav",{className:"flex flex-col sm:flex-row",children:[(0,t.jsxs)("button",{className:"flex-1 py-3 sm:py-4 px-3 sm:px-6 text-center border-b-2 font-medium text-xs sm:text-sm ".concat(1===c?"border-sky-500 text-sky-600 bg-sky-50":"border-transparent text-gray-500 hover:text-gray-700"),onClick:()=>m(1),children:[(0,t.jsx)("span",{className:"sm:hidden",children:"1. Enrollment"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"1. Enrollment Detail"})]}),(0,t.jsxs)("button",{className:"flex-1 py-3 sm:py-4 px-3 sm:px-6 text-center border-b-2 font-medium text-xs sm:text-sm ".concat(2===c?"border-sky-500 text-sky-600 bg-sky-50":"border-transparent text-gray-500 hover:text-gray-700"),onClick:()=>m(2),children:[(0,t.jsx)("span",{className:"sm:hidden",children:"2. Scans"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"2. Scan Options"})]}),(0,t.jsxs)("button",{className:"flex-1 py-3 sm:py-4 px-3 sm:px-6 text-center border-b-2 font-medium text-xs sm:text-sm ".concat(3===c?"border-sky-500 text-sky-600 bg-sky-50":"border-transparent text-gray-500 hover:text-gray-700"),onClick:()=>m(3),children:[(0,t.jsx)("span",{className:"sm:hidden",children:"3. Payment"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"3. Payment Details"})]})]})}),(0,t.jsxs)("form",{className:"p-3 sm:p-6",children:[1===c&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,t.jsx)("input",{type:"text",name:"date",value:ee.date.split("-").reverse().join("-"),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50",readOnly:!0})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Hospital Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",value:E,onChange:e=>{A(e.target.value),I(!0)},onFocus:()=>I(!0),className:"w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 ".concat(q.hospital_name?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"),placeholder:"Search and select hospital",required:!0}),(0,t.jsx)(l.ChevronDown,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),R&&(0,t.jsxs)("div",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md mt-1 max-h-60 overflow-y-auto shadow-lg",children:[h.filter(e=>e.h_name.toLowerCase().includes(E.toLowerCase())).map(e=>(0,t.jsx)("div",{className:"px-3 py-2 hover:bg-blue-50 cursor-pointer",onClick:()=>{et(t=>({...t,hospital_name:e.h_id.toString()})),A(e.h_name),I(!1),q.hospital_name&&J(e=>({...e,hospital_name:""}))},children:e.h_name},e.h_id)),0===h.filter(e=>e.h_name.toLowerCase().includes(E.toLowerCase())).length&&(0,t.jsx)("div",{className:"px-3 py-2 text-gray-500",children:"No hospitals found"})]}),q.hospital_name&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:q.hospital_name})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Doctor Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",value:P,onChange:e=>{k(e.target.value),T(!0)},onFocus:()=>T(!0),className:"w-full px-3 py-2 pr-10 border rounded-md focus:outline-none focus:ring-2 ".concat(q.doctor_name?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"),placeholder:"Search and select doctor",required:!0}),(0,t.jsx)(l.ChevronDown,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),M&&(0,t.jsxs)("div",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md mt-1 max-h-60 overflow-y-auto shadow-lg",children:[y.filter(e=>e.dname.toLowerCase().includes(P.toLowerCase())).map(e=>(0,t.jsx)("div",{className:"px-3 py-2 hover:bg-blue-50 cursor-pointer",onClick:()=>{et(t=>({...t,doctor_name:e.d_id.toString()})),k(e.dname),T(!1),q.doctor_name&&J(e=>({...e,doctor_name:""}))},children:e.dname},e.d_id)),0===y.filter(e=>e.dname.toLowerCase().includes(P.toLowerCase())).length&&(0,t.jsx)("div",{className:"px-3 py-2 text-gray-500",children:"No doctors found"})]}),q.doctor_name&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:q.doctor_name})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Patient Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{name:"pre",value:ee.pre,onChange:em,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"Mr.",children:"Mr."}),(0,t.jsx)("option",{value:"Mrs.",children:"Mrs."}),(0,t.jsx)("option",{value:"Master",children:"Master"}),(0,t.jsx)("option",{value:"Miss",children:"Miss"}),(0,t.jsx)("option",{value:"Baby",children:"Baby"})]})]}),(0,t.jsxs)("div",{className:"md:col-span-3",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),(0,t.jsx)("input",{type:"text",name:"firstname",value:ee.firstname,onChange:em,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ".concat(q.firstname?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"),placeholder:"Please enter your First name",required:!0}),q.firstname&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:q.firstname})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Age ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"age",value:ee.age,onChange:e=>{let t=e.target.value;/^\d*$/.test(t)&&(""===t||parseInt(t)>=0&&100>=parseInt(t))&&em(e)},onKeyPress:e=>{/[0-9]/.test(e.key)||"Backspace"===e.key||"Delete"===e.key||e.preventDefault()},className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ".concat(q.age?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"),placeholder:"Age (0-100)",maxLength:3}),q.age&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:q.age})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"In (Year/Month/Days)"}),(0,t.jsxs)("select",{name:"age_type",value:ee.age_type,onChange:em,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"Year",children:"Year"}),(0,t.jsx)("option",{value:"Month",children:"Month"}),(0,t.jsx)("option",{value:"Days",children:"Days"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),(0,t.jsxs)("select",{name:"gender",value:ee.gender,onChange:em,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"Male",children:"Male"}),(0,t.jsx)("option",{value:"Female",children:"Female"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,t.jsxs)("select",{name:"petient_type",value:ee.petient_type,onChange:e=>{let{name:t,value:a}=e.target;et(e=>({...e,[t]:a})),S(["IPD FREE","OPD FREE","RTA","RGHS","Chiranjeevi","Destitute","PRISONER","Sn. CITIZEN","Aayushmaan"].includes(a));let n=j.reduce((e,t)=>e+t.charges,0);"GEN / Paid"===a?et(e=>({...e,total_amount:n.toString(),amount:n.toString(),rec_amount:n.toString(),due_amount:"0"})):et(e=>({...e,total_amount:n.toString(),amount:n.toString(),rec_amount:"0",due_amount:"0"}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"GEN / Paid",children:"GEN / Paid"}),(0,t.jsx)("option",{value:"IPD FREE",children:"IPD Free"}),(0,t.jsx)("option",{value:"OPD FREE",children:"OPD Free"}),(0,t.jsx)("option",{value:"RTA",children:"RTA"}),(0,t.jsx)("option",{value:"RGHS",children:"RGHS"}),(0,t.jsx)("option",{value:"Chiranjeevi",children:"Chiranjeevi"}),(0,t.jsx)("option",{value:"Destitute",children:"Destitute"}),(0,t.jsx)("option",{value:"PRISONER",children:"PRISONER"}),(0,t.jsx)("option",{value:"Sn. CITIZEN",children:"Sn. CITIZEN"}),(0,t.jsx)("option",{value:"Aayushmaan",children:"Aayushmaan"})]})]})]}),w&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID"}),(0,t.jsx)("input",{type:"text",name:"p_uni_submit",value:ee.p_uni_submit,onChange:em,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Y / N"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name Of ID"}),(0,t.jsx)("input",{type:"text",name:"p_uni_id_name",value:ee.p_uni_id_name,onChange:em,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"ID Name"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Upload ID"}),(0,t.jsx)("input",{type:"file",name:"p_uni_id_scan",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,t.jsx)("input",{type:"text",name:"address",value:ee.address,onChange:em,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Please enter your Address"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),(0,t.jsx)("input",{type:"text",name:"city",value:ee.city,onChange:em,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Please enter your city"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Number"}),(0,t.jsx)("input",{type:"text",name:"contact_number",value:ee.contact_number,onChange:e=>{let t=e.target.value;/^\d*$/.test(t)&&t.length<=10&&em(e)},onKeyPress:e=>{/[0-9]/.test(e.key)||"Backspace"===e.key||"Delete"===e.key||e.preventDefault()},className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 ".concat(q.contact_number?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"),placeholder:"10-digit mobile number",maxLength:10}),q.contact_number&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:q.contact_number})]})]})]}),2===c&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Scan Type ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("input",{type:"text",placeholder:"Search scans...",value:C,onChange:e=>D(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mb-3"})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-60 overflow-y-auto border border-gray-200 rounded-md p-4",children:[_.filter(e=>e.s_name.toLowerCase().includes(C.toLowerCase())).map(e=>(0,t.jsxs)("label",{className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:ee.type_of_scan.includes(e.s_id.toString()),onChange:t=>((e,t)=>{let a=[...ee.type_of_scan];t?a.push(e):a=a.filter(t=>t!==e),et(e=>({...e,type_of_scan:a}));let n=_.filter(e=>a.includes(e.s_id.toString()));N(n);let s=n.reduce((e,t)=>e+t.charges,0),r=n.reduce((e,t)=>{var a;let n=null==(a=t.estimate_time)?void 0:a.match(/(\d+)/);return e+(n?parseInt(n[1]):0)},0);if(et(e=>"GEN / Paid"===e.petient_type?{...e,amount:s.toString(),est_time:r.toString(),total_amount:s.toString(),rec_amount:s.toString(),due_amount:"0"}:{...e,amount:s.toString(),est_time:r.toString(),total_amount:s.toString(),rec_amount:"0",due_amount:"0"}),!ee.time&&Z.length>0){let e=new Date;new Date(ee.appoint_date).toDateString()===e.toDateString()&&setTimeout(()=>(()=>{let e=new Date,t=60*e.getHours()+e.getMinutes(),a=Z.find(e=>{let a=e.time_slot.match(/(\d{1,2}):(\d{2})\s*(AM|PM)/i);if(!a)return!1;let n=parseInt(a[1]),s=parseInt(a[2]),r=a[3].toUpperCase();return"PM"===r&&12!==n?n+=12:"AM"===r&&12===n&&(n=0),60*n+s>=t});a&&(et(e=>({...e,time:a.time_id.toString()})),U(a.time_slot))})(),100)}})(e.s_id.toString(),t.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:e.s_name}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["₹",e.charges," • ",e.estimate_time," min"]})]})]},e.s_id)),0===_.filter(e=>e.s_name.toLowerCase().includes(C.toLowerCase())).length&&(0,t.jsx)("div",{className:"col-span-full text-center text-gray-500 py-4",children:"No scans found"})]}),q.type_of_scan&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:q.type_of_scan})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Appoint Date"}),(0,t.jsx)("input",{type:"date",name:"appoint_date",value:ee.appoint_date,onChange:e=>{let{name:t,value:a}=e.target;et(e=>({...e,[t]:a})),et(e=>({...e,time:"",time_in:""})),U(""),Y("");let n=new Date(a),s=new Date;if(n.toDateString()===s.toDateString()){let e=ex(),t=ep(e);et(t=>({...t,time:e})),U(t);let a=parseInt(ee.est_time)||0;a>0&&eu(e,a)}},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Time In ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:H,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50",readOnly:!0}),q.time&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:q.time})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Time Out ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:B,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50",readOnly:!0}),q.time_in&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:q.time_in})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),(0,t.jsx)("input",{type:"text",name:"amount",value:ee.amount,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50",readOnly:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Time"}),(0,t.jsx)("input",{type:"text",name:"est_time",value:ee.est_time,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50",readOnly:!0})]})]}),j.length>0&&(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Selected Scans"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gray-50",children:[(0,t.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"S.No"}),(0,t.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Name Of Scan"}),(0,t.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Charges"})]})}),(0,t.jsx)("tbody",{children:j.map((e,a)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:a+1}),(0,t.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.s_name}),(0,t.jsxs)("td",{className:"border border-gray-300 px-4 py-2",children:["₹",e.charges]})]},e.s_id))})]})})]})]}),3===c&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-4 py-3 border-b border-gray-200",children:(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,t.jsx)(n.User,{className:"h-5 w-5 mr-2 text-blue-600"}),"Patient Summary"]})}),(0,t.jsx)("div",{className:"p-4",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Patient Name"}),(0,t.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:[ee.pre," ",ee.firstname]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Age & Gender"}),(0,t.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:[ee.age," ",ee.age_type,", ",ee.gender]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Category"}),(0,t.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:ee.petient_type})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Appointment Date"}),(0,t.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:ee.appoint_date.split("-").reverse().join("-")})]})]}),(ee.contact_number||ee.address)&&(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[ee.contact_number&&(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Contact Number"}),(0,t.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:ee.contact_number})]}),ee.address&&(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Address"}),(0,t.jsx)("div",{className:"text-sm font-semibold text-gray-900",children:ee.address})]})]}),ee.time&&ee.time_in&&(0,t.jsxs)("div",{className:"bg-blue-50 p-3 rounded-md border border-blue-200",children:[(0,t.jsx)("div",{className:"text-xs text-blue-600 uppercase tracking-wide mb-1",children:"Time Slot"}),(0,t.jsxs)("div",{className:"text-sm font-semibold text-blue-900",children:[ep(ee.time)," - ",ep(ee.time_in),(0,t.jsxs)("span",{className:"ml-2 text-xs text-blue-600",children:["(",ee.est_time," min estimated)"]})]})]})]})})]}),(0,t.jsxs)("div",{className:"bg-white border border-gray-300 rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"bg-gray-100 px-4 py-3 border-b border-gray-300",children:(0,t.jsx)("h4",{className:"font-semibold text-gray-800",children:"Payment Details"})}),(0,t.jsxs)("div",{className:"p-4 space-y-4",children:[j.length>0&&(0,t.jsxs)("div",{className:"border border-gray-200 rounded",children:[(0,t.jsx)("div",{className:"bg-gray-50 px-3 py-2 border-b border-gray-200",children:(0,t.jsx)("span",{className:"font-medium text-sm",children:"Selected Scans"})}),j.map((e,a)=>(0,t.jsxs)("div",{className:"px-3 py-2 border-b border-gray-100 last:border-b-0 flex justify-between",children:[(0,t.jsxs)("span",{className:"text-sm",children:[a+1,". ",e.s_name]}),(0,t.jsxs)("span",{className:"text-sm font-medium",children:["₹",e.charges]})]},e.s_id))]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Amount"}),(0,t.jsx)("input",{type:"text",name:"total_amount",value:"₹".concat(ee.total_amount),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 font-semibold",readOnly:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Received Amount"}),(0,t.jsx)("input",{type:"number",name:"rec_amount",value:ee.rec_amount,max:ee.total_amount,onChange:e=>{let t=parseFloat(ee.total_amount)||0,a=parseFloat(e.target.value)||0;if("GEN / Paid"===ee.petient_type&&a>t)return;let n=t-a-(parseFloat(ee.dis_amount)||0);et(t=>({...t,rec_amount:e.target.value,due_amount:n.toString()}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 ".concat("GEN / Paid"!==ee.petient_type?"bg-gray-50":""),placeholder:"0",readOnly:"GEN / Paid"!==ee.petient_type})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount"}),(0,t.jsx)("input",{type:"number",name:"dis_amount",value:ee.dis_amount,onChange:e=>{let t=parseFloat(ee.total_amount)||0,a=t-(parseFloat(ee.rec_amount)||0)-(parseFloat(e.target.value)||0);et(t=>({...t,dis_amount:e.target.value,due_amount:a.toString()}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500",placeholder:"0"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Amount"}),(0,t.jsx)("input",{type:"text",name:"due_amount",value:"₹".concat(ee.due_amount),className:"w-full px-3 py-2 border border-gray-300 rounded-md font-semibold ".concat(parseFloat(ee.due_amount)>0?"bg-red-50 text-red-700":"bg-green-50 text-green-700"),readOnly:!0})]})]}),(0,t.jsx)("div",{className:"text-center p-3 rounded-md ".concat(eg()?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:(0,t.jsx)("span",{className:"font-semibold ".concat(eg()?"text-green-700":"text-red-700"),children:eg()?"Ready to print":"Payment Required - Complete payment to enable printing"})})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between pt-6 border-t border-gray-200",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>{c>1&&m(c-1)},disabled:1===c,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)(r.ArrowLeft,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Previous"})]}),(0,t.jsx)("div",{className:"flex space-x-2",children:c<3?(0,t.jsxs)("button",{type:"button",onClick:()=>{(t=>{let a={};return 1===t&&(ee.hospital_name||(a.hospital_name="Hospital Name is required",e.error("Please select Hospital Name")),ee.doctor_name||(a.doctor_name="Doctor Name is required",e.error("Please select Doctor Name")),ee.firstname.trim()||(a.firstname="Patient Name is required",e.error("Please enter Patient Name")),ee.age.trim()||(a.age="Age is required",e.error("Please enter Age")),ee.contact_number&&!/^[0-9]{10}$/.test(ee.contact_number)&&(a.contact_number="Contact Number must be 10 digits",e.error("Contact Number must be 10 digits"))),2===t&&(0===ee.type_of_scan.length&&(a.type_of_scan="At least one scan type is required",e.error("Please select at least one scan type")),ee.time||(a.time="Time In is required",e.error("Please select Time In")),ee.time_in||(a.time_in="Time Out is required",e.error("Please select Time Out"))),J(a),0===Object.keys(a).length})(c)&&c<3&&m(c+1)},className:"flex items-center space-x-2 px-4 py-2 bg-sky-600 text-white rounded-md hover:bg-sky-700",children:[(0,t.jsx)("span",{children:"Next"}),(0,t.jsx)(i.ArrowRight,{className:"h-4 w-4"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{type:"button",onClick:()=>eh("Save"),disabled:$,className:"flex items-center space-x-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium shadow-lg transition-all duration-200",children:[(0,t.jsx)(o.Check,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:$?"SAVED":"SAVE"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>eh("Print"),disabled:!$,className:"flex items-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium shadow-lg transition-all duration-200",title:$?"Print Receipt":"Save patient first to enable printing",children:[(0,t.jsx)(s.FileText,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"PRINT"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>{window.confirm("Are you sure you want to exit? Any unsaved changes will be lost.")&&(e&&"function"==typeof e.info&&e.info("Exiting patient registration"),window.location.href="/reception/patient-registration")},className:"flex items-center space-x-2 px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium shadow-lg transition-all duration-200",children:[(0,t.jsx)(r.ArrowLeft,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"EXIT"})]})]})})]})]})]})]})}}]);