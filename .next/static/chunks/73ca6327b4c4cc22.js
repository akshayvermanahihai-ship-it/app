(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,44607,e=>{"use strict";e.s(["default",()=>i],44607);var t=e.i(43476),s=e.i(71645),a=e.i(75558);let r=(0,e.i(75254).default)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);function i(){var e,i,l,d;let[n,c]=(0,s.useState)([]),[o,m]=(0,s.useState)(!0),[u,h]=(0,s.useState)(null),[x,y]=(0,s.useState)(0);(0,s.useEffect)(()=>{b()},[]);let b=async()=>{try{let e=await fetch("https://varahasdc.co.in/api/inventory/items"),t=await e.json();t.success&&c(t.data.filter(e=>e.quantity>0))}catch(e){console.error("Error fetching items:",e)}finally{m(!1)}},g=async()=>{if(!u||x<=0)return;let e=n.find(e=>e.id===u);if(!e||x>e.quantity)return void alert("Insufficient stock available");try{(await fetch("https://varahasdc.co.in/api/inventory/items/".concat(u),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({item_name:e.item_name,quantity:e.quantity-x,opening_stock:e.opening_stock,inward_qty:e.inward_qty||0,outward_qty:(e.outward_qty||0)+x})})).ok&&(h(null),y(0),b(),alert("Outward stock updated successfully"))}catch(e){console.error("Error updating outward stock:",e)}};return o?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600"})}):(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-pink-600 text-white p-6 rounded-xl shadow-lg mb-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(a.ArrowUp,{className:"h-8 w-8 mr-3"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Outward Stock"}),(0,t.jsx)("p",{className:"text-red-100",children:"Issue stock from inventory"})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,t.jsx)("div",{className:"p-4 bg-gray-50 border-b",children:(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Select Item (Available Stock Only)"})}),(0,t.jsxs)("div",{className:"max-h-96 overflow-y-auto",children:[n.map(e=>(0,t.jsx)("div",{onClick:()=>h(e.id),className:"p-4 border-b cursor-pointer hover:bg-gray-50 ".concat(u===e.id?"bg-red-50 border-red-200":""),children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium",children:e.item_name}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Available: ",e.quantity]})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Outward: ",e.outward_qty||0]})})]})},e.id)),0===n.length&&(0,t.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No items with available stock"})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Issue Outward Stock"}),u?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selected Item"}),(0,t.jsx)("input",{type:"text",value:(null==(e=n.find(e=>e.id===u))?void 0:e.item_name)||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Stock"}),(0,t.jsx)("input",{type:"number",value:(null==(i=n.find(e=>e.id===u))?void 0:i.quantity)||0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Outward Quantity"}),(0,t.jsx)("input",{type:"number",value:x,onChange:e=>y(parseInt(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500",min:"1",max:(null==(l=n.find(e=>e.id===u))?void 0:l.quantity)||0})]}),(0,t.jsxs)("button",{onClick:g,disabled:x<=0||x>((null==(d=n.find(e=>e.id===u))?void 0:d.quantity)||0),className:"w-full flex items-center justify-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:[(0,t.jsx)(r,{className:"h-5 w-5 mr-2"}),"Issue Outward Stock"]})]}):(0,t.jsx)("p",{className:"text-gray-500 text-center py-8",children:"Select an item to issue outward stock"})]})]})]})}}]);