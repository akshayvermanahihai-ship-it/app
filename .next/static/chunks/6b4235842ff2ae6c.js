(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return l}});let l=e=>{}},85665,e=>{"use strict";e.s(["default",()=>s]);var t=e.i(43476),r=e.i(71645),l=e.i(18566),o=e.i(40127),a=e.i(3374);function s(e){let{children:s}=e,n=(0,l.useRouter)(),[i,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(!0),[b,x]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{let e=localStorage.getItem("user");if(!e)return void n.push("/login");try{let t=JSON.parse(e);console.log("Layout - User data:",t),console.log("Layout - User role:",t.role||t.admin_type),c(t)}catch(e){console.error("Layout - Error parsing user data:",e),n.push("/login")}finally{u(!1)}},[n]),(0,r.useEffect)(()=>{let e=()=>{window.innerWidth>=1024&&x(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),d)?(0,t.jsx)("div",{className:"flex h-screen items-center justify-center bg-gradient-to-br from-indigo-50 to-cyan-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"relative mb-8",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full blur opacity-75"}),(0,t.jsx)("div",{className:"relative w-32 h-32 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center mx-auto",children:(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-white border-t-transparent rounded-full animate-spin"})})]}),(0,t.jsx)("p",{className:"text-gray-600 text-lg font-medium",children:"Loading..."})]})}):i?(0,t.jsxs)("div",{className:"flex h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[b&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25 z-30 lg:hidden",onClick:()=>x(!1)}),(0,t.jsx)("div",{className:"\n        fixed lg:static inset-y-0 left-0 z-40 lg:z-auto\n        transform ".concat(b?"translate-x-0":"-translate-x-full"," lg:translate-x-0\n        transition-transform duration-300 ease-in-out lg:transition-none\n      "),children:(0,t.jsx)(o.default,{userRole:i.role||i.admin_type,onClose:()=>x(!1)})}),(0,t.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden lg:ml-0",children:[(0,t.jsx)(a.default,{user:i,onMenuClick:()=>x(!0)}),(0,t.jsx)("main",{className:"flex-1 overflow-y-auto p-2 sm:p-4 lg:p-6",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto w-full",children:s})})]})]}):null}},67726,e=>{"use strict";e.s(["default",()=>s]);var t=e.i(43476),r=e.i(85665),l=e.i(71645),o=e.i(84614),a=e.i(18566);function s(){(0,a.useParams)().role;let[e,s]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),[c,d]=(0,l.useState)(null),[u,b]=(0,l.useState)({pre:"Mr.",patient_name:"",hospital_id:"",doctor_name:"",age:"",gender:"Male",category:"General",p_uni_id_submit:"",p_uni_id_name:"",contact_number:"",address:"",city:"",scan_type:"",total_scan:1,amount:0,discount:0,amount_reci:0,amount_due:0,allot_date:"",allot_time:"",scan_date:"",admin_id:1});(0,l.useEffect)(()=>{x(),m()},[]);let x=async()=>{try{let e=await fetch("/api/hospitals"),t=await e.json();s(t)}catch(e){console.error("Error fetching hospitals:",e)}},m=async()=>{try{let e=await fetch("/api/doctors"),t=await e.json();i(t)}catch(e){console.error("Error fetching doctors:",e)}},g=(e,t)=>{d({message:e,type:t}),setTimeout(()=>d(null),3e3)},f=async e=>{e.preventDefault();try{let e=await fetch("/api/patients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}),t=await e.json();t.success?(g("Patient registered successfully! CRO: ".concat(t.cro),"success"),b({pre:"Mr.",patient_name:"",hospital_id:"",doctor_name:"",age:"",gender:"Male",category:"General",p_uni_id_submit:"",p_uni_id_name:"",contact_number:"",address:"",city:"",scan_type:"",total_scan:1,amount:0,discount:0,amount_reci:0,amount_due:0,allot_date:"",allot_time:"",scan_date:"",admin_id:1})):g("Failed to register patient","error")}catch(e){g("Error registering patient","error")}};return(0,t.jsx)(r.default,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)("h1",{className:"text-2xl font-bold text-black",children:"Patient Registration"})}),(0,t.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:(0,t.jsxs)("form",{onSubmit:f,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-black mb-1",children:"Prefix"}),(0,t.jsxs)("select",{value:u.pre,onChange:e=>b({...u,pre:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-rose-500 text-black font-bold",children:[(0,t.jsx)("option",{value:"Mr.",children:"Mr."}),(0,t.jsx)("option",{value:"Mrs.",children:"Mrs."}),(0,t.jsx)("option",{value:"Ms.",children:"Ms."}),(0,t.jsx)("option",{value:"Dr.",children:"Dr."})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-black mb-1",children:"Patient Name"}),(0,t.jsx)("input",{type:"text",value:u.patient_name,onChange:e=>b({...u,patient_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-rose-500 text-black font-bold",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-black mb-1",children:"Hospital"}),(0,t.jsxs)("select",{value:u.hospital_id,onChange:e=>b({...u,hospital_id:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-rose-500 text-black font-bold",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Select Hospital"}),e.map(e=>(0,t.jsxs)("option",{value:e.h_id,children:[e.h_name," (",e.h_short,")"]},e.h_id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-black mb-1",children:"Doctor"}),(0,t.jsxs)("select",{value:u.doctor_name,onChange:e=>b({...u,doctor_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-rose-500 text-black font-bold",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Select Doctor"}),n.map(e=>(0,t.jsx)("option",{value:e.d_id,children:e.dname},e.d_id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-black mb-1",children:"Age"}),(0,t.jsx)("input",{type:"text",value:u.age,onChange:e=>b({...u,age:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-rose-500 text-black font-bold",placeholder:"e.g., 25Y or 6M",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-black mb-1",children:"Gender"}),(0,t.jsxs)("select",{value:u.gender,onChange:e=>b({...u,gender:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-rose-500 text-black font-bold",children:[(0,t.jsx)("option",{value:"Male",children:"Male"}),(0,t.jsx)("option",{value:"Female",children:"Female"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-black mb-1",children:"Category"}),(0,t.jsxs)("select",{value:u.category,onChange:e=>b({...u,category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-rose-500 text-black font-bold",children:[(0,t.jsx)("option",{value:"General",children:"General"}),(0,t.jsx)("option",{value:"Chiranjeevi",children:"Chiranjeevi"}),(0,t.jsx)("option",{value:"RGHS",children:"RGHS"}),(0,t.jsx)("option",{value:"RTA",children:"RTA"}),(0,t.jsx)("option",{value:"OPD FREE",children:"OPD FREE"}),(0,t.jsx)("option",{value:"IPD FREE",children:"IPD FREE"}),(0,t.jsx)("option",{value:"BPL/POOR",children:"BPL/POOR"}),(0,t.jsx)("option",{value:"Sn. CITIZEN",children:"Sn. CITIZEN"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-black mb-1",children:"Contact Number"}),(0,t.jsx)("input",{type:"tel",value:u.contact_number,onChange:e=>b({...u,contact_number:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-rose-500 text-black font-bold",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-black mb-1",children:"Address"}),(0,t.jsx)("input",{type:"text",value:u.address,onChange:e=>b({...u,address:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-rose-500 text-black font-bold"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-black mb-1",children:"City"}),(0,t.jsx)("input",{type:"text",value:u.city,onChange:e=>b({...u,city:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-rose-500 text-black font-bold"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-black mb-1",children:"Scan Type"}),(0,t.jsx)("input",{type:"text",value:u.scan_type,onChange:e=>b({...u,scan_type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-rose-500 text-black font-bold",placeholder:"CT Scan, MRI, etc."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-black mb-1",children:"Amount"}),(0,t.jsx)("input",{type:"number",value:u.amount,onChange:e=>{let t=parseFloat(e.target.value)||0,r=t-u.amount_reci;b({...u,amount:t,amount_due:r})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-rose-500 text-black font-bold"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-black mb-1",children:"Received Amount"}),(0,t.jsx)("input",{type:"number",value:u.amount_reci,onChange:e=>{let t=parseFloat(e.target.value)||0,r=u.amount-t;b({...u,amount_reci:t,amount_due:r})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-rose-500 text-black font-bold"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-black mb-1",children:"Due Amount"}),(0,t.jsx)("input",{type:"number",value:u.amount_due,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 text-black font-bold"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-black mb-1",children:"Appointment Date"}),(0,t.jsx)("input",{type:"date",value:u.allot_date,onChange:e=>b({...u,allot_date:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-rose-500 text-black font-bold"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-black mb-1",children:"Appointment Time"}),(0,t.jsx)("input",{type:"time",value:u.allot_time,onChange:e=>b({...u,allot_time:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-rose-500 focus:border-rose-500 text-black font-bold"})]}),(0,t.jsxs)("div",{className:"md:col-span-2 lg:col-span-3 flex justify-end space-x-3 mt-6",children:[(0,t.jsx)("button",{type:"button",onClick:()=>window.history.back(),className:"px-6 py-2 border border-gray-300 text-black font-bold rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,t.jsxs)("button",{type:"submit",className:"px-6 py-2 bg-rose-600 text-white font-bold rounded-lg hover:bg-rose-700 transition-colors",children:[(0,t.jsx)(o.User,{className:"h-4 w-4 mr-2 inline"}),"Register Patient"]})]})]})}),c&&(0,t.jsx)("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 px-8 py-4 rounded-lg shadow-xl z-[60] font-bold text-lg ".concat("success"===c.type?"bg-green-500 text-white":"bg-red-500 text-white"),children:c.message})]})})}}]);