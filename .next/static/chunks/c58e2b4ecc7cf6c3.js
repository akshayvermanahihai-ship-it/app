(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33651,e=>{"use strict";e.s(["Download",()=>t],33651);let t=(0,e.i(75254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},16715,e=>{"use strict";e.s(["RefreshCw",()=>t],16715);let t=(0,e.i(75254).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},16663,e=>{"use strict";e.s(["default",()=>i]);var t=e.i(43476),a=e.i(71645),r=e.i(55436),s=e.i(33651),n=e.i(16715),l=e.i(70016),c=e.i(8776);function i(){let e=(0,c.useToastContext)(),[i,d]=(0,a.useState)([]),[o,x]=(0,a.useState)(!0),[p,m]=(0,a.useState)(""),[h,g]=(0,a.useState)(""),[y,u]=(0,a.useState)(""),[f,b]=(0,a.useState)(1),[j,N]=(0,a.useState)(1),[w,_]=(0,a.useState)(0),[v,C]=(0,a.useState)(!1);(0,a.useEffect)(()=>{k()},[f]);let k=async()=>{x(!0);try{let t=new URLSearchParams({page:f.toString(),limit:"10"});h&&t.append("from_date",h),y&&t.append("to_date",y),p&&t.append("search",p);let a=await fetch("/api/doctor/completed-reports?".concat(t));if(a.ok){let e=await a.json();d(e.data||[]),_(e.total||0),N(Math.ceil((e.total||0)/10))}else{let t=await a.json().catch(()=>({}));e.error(t.error||"Failed to fetch completed reports")}}catch(t){console.error("Error fetching completed reports:",t),e.error("Error loading data")}finally{x(!1)}},R=e=>{if(!e||"0000-00-00"===e)return"-";try{let t=new Date(e);if(isNaN(t.getTime()))return"-";return t.toLocaleDateString("en-GB")}catch(e){return"-"}},S=async()=>{C(!0);try{let e=new URLSearchParams({page:"1",limit:"10000"});h&&e.append("from_date",h),y&&e.append("to_date",y),p&&e.append("search",p);let t=await fetch("/api/doctor/completed-reports?".concat(e)),a=(await t.json()).data||[],r=l.utils.book_new(),s=[["VARAHA DIAGNOSTIC CENTER"],["COMPLETED REPORTS - "+new Date().toLocaleDateString()],[""],["S.No","CRO","Patient Name","Doctor Name","CT-Scan","CT Report Date","CT Review","X-Ray","X-Ray Date","X-Ray Review"]],n=a.map((e,t)=>[t+1,e.cro,e.patient_name,e.doctor_name||"-",e.n_patient_ct,R(e.n_patient_ct_report_date),e.n_patient_ct_remark||"-",e.n_patient_x_ray,R(e.n_patient_x_ray_report_date),e.n_patient_x_ray_remark||"-"]),c=l.utils.aoa_to_sheet([...s,...n]);c["!merges"]=[{s:{r:0,c:0},e:{r:0,c:9}},{s:{r:1,c:0},e:{r:1,c:9}}],c["!cols"]=Array(10).fill({width:15}),l.utils.book_append_sheet(r,c,"Completed Reports"),l.writeFile(r,"completed_reports_".concat(new Date().toISOString().split("T")[0],".xlsx"))}catch(t){console.error("Export error:",t),e.error("Export failed")}finally{C(!1)}},T=(f-1)*10;return(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white p-6 rounded-xl shadow-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"View Report"}),(0,t.jsx)("p",{className:"text-emerald-100",children:"Completed nursing reports with CT-Scan and X-Ray"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)("button",{onClick:S,disabled:v||0===w,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg transition-colors disabled:opacity-50",children:[(0,t.jsx)(s.Download,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:v?"Exporting...":"Export Excel"})]}),(0,t.jsxs)("button",{onClick:k,disabled:o,className:"flex items-center space-x-2 px-4 py-2 bg-emerald-500 hover:bg-emerald-400 rounded-lg transition-colors disabled:opacity-50",children:[(0,t.jsx)(n.RefreshCw,{className:"h-5 w-5 ".concat(o?"animate-spin":"")}),(0,t.jsx)("span",{children:"Refresh"})]})]})]})}),(0,t.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),b(1),k()},className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(r.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,t.jsx)("input",{type:"text",placeholder:"Search by CRO or Patient Name...",value:p,onChange:e=>m(e.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),(0,t.jsx)("input",{type:"date",value:h,onChange:e=>g(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"}),(0,t.jsx)("input",{type:"date",value:y,onChange:e=>u(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"}),(0,t.jsx)("button",{type:"submit",className:"px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Search"})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Completed Reports"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Page ",f," of ",j]})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sr. No."}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CRO"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient Name"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Doctor Name"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CT-Scan"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CT Report Date"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CT Review"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"X-Ray"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"X-Ray Date"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"X-Ray Review"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:10,className:"px-6 py-12 text-center",children:(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,t.jsx)(n.RefreshCw,{className:"h-5 w-5 animate-spin text-emerald-500"}),(0,t.jsx)("span",{className:"text-gray-500",children:"Loading completed reports..."})]})})}):0===i.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:10,className:"px-6 py-12 text-center text-gray-500",children:"No completed reports found"})}):i.map((e,a)=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T+a+1}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm font-medium text-blue-600",children:e.cro})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.patient_name})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.doctor_name||"-"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:e.n_patient_ct})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R(e.n_patient_ct_report_date)}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-xs truncate",children:e.n_patient_ct_remark||"-"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:e.n_patient_x_ray})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R(e.n_patient_x_ray_report_date)}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-xs truncate",children:e.n_patient_x_ray_remark||"-"})]},e.patient_id))})]})}),(0,t.jsx)("div",{className:"px-6 py-4 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-700",children:["Page ",f," of ",j," | Total: ",w," records"]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[f>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>b(1),className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"First"}),(0,t.jsx)("button",{onClick:()=>b(f-1),className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Previous"})]}),(0,t.jsx)("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,j)},(e,a)=>{let r=Math.max(1,f-2)+a;return r>j?null:(0,t.jsx)("button",{onClick:()=>b(r),className:"px-3 py-2 text-sm font-medium rounded-lg ".concat(f===r?"bg-emerald-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"),children:r},r)})}),f<j&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>b(f+1),className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Next"}),(0,t.jsx)("button",{onClick:()=>b(j),className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Last"})]})]})]})})]})]})}}]);