(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33651,e=>{"use strict";e.s(["Download",()=>t],33651);let t=(0,e.i(75254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},16715,e=>{"use strict";e.s(["RefreshCw",()=>t],16715);let t=(0,e.i(75254).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},79676,e=>{"use strict";e.s(["default",()=>c]);var t=e.i(43476),s=e.i(71645),a=e.i(33651),r=e.i(16715),n=e.i(8776);function c(){let e=(0,n.useToastContext)(),[c,l]=(0,s.useState)([]),[d,i]=(0,s.useState)(!1),[o,x]=(0,s.useState)(new Date().toLocaleDateString("en-CA",{timeZone:"Asia/Calcutta"})),[m,p]=(0,s.useState)(new Date().toLocaleDateString("en-CA",{timeZone:"Asia/Calcutta"})),[h,g]=(0,s.useState)(!1),[y,u]=(0,s.useState)(1),[f,b]=(0,s.useState)(0);(0,s.useEffect)(()=>{u(1)},[o,m]),(0,s.useEffect)(()=>{w()},[]);let w=async()=>{if(o&&m?!(new Date(o)>new Date(m))||(e.error("From date cannot be later than to date"),!1):(e.error("Please select both from and to dates"),!1)){i(!0);try{let t=new URLSearchParams({fromDate:o.split("-").reverse().join("-"),toDate:m.split("-").reverse().join("-")}),s=await fetch("https://varahasdc.co.in/api/console/detail-report?".concat(t));if(s.ok){let t=await s.json();l(t.data||[]),t.data&&0!==t.data.length?e.success("Found ".concat(t.data.length," records for the selected date range")):e.error("No data found for the selected date range");let a=(t.data||[]).reduce((e,t)=>e+(parseInt(String(t.amount))||0),0);b(a)}else{let t=await s.json().catch(()=>({}));console.error("Console detail report API error:",t),e.error("Failed to fetch detail report: ".concat(t.error||"Unknown error"))}}catch(t){console.error("Error fetching detail report:",t),e.error("Network error: Unable to fetch data")}finally{i(!1)}}};return(0,t.jsxs)("div",{className:"p-3 sm:p-6 space-y-4 sm:space-y-6",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 text-white p-4 sm:p-6 rounded-xl shadow-lg",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl sm:text-3xl font-bold mb-2",children:"Detail Report"}),(0,t.jsx)("p",{className:"text-sky-100 text-sm sm:text-base",children:"Console detail activity report with date range"})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-3",children:[(0,t.jsxs)("button",{onClick:()=>{if(0===c.length)return void e.error("No data to export");g(!0);try{let e=o.split("-").reverse().join("-"),t=m.split("-").reverse().join("-"),s='\n        <html>\n          <head>\n            <meta charset="UTF-8">\n            <style>\n              table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; }\n              th, td { border: 1px solid black; padding: 8px; text-align: left; }\n              th { background-color: #f0f0f0; font-weight: bold; text-align: center; }\n              .header { text-align: center; font-weight: bold; font-size: 16px; }\n              .center { text-align: center; }\n              .amount { text-align: right; }\n            </style>\n          </head>\n          <body>\n            <table>\n              <tr><th colspan="20" class="header">VARAHA SDC</th></tr>\n              <tr><th colspan="20" class="header">CONSOLE DETAIL REPORT - From '.concat(e," To ").concat(t,"</th></tr>\n              <tr>\n                <th>S.No</th>\n                <th>CRO</th>\n                <th>Exam. Id</th>\n                <th>Name</th>\n                <th>Doctor Name</th>\n                <th>Age</th>\n                <th>Category</th>\n                <th>Scan Type</th>\n                <th>Films</th>\n                <th>Number of Scan</th>\n                <th>Issue CD/DVD</th>\n                <th>Contrast</th>\n                <th>Amount</th>\n                <th>Start Time</th>\n                <th>End Time</th>\n                <th>Technician Name</th>\n                <th>Nursing Name</th>\n                <th>Remark</th>\n                <th>Status</th>\n                <th>Date</th>\n              </tr>\n      "),a=0,r=0,n=0,l=0,d=0;c.forEach((e,t)=>{let c=parseInt(String(e.number_films))||0,i=parseInt(String(e.number_scan))||0,o=+("YES"===e.issue_cd),x=parseInt(String(e.number_contrast))||0,m=parseInt(String(e.amount))||0;a+=c,r+=i,n+=o,l+=x,d+=m,s+='\n          <tr>\n            <td class="center">'.concat(t+1,"</td>\n            <td>").concat(e.c_p_cro||e.cro,'</td>\n            <td class="center">').concat(e.examination_id||0,"</td>\n            <td>").concat(e.pre," ").concat(e.patient_name,"</td>\n            <td>").concat(e.doctor_name||"-",'</td>\n            <td class="center">').concat(e.age||"-","</td>\n            <td>").concat(e.category||"-","</td>\n            <td>").concat(e.scan_type||"-",'</td>\n            <td class="center">').concat(c,'</td>\n            <td class="center">').concat(i,'</td>\n            <td class="center">').concat(o,'</td>\n            <td class="center">').concat(x,'</td>\n            <td class="amount">₹').concat(m.toLocaleString(),'</td>\n            <td class="center">').concat(e.start_time||"-",'</td>\n            <td class="center">').concat(e.stop_time||"-","</td>\n            <td>").concat(e.technician_name||"-","</td>\n            <td>").concat(e.nursing_name||"-","</td>\n            <td>").concat(e.remark||"-",'</td>\n            <td class="center">').concat(e.status||"-",'</td>\n            <td class="center">').concat(e.date?e.date.split("-").reverse().join("-"):e.added_on?e.added_on.split("-").reverse().join("-"):"-","</td>\n          </tr>\n        ")}),s+='\n              <tr><td colspan="20"></td></tr>\n              <tr style="font-weight: bold; background-color: #f0f0f0;">\n                <td class="center">-</td>\n                <td class="center">-</td>\n                <td class="center">-</td>\n                <td class="center">-</td>\n                <td class="center">-</td>\n                <td class="center">-</td>\n                <td class="center">TOTAL</td>\n                <td class="center">-</td>\n                <td class="center">'.concat(a,'</td>\n                <td class="center">').concat(r,'</td>\n                <td class="center">').concat(n,'</td>\n                <td class="center">').concat(l,'</td>\n                <td class="amount">₹').concat(d.toLocaleString(),'</td>\n                <td class="center">-</td>\n                <td class="center">-</td>\n                <td class="center">-</td>\n                <td class="center">-</td>\n                <td class="center">-</td>\n                <td class="center">-</td>\n                <td class="center">').concat(c.length,"</td>\n              </tr>\n            </table>\n          </body>\n        </html>\n      ");let i=new Blob([s],{type:"application/vnd.ms-excel;charset=utf-8"}),x=window.URL.createObjectURL(i),p=document.createElement("a");p.href=x,p.download="CONSOLE_DETAIL_REPORT_".concat(e,"_TO_").concat(t,".xls"),p.click(),window.URL.revokeObjectURL(x)}catch(t){console.error("Export error:",t),e.error("Export failed")}finally{g(!1)}},disabled:h||0===c.length,className:"flex items-center justify-center space-x-2 px-3 sm:px-4 py-2 bg-green-600 hover:bg-green-500 rounded-lg transition-colors disabled:opacity-50 text-sm sm:text-base",children:[(0,t.jsx)(a.Download,{className:"h-4 w-4 sm:h-5 sm:w-5"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:h?"Exporting...":"Export Excel"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Export"})]}),(0,t.jsxs)("button",{onClick:w,disabled:d,className:"flex items-center justify-center space-x-2 px-3 sm:px-4 py-2 bg-sky-500 hover:bg-sky-400 rounded-lg transition-colors disabled:opacity-50 text-sm sm:text-base",children:[(0,t.jsx)(r.RefreshCw,{className:"h-4 w-4 sm:h-5 sm:w-5 ".concat(d?"animate-spin":"")}),(0,t.jsx)("span",{children:"Refresh"})]})]})]})}),(0,t.jsx)("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-lg border border-gray-100",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-end space-y-4 sm:space-y-0 sm:space-x-4",children:[(0,t.jsxs)("div",{className:"flex-shrink-0",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,t.jsx)("input",{type:"date",value:o,onChange:e=>{x(e.target.value),u(1)},className:"px-3 py-2 w-full sm:w-auto border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent text-sm sm:text-base"})]}),(0,t.jsxs)("div",{className:"flex-shrink-0",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,t.jsx)("input",{type:"date",value:m,onChange:e=>{p(e.target.value),u(1)},className:"px-3 py-2 w-full sm:w-auto border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent text-sm sm:text-base"})]}),(0,t.jsx)("button",{onClick:w,disabled:d||!o||!m,className:"px-4 sm:px-6 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 transition-colors disabled:opacity-50 text-sm sm:text-base flex-shrink-0",children:"Generate Report"}),(0,t.jsxs)("div",{className:"text-xs sm:text-sm text-gray-600 break-words",children:[(0,t.jsxs)("div",{className:"sm:hidden",children:[(0,t.jsxs)("div",{children:["Records: ",c.length]}),(0,t.jsxs)("div",{children:["Revenue: ₹",f.toLocaleString()]})]}),(0,t.jsxs)("div",{className:"hidden sm:block",children:["Total Records: ",c.length," | Total Revenue: ₹",f.toLocaleString()]})]})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Console Detail Activities"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Report from ",o.split("-").reverse().join("-")," to ",m.split("-").reverse().join("-")]})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"S.No"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CRO"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Exam. Id"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Doctor"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Age"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Scan Type"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Films"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No. Scan"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CD/DVD"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contrast"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Time"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stop Time"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Technician"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nursing"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Remark"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:d?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:20,className:"px-6 py-12 text-center",children:(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,t.jsx)(r.RefreshCw,{className:"h-5 w-5 animate-spin text-blue-500"}),(0,t.jsx)("span",{className:"text-gray-500",children:"Loading detail report..."})]})})}):0===c.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:20,className:"px-6 py-12 text-center text-gray-500",children:"No activities found for selected date range"})}):c.slice((y-1)*10,10*y).map((e,s)=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black font-medium",children:(y-1)*10+s+1}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm font-medium text-blue-600",children:e.c_p_cro||e.cro})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.examination_id||0}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"text-sm font-medium text-black",children:[e.pre," ",e.patient_name]})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.doctor_name||"-"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.age||"-"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.category||"-"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.scan_names||e.scan_type||"-"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.number_films||0}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.number_scan||0}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:"YES"===e.issue_cd?"1":"0"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.number_contrast||0}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.amount||0}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.start_time||"-"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.stop_time||"-"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.technician_name||"-"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.nursing_name||"-"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.remark||"-"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"px-3 py-1 text-xs font-bold rounded-full border ".concat("Complete"===e.status?"bg-green-100 text-green-900 border-green-300":"Pending"===e.status?"bg-yellow-100 text-yellow-900 border-yellow-300":"Recall"===e.status?"bg-red-100 text-red-900 border-red-300":"bg-gray-100 text-gray-900 border-gray-300"),children:e.status||"N/A"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:e.date?e.date.split("-").reverse().join("-"):e.added_on?e.added_on.split("-").reverse().join("-"):"-"})]},"".concat(e.c_p_cro||e.cro,"-").concat(s)))})]})}),c.length>10&&(0,t.jsx)("div",{className:"px-6 py-4 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-700",children:["Page ",y," of ",Math.ceil(c.length/10)," | Total: ",c.length," records"]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[y>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>u(1),className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"First"}),(0,t.jsx)("button",{onClick:()=>u(y-1),className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Previous"})]}),(0,t.jsx)("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,Math.ceil(c.length/10))},(e,s)=>{let a=Math.max(1,y-2)+s;return a>Math.ceil(c.length/10)?null:(0,t.jsx)("button",{onClick:()=>u(a),className:"px-3 py-2 text-sm font-medium rounded-lg ".concat(y===a?"bg-sky-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"),children:a},a)})}),y<Math.ceil(c.length/10)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>u(y+1),className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Next"}),(0,t.jsx)("button",{onClick:()=>u(Math.ceil(c.length/10)),className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Last"})]})]})]})})]})]})}}]);