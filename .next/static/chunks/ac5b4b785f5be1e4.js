(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,44112,t=>{"use strict";t.s(["default",()=>r]);var e=t.i(43476),n=t.i(71645),a=t.i(84614),s=t.i(63059);function r(){let[t,r]=(0,n.useState)(null);(0,n.useEffect)(()=>{i()},[]);let i=async()=>{try{let t=await fetch("https://varahasdc.co.in/api/reception/patients/last-enrolled");if(t.ok){let e=await t.json();r(e.data)}}catch(t){console.error("Error fetching last patient:",t)}};return t?(0,e.jsx)("div",{className:"bg-blue-600 bg-opacity-20 rounded-lg p-4 border border-blue-200",children:(0,e.jsxs)("div",{className:"flex items-center space-x-2 text-white",children:[(0,e.jsx)(a.User,{className:"h-4 w-4"}),(0,e.jsx)("span",{className:"text-sm font-medium text-white",children:"Last Enrolled Patient"}),(0,e.jsx)(s.ChevronRight,{className:"h-3 w-3 text-white"}),(0,e.jsx)("span",{className:"text-sm font-bold text-white",children:t.cro}),(0,e.jsx)(s.ChevronRight,{className:"h-3 w-3 text-white"}),(0,e.jsx)("span",{className:"text-sm font-medium text-white",children:t.patient_name})]})}):null}},3281,t=>{"use strict";t.s(["Printer",()=>e],3281);let e=(0,t.i(75254).default)("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]])},26637,t=>{"use strict";t.s(["default",()=>d]);var e=t.i(43476),n=t.i(71645),a=t.i(55436),s=t.i(3281),r=t.i(78583),i=t.i(8776),o=t.i(44112);function d(){let t=(0,i.useToastContext)(),[d,l]=(0,n.useState)([]),[c,p]=(0,n.useState)(!1),[m,x]=(0,n.useState)(""),[h,u]=(0,n.useState)(1),[b]=(0,n.useState)(10),[g,f]=(0,n.useState)(null),y=async()=>{if(!m.trim())return void t.error("Please enter search term");p(!0);try{let e=await fetch("/api/patients/search?q=".concat(encodeURIComponent(m)));if(e.ok){let n=await e.json();console.log("Search API response:",n),n.success&&n.patient?(console.log("Patient data:",n.patient),l([n.patient]),t.success("Patient found successfully!")):(l([]),t.error("No patient found with this search term"))}else console.error("API response not ok:",e.status),l([]),t.error("Error searching patient")}catch(e){console.error("Error searching patients:",e),l([]),t.error("Error searching patient")}finally{p(!1)}},w=t=>{let e=["","one","two","three","four","five","six","seven","eight","nine"];return 0===t?"zero":t<10?e[t]:t<20?["ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"][t-10]:t<100?["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"][Math.floor(t/10)]+(t%10?" "+e[t%10]:""):t<1e3?e[Math.floor(t/100)]+" hundred"+(t%100?" "+w(t%100):""):t<1e5?w(Math.floor(t/1e3))+" thousand"+(t%1e3?" "+w(t%1e3):""):t.toString()},_=async e=>{f(e.patient_id);try{console.log("Patient data:",e);let n={cro:e.cro,patient_id:e.patient_id,patient_name:"".concat(e.pre," ").concat(e.patient_name),age:e.age,gender:e.gender,address:e.address||"",contact_number:e.contact_number||"",category:e.category||"",doctor_name:e.doctor_name||e.dname,date:e.date,allot_date:e.allot_date,time_slot:e.time_slot||"",scan_names:e.scan_names||"",amount:e.amount||0,amount_reci:e.amount_reci||0,total_scan_amount:e.total_scan_amount||0},a="\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <title>Receipt - ".concat(n.cro,'</title>\n          <style>\n            .admission_form { text-align: center; color: #000000; font-size: 10px; width: 100%; }\n            .admission_form table { width: 98%; font-size: 10px; margin: -5px 8px; }\n            .admission_form .form_input { padding: 2px 1%; font-size: 10px; border: none; font-weight: bold; font-style: italic; width: 99%; border-bottom: 1px dotted #000000; }\n            .admission_form .form_input_box { border-bottom: 0px dotted #000000; padding: 0px 0px 2px 0px; width: 100%; display: inline-block; }\n            @media print { .no_print, .no_print * { display: none !important; } .admission_div_desc { border: 0px !important; } .page_break { page-break-after: always; } }\n          </style>\n        </head>\n        <body bgcolor="#FFFFFF" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" onload="window.print(); setTimeout(() => window.close(), 1000);">\n          <div class="admission_form" align="center" style="border:solid thin; margin-top:18px;width:93.0%;margin-left:30px;">\n            <table align="center" style="margin-top:2px;">\n              <tr><td colspan="6"><b>Dr. S.N. MEDICAL COLLEGE AND ATTACHED GROUP OF HOSPITAL, JODHPUR</b></td></tr>\n              <tr><td colspan="6"><b>Rajasthan Medical Relief Society, M.D.M. Hospital, Jodhpur</b></td></tr>\n              <tr><td colspan="6"><b>IMAGING CENTRE UNDER P.P.P.MODE : VARAHA SDC</b></td></tr>\n              <tr><td colspan="6"><b>256 SLICE DUAL ENERGY CT SCAN, M.D.M HOSPITAL Jodhpur(Raj.) - 342003</b></td></tr>\n              <tr><td colspan="6"><b>Tel. : +91-291-2648120 , 0291-2648121 , 0291-2648122</b></td></tr>\n            </table>\n            \n            <table>\n              <tr>\n                <td width="55">Reg.No :</td>\n                <td width="200"><span class="form_input_box"><input type="text" class="form_input" value="').concat(n.cro,"(").concat(n.patient_id,')"></span></td>\n                <td colspan="6"><span style="margin-left:30%; border: 1px solid #02C; border-radius: 11px;padding: 3px 15px;">Cash Receipt</span></td>\n                <td width="36">Date</td>\n                <td width="144"><span class="form_input_box"><input type="text" class="form_input" value="').concat(n.date,'"></span></td>\n              </tr>\n            </table>\n            \n            <table>\n              <tr>\n                <td width="56">Ref. By :</td>\n                <td width="482"><span class="form_input_box"><input type="text" class="form_input" value="').concat(n.doctor_name,'"></span></td>\n                <td width="174">Date and Time of Appointment :</td>\n                <td width="316"><span class="form_input_box"><input type="text" class="form_input" value="').concat(n.allot_date,'"></span></td>\n              </tr>\n            </table>\n            \n            <table>\n              <tr>\n                <td width="78">Patient Name:</td>\n                <td width="650"><span class="form_input_box"><input type="text" class="form_input" value="').concat(n.patient_name,'"></span></td>\n                <td width="33">Age :</td>\n                <td width="144"><span class="form_input_box"><input type="text" class="form_input" value="').concat(n.age,'"></span></td>\n                <td width="36">Gender</td>\n                <td width="144"><span class="form_input_box"><input type="text" class="form_input" value="').concat(n.gender,'"></span></td>\n              </tr>\n            </table>\n            \n            <table>\n              <tr>\n                <td width="40">Address</td>\n                <td width="687"><span class="form_input_box"><input type="text" class="form_input" value="').concat(n.address,'"></span></td>\n                <td width="120"><span class="form_input_box"><label>Category</label><input type="text" class="form_input" value="').concat(n.category,'"></span></td>\n                <td width="33">Phone:</td>\n                <td width="333"><span class="form_input_box"><input type="text" class="form_input" value="').concat(n.contact_number,'"></span></td>\n              </tr>\n            </table>\n            \n            <table>\n              <tr>\n                <td width="59">Investigations:</td>\n                <td width="1042"><span class="form_input_box"><input type="text" class="form_input" value="').concat(n.scan_names,'"></span></td>\n              </tr>\n            </table>\n            \n            <table>\n              <tr>\n                <td width="100">For Sum Of Rupees:</td>\n                <td width="733"><span class="form_input_box"><input type="text" class="form_input" value="').concat(w(n.amount_reci).toUpperCase(),' RUPEES ONLY"></span></td>\n                <td width="30"><label>Scan Amount</label><input type="text" value="₹ ').concat(n.total_scan_amount,'" style="border:1px solid #5E60AE;"></td>\n                <td width="30"><label>Received Amount</label><input type="text" value="₹ ').concat(n.amount_reci,'" style="border:1px solid #5E60AE;"></td>\n              </tr>\n            </table>\n            \n            <table>\n              <tr>\n                <td colspan="6" align="right">For Varaha SDC, Jodhpur</span></td>\n              </tr>\n                      <tr>\n                <td></td>\n              </tr>\n            </table>\n          </div>\n          \n          <hr>\n          \n          <div div class="admission_form" align="center" style="border:solid thin; margin-top:18px;width:93.0%;margin-left:30px;">\n            <table align="center" style="margin-top:2px;">\n              <tr><td colspan="6"><b>Dr. S.N. MEDICAL COLLEGE AND ATTACHED GROUP OF HOSPITAL, JODHPUR</b></td></tr>\n              <tr><td colspan="6"><b>Rajasthan Medical Relief Society, M.D.M. Hospital, Jodhpur</b></td></tr>\n              <tr><td colspan="6"><b>IMAGING CENTRE UNDER P.P.P.MODE : VARAHA SDC</b></td></tr>\n              <tr><td colspan="6"><b>256 SLICE DUAL ENERGY CT SCAN, M.D.M HOSPITAL Jodhpur(Raj.) - 342003</b></td></tr>\n              <tr><td colspan="6"><b>Tel. : +91-291-2648120 , 0291-2648121 , 0291-2648122</b></td></tr>\n            </table>\n            \n            <table>\n              <tr>\n                <td width="55">Reg.No :</td>\n                <td width="200"><span class="form_input_box"><input type="text" class="form_input" value="').concat(n.cro,"(").concat(n.patient_id,')"></span></td>\n                <td colspan="6"><span style="margin-left:30%; border: 1px solid #02C; border-radius: 11px;padding: 3px 15px;">Cash Receipt</span></td>\n                <td width="36">Date</td>\n                <td width="144"><span class="form_input_box"><input type="text" class="form_input" value="').concat(n.date,'"></span></td>\n              </tr>\n            </table>\n            \n            <table>\n              <tr>\n                <td width="56">Ref. By :</td>\n                <td width="482"><span class="form_input_box"><input type="text" class="form_input" value="').concat(n.doctor_name,'"></span></td>\n                <td width="174">Date and Time of Appointment :</td>\n                <td width="316"><span class="form_input_box"><input type="text" class="form_input" value="').concat(n.allot_date,'"></span></td>\n              </tr>\n            </table>\n            \n            <table>\n              <tr>\n                <td width="78">Patient Name:</td>\n                <td width="650"><span class="form_input_box"><input type="text" class="form_input" value="').concat(n.patient_name,'"></span></td>\n                <td width="33">Age :</td>\n                <td width="144"><span class="form_input_box"><input type="text" class="form_input" value="').concat(n.age,'"></span></td>\n                <td width="36">Gender</td>\n                <td width="144"><span class="form_input_box"><input type="text" class="form_input" value="').concat(n.gender,'"></span></td>\n              </tr>\n            </table>\n            \n            <table>\n              <tr>\n                <td width="40">Address</td>\n                <td width="687"><span class="form_input_box"><input type="text" class="form_input" value="').concat(n.address,'"></span></td>\n                <td width="120"><span class="form_input_box"><label>Category</label><input type="text" class="form_input" value="').concat(n.category,'"></span></td>\n                <td width="33">Phone:</td>\n                <td width="333"><span class="form_input_box"><input type="text" class="form_input" value="').concat(n.contact_number,'"></span></td>\n              </tr>\n            </table>\n            \n            <table>\n              <tr>\n                <td width="59">Investigations:</td>\n                <td width="1042"><span class="form_input_box"><input type="text" class="form_input" value="').concat(n.scan_names,'"></span></td>\n              </tr>\n            </table>\n            \n            <table>\n              <tr>\n                <td width="20">For Sum Of Rupees:</td>\n                <td width="550"><span class="form_input_box"><input type="text" class="form_input" value="').concat(w(n.amount_reci).toUpperCase(),' RUPEES ONLY"></span></td>\n                <td width="30"><label>Scan Amount</label><input type="text" value="₹ ').concat(n.total_scan_amount,'" style="border:1px solid #5E60AE;"></td>\n                <td width="30"><label>Received Amount</label><input type="text" value="₹ ').concat(n.amount_reci,'" style="border:1px solid #5E60AE;"></td>\n              </tr>\n            </table>\n            \n            <table>\n              <tr>\n                <td colspan="6" align="right">For Varaha SDC, Jodhpur</span></td>\n              </tr>\n                 <tr>\n                <td></td>\n              </tr>\n            </table>\n          </div>\n        </body>\n        </html>\n      '),s=window.open("","_blank","width=800,height=600,scrollbars=yes,resizable=yes");s&&(s.document.write(a),s.document.close());let r=e.patient_name||e.firstname||"Unknown Patient";t.success("Receipt generated for ".concat(r," (").concat(n.cro,")"))}catch(e){console.error("Error generating receipt:",e),t.error("Error generating receipt")}finally{f(null)}},v=Math.ceil(d.length/b),N=(h-1)*b,j=d.slice(N,N+b);return(0,e.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-6 space-y-6",children:[(0,e.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-6 rounded-xl shadow-lg",children:(0,e.jsxs)("div",{className:"flex justify-between items-start",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Patient Reprint (Old Records)"}),(0,e.jsx)("p",{className:"text-blue-100 text-lg",children:"Search and reprint receipts for old patient records"})]}),(0,e.jsx)("div",{className:"ml-6",children:(0,e.jsx)(o.default,{})})]})}),(0,e.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:[(0,e.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,e.jsxs)("div",{className:"flex-1 relative",children:[(0,e.jsx)(a.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,e.jsx)("input",{type:"text",placeholder:"Search by CRO, patient name, or mobile...",value:m,onChange:t=>x(t.target.value),onKeyPress:t=>{"Enter"===t.key&&y()},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,e.jsxs)("button",{onClick:y,disabled:c||!m.trim(),className:"flex items-center space-x-2 px-6 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 disabled:opacity-50 shadow-md font-medium",children:[(0,e.jsx)(a.Search,{className:"h-5 w-5"}),(0,e.jsx)("span",{children:c?"Searching...":"Search"})]})]}),d.length>0?(0,e.jsxs)("div",{className:"overflow-x-auto",children:[(0,e.jsxs)("div",{className:"mb-4 text-sm text-gray-600",children:["Found ",d.length," patient(s)"]}),(0,e.jsxs)("table",{className:"w-full",children:[(0,e.jsx)("thead",{className:"bg-gray-50",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"S.No"}),(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CRO"}),(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient Name"}),(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Age/Gender"}),(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mobile"}),(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hospital"}),(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Doctor"}),(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,e.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,e.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map((t,n)=>(console.log("Rendering patient:",t),(0,e.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black font-medium",children:N+n+1}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsx)("div",{className:"text-sm font-medium text-blue-600",children:t.cro||t.cro_number||t.patient_id||"-"})}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsx)("div",{className:"text-sm font-medium text-black",children:t.patient_name||t.firstname||"-"})}),(0,e.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:[t.age||"-","y, ",t.gender||"-"]}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:t.contact_number||t.mobile||"-"}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:t.h_name||t.hospital_name||"-"}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:t.doctor_name||t.dname||"-"}),(0,e.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:["₹",t.amount||0]}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black",children:t.date||"-"}),(0,e.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,e.jsxs)("button",{onClick:()=>_(t),disabled:g===t.patient_id,className:"inline-flex items-center px-3 py-1 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg hover:from-blue-600 hover:to-cyan-600 transition-all duration-200 text-xs font-medium disabled:opacity-50 shadow-md",children:[g===t.patient_id?(0,e.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-1"}):(0,e.jsx)(s.Printer,{className:"h-3 w-3 mr-1"}),(0,e.jsx)("span",{children:"Reprint"})]})})]},"".concat(t.patient_id,"-").concat(n))))})]}),(0,e.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["Debug: ",d.length," patients found, showing ",j.length]}),v>1&&(0,e.jsx)("div",{className:"px-6 py-4 border-t border-gray-200",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{className:"text-sm text-gray-700",children:["Page ",h," of ",v," | Total: ",d.length," records"]}),(0,e.jsxs)("div",{className:"flex items-center space-x-2",children:[h>1&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("button",{onClick:()=>u(1),className:"px-3 py-2 text-sm font-medium bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all duration-200 shadow-md",children:"First"}),(0,e.jsx)("button",{onClick:()=>u(h-1),className:"px-3 py-2 text-sm font-medium bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all duration-200 shadow-md",children:"Previous"})]}),(0,e.jsx)("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,v)},(t,n)=>{let a=Math.max(1,h-2)+n;return a>v?null:(0,e.jsx)("button",{onClick:()=>u(a),className:"px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 shadow-md ".concat(h===a?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white":"bg-gradient-to-r from-gray-400 to-gray-500 text-white hover:from-gray-500 hover:to-gray-600"),children:a},a)})}),h<v&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("button",{onClick:()=>u(h+1),className:"px-3 py-2 text-sm font-medium bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all duration-200 shadow-md",children:"Next"}),(0,e.jsx)("button",{onClick:()=>u(v),className:"px-3 py-2 text-sm font-medium bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg hover:from-gray-600 hover:to-gray-700 transition-all duration-200 shadow-md",children:"Last"})]})]})]})})]}):null,0===d.length&&m&&!c&&(0,e.jsxs)("div",{className:"text-center py-12",children:[(0,e.jsx)(r.FileText,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,e.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Records Found"}),(0,e.jsx)("p",{className:"text-gray-500",children:"No patient records found matching your search criteria."})]}),!m&&(0,e.jsxs)("div",{className:"text-center py-12",children:[(0,e.jsx)(a.Search,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,e.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Search Patient Records"}),(0,e.jsx)("p",{className:"text-gray-500",children:"Enter CRO number, patient name, or mobile number to search for old records."})]})]})]})}}]);