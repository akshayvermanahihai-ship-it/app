(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,86536,e=>{"use strict";e.s(["Eye",()=>t],86536);let t=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},16715,e=>{"use strict";e.s(["RefreshCw",()=>t],16715);let t=(0,e.i(75254).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},95100,e=>{"use strict";e.s(["default",()=>c]);var t=e.i(43476),s=e.i(71645),r=e.i(55436),a=e.i(16715),l=e.i(86536),n=e.i(8776),o=e.i(18566);function c(){let e=(0,n.useToastContext)(),c=(0,o.useRouter)(),[i,d]=(0,s.useState)([]),[x,h]=(0,s.useState)(!0),[m,p]=(0,s.useState)(""),[g,u]=(0,s.useState)(1),[y,b]=(0,s.useState)(1),[f,j]=(0,s.useState)(0);(0,s.useEffect)(()=>{N()},[g]);let N=async()=>{h(!0);try{let t=new URLSearchParams({page:g.toString(),limit:"10"});m&&t.append("search",m);let s=await fetch("/api/console/queue?".concat(t));if(s.ok){let e=await s.json();console.log("API Response:",e),d(e.data||[]),j(e.total||0),b(Math.ceil((e.total||0)/10))}else{let t=await s.json().catch(()=>({}));console.error("Console queue API error:",t),console.log("Full API error response:",t),e.error("API Error: ".concat(t.error||"Failed to fetch patients")),t.details&&console.error("Error details:",t.details),t.sqlError&&console.error("SQL Error:",t.sqlError,t.sqlMessage)}}catch(t){console.error("Error fetching patients:",t),console.log("Full error details:",t),e.error("Error loading data: ".concat(t instanceof Error?t.message:"Unknown error"))}finally{h(!1)}},w=(g-1)*10;return(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 text-white p-6 rounded-xl shadow-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Patient In Queue"}),(0,t.jsx)("p",{className:"text-sky-100",children:"Console management for completed lab reports"})]}),(0,t.jsxs)("button",{onClick:N,disabled:x,className:"flex items-center space-x-2 px-4 py-2 bg-sky-500 hover:bg-sky-400 rounded-lg transition-colors disabled:opacity-50",children:[(0,t.jsx)(a.RefreshCw,{className:"h-5 w-5 ".concat(x?"animate-spin":"")}),(0,t.jsx)("span",{children:"Refresh"})]})]})}),(0,t.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u(1),N()},className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(r.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,t.jsx)("input",{type:"text",placeholder:"Search by CRO or Patient Name...",value:m,onChange:e=>p(e.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),(0,t.jsx)("button",{type:"submit",className:"px-6 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 transition-colors",children:"Search"})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Patient Queue"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Total: ",f," records | Page ",g," of ",y]})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sr. No."}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CRO"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient Name"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:x?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"px-6 py-12 text-center",children:(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,t.jsx)(a.RefreshCw,{className:"h-5 w-5 animate-spin text-sky-500"}),(0,t.jsx)("span",{className:"text-gray-500",children:"Loading patients..."})]})})}):0===i.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"px-6 py-12 text-center text-gray-500",children:"No patients found"})}):i.map((e,s)=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-black font-medium",children:w+s+1}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm font-medium text-sky-600",children:e.cro_number||e.cro})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"text-sm font-medium text-black",children:[e.pre||""," ",e.patient_name||"N/A"]})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("button",{onClick:()=>{var t;return t=e.cro_number||e.cro,void c.push("/console/patient/".concat(encodeURIComponent(t)))},className:"inline-flex items-center space-x-1 px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 transition-colors text-sm font-medium",children:[(0,t.jsx)(l.Eye,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:e.cro_number||e.cro})]})})]},e.patient_id))})]})}),(0,t.jsx)("div",{className:"px-6 py-4 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-700",children:["Page ",g," of ",y," | Total: ",f," records"]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[g>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>u(1),className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"First"}),(0,t.jsx)("button",{onClick:()=>u(g-1),className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Previous"})]}),(0,t.jsx)("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,y)},(e,s)=>{let r=Math.max(1,g-2)+s;return r>y?null:(0,t.jsx)("button",{onClick:()=>u(r),className:"px-3 py-2 text-sm font-medium rounded-lg ".concat(g===r?"bg-sky-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"),children:r},r)})}),g<y&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>u(g+1),className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Next"}),(0,t.jsx)("button",{onClick:()=>u(y),className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Last"})]})]})]})})]})]})}}]);