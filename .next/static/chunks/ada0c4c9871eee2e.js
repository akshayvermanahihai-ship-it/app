(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,56909,e=>{"use strict";e.s(["Save",()=>t],56909);let t=(0,e.i(75254).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},71689,e=>{"use strict";e.s(["ArrowLeft",()=>t],71689);let t=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},73796,e=>{"use strict";e.s(["default",()=>c]);var t=e.i(43476),r=e.i(71645),a=e.i(71689),s=e.i(56909),l=e.i(18566),n=e.i(8776);function c(){let e=(0,l.useParams)(),c=(0,l.useRouter)(),d=(0,n.useToastContext)(),i=decodeURIComponent(e.cro),o=e=>{if(!e||"0000-00-00"===e)return"";try{if(e.includes("T")&&e.includes("Z")){let t=new Date(e);if(isNaN(t.getTime()))return"";return t.toISOString().split("T")[0]}if(e.includes("-")&&3===e.split("-").length){let t=e.split("-");if(4===t[0].length)return e.split("T")[0];return"".concat(t[2],"-").concat(t[1].padStart(2,"0"),"-").concat(t[0].padStart(2,"0"))}let t=new Date(e);if(isNaN(t.getTime()))return"";return t.toISOString().split("T")[0]}catch(e){return""}},[x,m]=(0,r.useState)(null),[g,p]=(0,r.useState)(!0),[u,y]=(0,r.useState)(!1),[h,b]=(0,r.useState)(0),[N,j]=(0,r.useState)(""),[f,v]=(0,r.useState)("No"),[_,w]=(0,r.useState)(""),[S,k]=(0,r.useState)(""),[C,T]=(0,r.useState)("No"),[D,R]=(0,r.useState)(""),[P,A]=(0,r.useState)("");(0,r.useEffect)(()=>{i&&O()},[i]);let O=async()=>{p(!0);try{let e=await fetch("/api/doctor/nursing/".concat(encodeURIComponent(i)));if(e.ok){let t=await e.json();m(t.data);let r=t.data.patient;b(r.ct_scan_doctor_id||0),j(o(r.n_patient_ct_report_date||"")),v(r.n_patient_ct||"No"),w(o(r.n_patient_ct_report_date||"")),k(r.n_patient_ct_remark||""),T(r.n_patient_x_ray||"No"),R(o(r.n_patient_x_ray_report_date||"")),A(r.n_patient_x_ray_remark||"")}else d.error("Patient not found"),c.push("/doctor/ct-scan-doctor-list")}catch(e){d.error("Error loading patient details")}finally{p(!1)}},I=async()=>{y(!0);try{let e=await fetch("/api/doctor/save-nursing",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cro:i,ct_scan_doctor_id:h||null,ct_scan_report_date:N||null,n_patient_ct:f,n_patient_ct_report_date:_||null,n_patient_ct_remark:S,n_patient_x_ray:C,n_patient_x_ray_report_date:D||null,n_patient_x_ray_remark:P})}),t=await e.json();e.ok&&t.success?(d.success("Nursing data saved successfully"),O()):(console.error("Save error:",t),d.error(t.error||"Failed to save nursing data"))}catch(e){console.error("Save nursing error:",e),d.error("Error saving nursing data")}finally{y(!1)}};return g?(0,t.jsx)("div",{className:"p-6 space-y-6",children:(0,t.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading patient details..."})]})})}):x?(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 p-4",children:[(0,t.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200 p-4 mb-6 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("button",{onClick:()=>c.push("/doctor/ct-scan-doctor-list"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,t.jsx)(a.ArrowLeft,{className:"h-5 w-5 text-gray-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Nursing Details"}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Patient CRO: ",x.patient.cro]})]})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Patient Information"})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsx)("table",{className:"w-full",children:(0,t.jsxs)("tbody",{className:"divide-y divide-gray-200",children:[(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-3 text-sm font-medium text-gray-900 bg-gray-50 w-1/4",children:"CRO Number"}),(0,t.jsx)("td",{className:"px-6 py-3 text-sm text-gray-900",children:x.patient.cro}),(0,t.jsx)("td",{className:"px-6 py-3 text-sm font-medium text-gray-900 bg-gray-50 w-1/4",children:"Patient Name"}),(0,t.jsx)("td",{className:"px-6 py-3 text-sm text-gray-900",children:x.patient.patient_name})]}),(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-3 text-sm font-medium text-gray-900 bg-gray-50",children:"Age"}),(0,t.jsx)("td",{className:"px-6 py-3 text-sm text-gray-900",children:x.patient.age}),(0,t.jsx)("td",{className:"px-6 py-3 text-sm font-medium text-gray-900 bg-gray-50",children:"Gender"}),(0,t.jsx)("td",{className:"px-6 py-3 text-sm text-gray-900",children:x.patient.gender})]}),(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-3 text-sm font-medium text-gray-900 bg-gray-50",children:"Mobile"}),(0,t.jsx)("td",{className:"px-6 py-3 text-sm text-gray-900",children:x.patient.mobile}),(0,t.jsx)("td",{className:"px-6 py-3 text-sm font-medium text-gray-900 bg-gray-50",children:"Contact"}),(0,t.jsx)("td",{className:"px-6 py-3 text-sm text-gray-900",children:x.patient.contact_number||"-"})]}),(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-3 text-sm font-medium text-gray-900 bg-gray-50",children:"Category"}),(0,t.jsx)("td",{className:"px-6 py-3 text-sm text-gray-900",children:x.patient.category||"-"}),(0,t.jsx)("td",{className:"px-6 py-3 text-sm font-medium text-gray-900 bg-gray-50",children:"Date"}),(0,t.jsx)("td",{className:"px-6 py-3 text-sm text-gray-900",children:(e=>{if(!e||"0000-00-00"===e)return"-";try{let t;if(e.includes("-")&&3===e.split("-").length){let r=e.split("-");t=new Date(4===r[0].length?e:"".concat(r[2],"-").concat(r[1],"-").concat(r[0]))}else t=new Date(e);if(isNaN(t.getTime()))return"-";let r=t.getDate().toString().padStart(2,"0"),a=t.toLocaleDateString("en-US",{month:"short"}),s=t.getFullYear();return"".concat(r,"-").concat(a,"-").concat(s)}catch(e){return"-"}})(x.patient.date)})]}),(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-3 text-sm font-medium text-gray-900 bg-gray-50",children:"Address"}),(0,t.jsx)("td",{className:"px-6 py-3 text-sm text-gray-900",colSpan:3,children:x.patient.address||"-"})]})]})})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Scan Information"})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"S.No"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Scan Type"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Scan Head"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-200",children:x.scans.map((e,r)=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-3 text-sm text-gray-900",children:r+1}),(0,t.jsx)("td",{className:"px-6 py-3 text-sm text-gray-900",children:e.s_name}),(0,t.jsx)("td",{className:"px-6 py-3 text-sm text-gray-900",children:e.head_name||"Not Assigned"})]},e.s_id))})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Nursing Information"})}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CT Scan Doctor"}),(0,t.jsxs)("select",{value:h,onChange:e=>b(Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:[(0,t.jsx)("option",{value:0,children:"--Select Doctor--"}),x.doctors.map(e=>(0,t.jsx)("option",{value:e.id,children:e.doctor_name},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CT Scan Report Date"}),(0,t.jsx)("input",{type:"date",value:N,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full border border-gray-300",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gray-100",children:[(0,t.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Examination"}),(0,t.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Retained"}),(0,t.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Report Date"}),(0,t.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left text-sm font-medium text-gray-900",children:"Remark"})]})}),(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"border border-gray-300 px-4 py-3 text-sm font-medium text-gray-900 bg-blue-50",children:"CT-Scan"}),(0,t.jsx)("td",{className:"border border-gray-300 px-4 py-3",children:(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",name:"ct",value:"Yes",checked:"Yes"===f,onChange:e=>v(e.target.value),className:"mr-2 text-blue-600 focus:ring-blue-500"}),(0,t.jsx)("span",{className:"text-sm",children:"Yes"})]}),(0,t.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",name:"ct",value:"No",checked:"No"===f,onChange:e=>v(e.target.value),className:"mr-2 text-blue-600 focus:ring-blue-500"}),(0,t.jsx)("span",{className:"text-sm",children:"No"})]})]})}),(0,t.jsx)("td",{className:"border border-gray-300 px-4 py-3",children:(0,t.jsx)("input",{type:"date",value:_,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})}),(0,t.jsx)("td",{className:"border border-gray-300 px-4 py-3",children:(0,t.jsx)("textarea",{value:S,onChange:e=>k(e.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Enter CT-Scan remarks..."})})]}),(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"border border-gray-300 px-4 py-3 text-sm font-medium text-gray-900 bg-green-50",children:"X-Ray Film"}),(0,t.jsx)("td",{className:"border border-gray-300 px-4 py-3",children:(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",name:"xray",value:"Yes",checked:"Yes"===C,onChange:e=>T(e.target.value),className:"mr-2 text-green-600 focus:ring-green-500"}),(0,t.jsx)("span",{className:"text-sm",children:"Yes"})]}),(0,t.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",name:"xray",value:"No",checked:"No"===C,onChange:e=>T(e.target.value),className:"mr-2 text-green-600 focus:ring-green-500"}),(0,t.jsx)("span",{className:"text-sm",children:"No"})]})]})}),(0,t.jsx)("td",{className:"border border-gray-300 px-4 py-3",children:(0,t.jsx)("input",{type:"date",value:D,onChange:e=>R(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm"})}),(0,t.jsx)("td",{className:"border border-gray-300 px-4 py-3",children:(0,t.jsx)("textarea",{value:P,onChange:e=>A(e.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-green-500 text-sm",placeholder:"Enter X-Ray film remarks..."})})]})]})]})}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mt-6 pt-6 border-t border-gray-200",children:[(0,t.jsxs)("button",{onClick:I,disabled:u,className:"flex items-center justify-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:[(0,t.jsx)(s.Save,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:u?"Saving...":"Save Data"})]}),(0,t.jsx)("button",{onClick:()=>c.push("/doctor/ct-scan-doctor-list"),className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors font-medium",children:"Back to List"})]})]})]})]}):(0,t.jsx)("div",{className:"p-6 space-y-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-gray-500",children:"Patient not found"}),(0,t.jsx)("button",{onClick:()=>c.push("/doctor/ct-scan-doctor-list"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Back to List"})]})})}}]);