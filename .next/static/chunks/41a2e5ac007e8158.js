(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16715,e=>{"use strict";e.s(["RefreshCw",()=>t],16715);let t=(0,e.i(75254).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},37218,e=>{"use strict";e.s(["default",()=>d]);var t=e.i(43476),r=e.i(71645),a=e.i(55436),s=e.i(16715),o=e.i(8776),l=e.i(18566);function d(){let e=(0,o.useToastContext)(),d=(0,l.useRouter)(),[n,c]=(0,r.useState)([]),[i,x]=(0,r.useState)(!0),[m,g]=(0,r.useState)(""),[h,p]=(0,r.useState)(1),[b,y]=(0,r.useState)([]),[u,f]=(0,r.useState)([]),[j,N]=(0,r.useState)(new Date().toLocaleDateString("en-CA",{timeZone:"Asia/Calcutta"})),[v,w]=(0,r.useState)(new Date().toLocaleDateString("en-CA",{timeZone:"Asia/Calcutta"}));(0,r.useEffect)(()=>{p(1)},[j,v]),(0,r.useEffect)(()=>{C()},[j,v]),(0,r.useEffect)(()=>{m.trim()?f(b.filter(e=>e.cro.toLowerCase().includes(m.toLowerCase())||e.patient_name.toLowerCase().includes(m.toLowerCase()))):f(b),p(1)},[m,b]);let C=async()=>{if(j&&v?!(new Date(j)>new Date(v))||(e.error("From date cannot be later than to date"),!1):(e.error("Please select both from and to dates"),!1)){x(!0);try{let t=new URLSearchParams({from_date:j.split("-").reverse().join("-"),to_date:v.split("-").reverse().join("-")}),r=await fetch("/api/doctor/ct-scan-doctor-list?".concat(t));if(r.ok){let t=await r.json();y(t.data||[]),f(t.data||[]),t.data&&0!==t.data.length?e.success("Found ".concat(t.data.length," records for the selected date range")):e.error("No data found for the selected date range")}else{let t=await r.json().catch(()=>({}));e.error(t.error||"Failed to fetch patient data")}}catch(t){console.error("Error fetching patient data:",t),e.error("Error loading data")}finally{x(!1)}}},k=e=>{console.log("Navigating to nursing page with CRO:",e);let t=encodeURIComponent(e),r="/doctor/nursing/".concat(t);console.log("Navigation URL:",r),d.push(r)},_=(h-1)*10,S=Math.ceil(u.length/10),L=u.slice(_,_+10);return(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white p-6 rounded-xl shadow-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"CT Scan Doctor List"}),(0,t.jsx)("p",{className:"text-emerald-100",children:"Manage CT scan doctor assignments with date filtering"})]}),(0,t.jsxs)("button",{onClick:C,disabled:i,className:"flex items-center space-x-2 px-4 py-2 bg-emerald-500 hover:bg-emerald-400 rounded-lg transition-colors disabled:opacity-50",children:[(0,t.jsx)(s.RefreshCw,{className:"h-5 w-5 ".concat(i?"animate-spin":"")}),(0,t.jsx)("span",{children:"Refresh"})]})]})}),(0,t.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-end space-y-4 sm:space-y-0 sm:space-x-4",children:[(0,t.jsxs)("div",{className:"flex-shrink-0",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),(0,t.jsx)("input",{type:"date",value:j,onChange:e=>{N(e.target.value),p(1)},className:"px-3 py-2 w-full sm:w-auto border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{className:"flex-shrink-0",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),(0,t.jsx)("input",{type:"date",value:v,onChange:e=>{w(e.target.value),p(1)},className:"px-3 py-2 w-full sm:w-auto border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(a.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,t.jsx)("input",{type:"text",placeholder:"Search by CRO or Patient Name...",value:m,onChange:e=>g(e.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]})]}),(0,t.jsx)("button",{onClick:C,disabled:i||!j||!v,className:"px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50 flex-shrink-0",children:"Generate Report"}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Total Records: ",u.length]})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"CT Scan Doctor Assignments"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Report from ",j.split("-").reverse().join("-")," to ",v.split("-").reverse().join("-")," | Page ",h," of ",S," | Total: ",u.length," records"]})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full border-collapse",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-b-2 border-gray-200",children:[(0,t.jsx)("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200",children:"Sr. No."}),(0,t.jsx)("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200",children:"CRO"}),(0,t.jsx)("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200",children:"Patient Name"}),(0,t.jsx)("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200",children:"Age"}),(0,t.jsx)("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200",children:"Date"}),(0,t.jsx)("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200",children:"CT Scan Doctor"}),(0,t.jsx)("th",{className:"px-4 py-4 text-center text-sm font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200",children:"CT Status"}),(0,t.jsx)("th",{className:"px-4 py-4 text-center text-sm font-semibold text-gray-700 uppercase tracking-wider border-r border-gray-200",children:"X-Ray Status"}),(0,t.jsx)("th",{className:"px-4 py-4 text-center text-sm font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-white",children:i?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:9,className:"px-6 py-12 text-center border-b border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,t.jsx)(s.RefreshCw,{className:"h-5 w-5 animate-spin text-emerald-500"}),(0,t.jsx)("span",{className:"text-gray-500",children:"Loading patient data..."})]})})}):0===L.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:9,className:"px-6 py-12 text-center text-gray-500 border-b border-gray-200",children:"No patient records found for selected date range"})}):L.map((e,r)=>{var a,s,o,l,d,n,c,i;return(0,t.jsxs)("tr",{className:"hover:bg-blue-50 transition-colors border-b border-gray-200",children:[(0,t.jsx)("td",{className:"px-4 py-4 text-sm text-gray-900 border-r border-gray-200 font-medium",children:_+r+1}),(0,t.jsx)("td",{className:"px-4 py-4 border-r border-gray-200",children:(0,t.jsx)("div",{className:"text-sm font-semibold text-blue-600 cursor-pointer hover:text-blue-800 hover:underline",onClick:()=>k(e.cro),children:e.cro})}),(0,t.jsx)("td",{className:"px-4 py-4 border-r border-gray-200",children:(0,t.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.pre," ",e.patient_name]})}),(0,t.jsx)("td",{className:"px-4 py-4 text-sm text-gray-900 border-r border-gray-200",children:e.age||"-"}),(0,t.jsx)("td",{className:"px-4 py-4 text-sm text-gray-900 border-r border-gray-200",children:e.date}),(0,t.jsx)("td",{className:"px-4 py-4 text-sm text-gray-900 border-r border-gray-200",children:e.ct_doctor_name||"-"}),(0,t.jsx)("td",{className:"px-4 py-4 text-center border-r border-gray-200",children:(0,t.jsx)("span",{className:"px-3 py-1 text-xs font-bold rounded-full ".concat((null==(a=e.n_patient_ct)?void 0:a.toLowerCase())==="yes"?"bg-green-100 text-green-800":(null==(s=e.n_patient_ct)?void 0:s.toLowerCase())==="no"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:(null==(o=e.n_patient_ct)?void 0:o.toLowerCase())==="yes"?"Completed":(null==(l=e.n_patient_ct)?void 0:l.toLowerCase())==="no"?"Pending":"Not Set"})}),(0,t.jsx)("td",{className:"px-4 py-4 text-center border-r border-gray-200",children:(0,t.jsx)("span",{className:"px-3 py-1 text-xs font-bold rounded-full ".concat((null==(d=e.n_patient_x_ray)?void 0:d.toLowerCase())==="yes"?"bg-green-100 text-green-800":(null==(n=e.n_patient_x_ray)?void 0:n.toLowerCase())==="no"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:(null==(c=e.n_patient_x_ray)?void 0:c.toLowerCase())==="yes"?"Completed":(null==(i=e.n_patient_x_ray)?void 0:i.toLowerCase())==="no"?"Pending":"Not Set"})}),(0,t.jsx)("td",{className:"px-4 py-4 text-center",children:(0,t.jsx)("button",{onClick:()=>k(e.cro),className:"inline-flex items-center justify-center px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-all duration-200 text-sm font-medium shadow-md hover:shadow-lg transform hover:scale-105",title:"View Nursing Details",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"font-semibold",children:e.cro}),(0,t.jsx)("div",{className:"text-xs opacity-90",children:e.date})]})})})]},e.patient_id)})})]})}),S>1&&(0,t.jsx)("div",{className:"px-6 py-4 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-700",children:["Page ",h," of ",S," | Total: ",u.length," records"]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[h>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>p(1),className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"First"}),(0,t.jsx)("button",{onClick:()=>p(h-1),className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Previous"})]}),(0,t.jsx)("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,S)},(e,r)=>{let a=Math.max(1,h-2)+r;return a>S?null:(0,t.jsx)("button",{onClick:()=>p(a),className:"px-3 py-2 text-sm font-medium rounded-lg ".concat(h===a?"bg-emerald-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"),children:a},a)})}),h<S&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>p(h+1),className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Next"}),(0,t.jsx)("button",{onClick:()=>p(S),className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Last"})]})]})]})})]})]})}}]);