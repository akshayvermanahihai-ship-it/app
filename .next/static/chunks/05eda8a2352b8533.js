(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33651,e=>{"use strict";e.s(["Download",()=>t],33651);let t=(0,e.i(75254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},16715,e=>{"use strict";e.s(["RefreshCw",()=>t],16715);let t=(0,e.i(75254).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},82793,e=>{"use strict";e.s(["default",()=>o]);var t=e.i(43476),r=e.i(71645),a=e.i(55436),s=e.i(33651),n=e.i(16715),i=e.i(70016),l=e.i(8776);function o(){let e=(0,l.useToastContext)(),[o,d]=(0,r.useState)([]),[c,x]=(0,r.useState)(!0),[p,h]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[y,u]=(0,r.useState)(1),[f,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{w()},[]);let w=async()=>{x(!0);try{let r=await fetch("/api/doctor/pending-patients");if(r.ok){var t;let a=await r.json();d(a.data||[]),e.success("Loaded ".concat((null==(t=a.data)?void 0:t.length)||0," pending reports"))}else e.error("Failed to fetch pending reports")}catch(t){console.error("Error:",t),e.error("Error loading data")}finally{x(!1)}},N=()=>{let e=[...o];return p.trim()&&(e=e.filter(e=>e.cro.toLowerCase().includes(p.toLowerCase())||e.patient_name.toLowerCase().includes(p.toLowerCase()))),m&&(e=e.filter(e=>{if(!e.date)return!1;try{return new Date(e.date).toISOString().split("T")[0]===m}catch(e){return!1}})),e},j=N(),v=Math.ceil(j.length/10),_=(y-1)*10,C=j.slice(_,_+10);(0,r.useEffect)(()=>{u(1)},[p,m]);let R=e=>{if(!e||"0000-00-00"===e)return"";try{let t=new Date(e);if(isNaN(t.getTime()))return"";let r=t.getDate().toString().padStart(2,"0"),a=(t.getMonth()+1).toString().padStart(2,"0"),s=t.getFullYear();return"".concat(r,"-").concat(a,"-").concat(s)}catch(e){return""}},k=async()=>{b(!0);try{let e=N(),t=i.utils.book_new(),r=[["VARAHA DIAGNOSTIC CENTER"],["PENDING REPORTS - "+new Date().toLocaleDateString()],[""],["S.No","CRO","Patient Name","Doctor Name","CT-Scan","CT Report Date","CT Review","X-Ray","X-Ray Date","X-Ray Review"]],a=e.map((e,t)=>[t+1,e.cro,e.patient_name,e.doctor_name||"",e.n_patient_ct,R(e.n_patient_ct_report_date),e.n_patient_ct_remark||"",e.n_patient_x_ray,R(e.n_patient_x_ray_report_date),e.n_patient_x_ray_remark||""]),s=[...r,...a],n=i.utils.aoa_to_sheet(s);n.A1={v:"VARAHA DIAGNOSTIC CENTER",t:"s",s:{font:{bold:!0,sz:16},alignment:{horizontal:"center"},border:{top:{style:"thin"},bottom:{style:"thin"},left:{style:"thin"},right:{style:"thin"}}}},n.A2={v:"PENDING REPORTS - "+new Date().toLocaleDateString(),t:"s",s:{font:{bold:!0,sz:14},alignment:{horizontal:"center"},border:{top:{style:"thin"},bottom:{style:"thin"},left:{style:"thin"},right:{style:"thin"}}}},["A4","B4","C4","D4","E4","F4","G4","H4","I4","J4"].forEach(e=>{n[e]&&(n[e].s={font:{bold:!0},alignment:{horizontal:"center"},border:{top:{style:"thin"},bottom:{style:"thin"},left:{style:"thin"},right:{style:"thin"}}})});for(let t=5;t<=4+e.length;t++)["A","B","C","D","E","F","G","H","I","J"].forEach(e=>{let r=e+t;n[r]&&(n[r].s={border:{top:{style:"thin"},bottom:{style:"thin"},left:{style:"thin"},right:{style:"thin"}}})});n["!merges"]=[{s:{r:0,c:0},e:{r:0,c:9}},{s:{r:1,c:0},e:{r:1,c:9}}],n["!cols"]=[{width:8},{width:15},{width:20},{width:20},{width:12},{width:15},{width:30},{width:12},{width:15},{width:30}],i.utils.book_append_sheet(t,n,"Pending Reports");let l="pending_reports_".concat(new Date().toISOString().split("T")[0],".xlsx");i.writeFile(t,l)}catch(t){console.error("Export error:",t),e.error("Export failed")}finally{b(!1)}};return(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white p-6 rounded-xl shadow-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Report Pending List"}),(0,t.jsx)("p",{className:"text-emerald-100",children:"Nursing patients with incomplete CT-Scan or X-Ray reports"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)("button",{onClick:k,disabled:f||0===j.length,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg transition-colors disabled:opacity-50",children:[(0,t.jsx)(s.Download,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:f?"Exporting...":"Export Excel"})]}),(0,t.jsxs)("button",{onClick:w,disabled:c,className:"flex items-center space-x-2 px-4 py-2 bg-emerald-500 hover:bg-emerald-400 rounded-lg transition-colors disabled:opacity-50",children:[(0,t.jsx)(n.RefreshCw,{className:"h-5 w-5 ".concat(c?"animate-spin":"")}),(0,t.jsx)("span",{children:"Refresh"})]})]})]})}),(0,t.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault()},className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(a.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,t.jsx)("input",{type:"text",placeholder:"Search by CRO or Patient Name",value:p,onChange:e=>h(e.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),(0,t.jsx)("input",{type:"date",value:m,onChange:e=>g(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent"}),(0,t.jsx)("div",{}),(0,t.jsx)("button",{type:"submit",className:"px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:"Search"})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Pending Reports"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Total: ",j.length," records | Page ",y," of ",v]})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"S.No"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CRO"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient Name"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Doctor Name"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CT-Scan"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CT Report Date"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CT Review"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"X-Ray"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"X-Ray Date"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"X-Ray Review"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:c?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:10,className:"px-6 py-12 text-center",children:(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,t.jsx)(n.RefreshCw,{className:"h-5 w-5 animate-spin text-emerald-500"}),(0,t.jsx)("span",{className:"text-gray-500",children:"Loading pending reports..."})]})})}):0===C.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:10,className:"px-6 py-12 text-center text-gray-500",children:"No pending reports found"})}):C.map((e,r)=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:_+r+1}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm font-medium text-blue-600",children:e.cro})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.patient_name})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.doctor_name||""}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:e.n_patient_ct||""}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R(e.n_patient_ct_report_date)}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.n_patient_ct_remark||""}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:e.n_patient_x_ray||""}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:R(e.n_patient_x_ray_report_date)}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.n_patient_x_ray_remark||""})]},e.patient_id))})]})}),v>1&&(0,t.jsx)("div",{className:"px-6 py-4 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-700",children:["Page ",y," of ",v," | Total: ",j.length," records"]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[y>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>u(1),className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"First"}),(0,t.jsx)("button",{onClick:()=>u(y-1),className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Previous"})]}),(0,t.jsx)("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,v)},(e,r)=>{let a=Math.max(1,y-2)+r;return a>v?null:(0,t.jsx)("button",{onClick:()=>u(a),className:"px-3 py-2 text-sm font-medium rounded-lg ".concat(y===a?"bg-emerald-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"),children:a},a)})}),y<v&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>u(y+1),className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Next"}),(0,t.jsx)("button",{onClick:()=>u(v),className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Last"})]})]})]})})]})]})}}]);