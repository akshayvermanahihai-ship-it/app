(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,56909,e=>{"use strict";e.s(["Save",()=>t],56909);let t=(0,e.i(75254).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},71689,e=>{"use strict";e.s(["ArrowLeft",()=>t],71689);let t=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3281,e=>{"use strict";e.s(["Printer",()=>t],3281);let t=(0,e.i(75254).default)("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]])},10455,e=>{"use strict";e.s(["default",()=>n]);var t=e.i(43476),r=e.i(71645),s=e.i(71689),a=e.i(3281),i=e.i(56909),l=e.i(18566);function n(){let e=(0,l.useParams)(),n=(0,l.useRouter)(),d=e.pid,[o,c]=(0,r.useState)(null),[x,h]=(0,r.useState)([]),[m,p]=(0,r.useState)(!0),[b,u]=(0,r.useState)(""),[g,y]=(0,r.useState)(""),[j,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{N()},[d]);let N=async()=>{try{let e=await fetch("https://varahasdc.co.in/api/reception/patients/".concat(d,"/payment"));if(e.ok){let t=await e.json();c(t.data.patient),h(t.data.scans),y(t.data.patient.amount_due.toString())}}catch(e){console.error("Error fetching payment data:",e)}finally{p(!1)}},v=()=>{if(o&&b){let e=parseFloat(o.amount_due.toString());y((e-parseFloat(b)).toString())}},w=async()=>{if(b&&o){f(!0);try{(await fetch("https://varahasdc.co.in/api/reception/patients/".concat(d,"/payment"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({r_amount:b,d_amount:g})})).ok?(alert("Payment updated successfully!"),n.push("/reception/patient-registration/edit")):alert("Failed to update payment")}catch(e){console.error("Error updating payment:",e),alert("Error updating payment")}finally{f(!1)}}};return m?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-6",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-6 rounded-xl shadow-lg mb-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("button",{onClick:()=>n.push("/reception/patient-registration/edit"),className:"p-2 hover:bg-blue-600 rounded-lg transition-colors",children:(0,t.jsx)(s.ArrowLeft,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Payment Details"}),(0,t.jsxs)("p",{className:"text-blue-100",children:["Invoice #",o.cro]})]})]}),(0,t.jsxs)("button",{onClick:()=>{window.print()},className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:[(0,t.jsx)(a.Printer,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Print Invoice"})]})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8 print:mb-4",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"INVOICE"}),(0,t.jsx)("div",{className:"w-24 h-1 bg-blue-600 mx-auto"})]}),(0,t.jsxs)("div",{className:"flex justify-between mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Bill To:"}),(0,t.jsxs)("div",{className:"text-gray-600",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:o.patient_name}),(0,t.jsxs)("p",{children:["CRO: ",o.cro]}),(0,t.jsxs)("p",{children:["Age: ",o.age]}),(0,t.jsxs)("p",{children:["Gender: ",o.gender]}),(0,t.jsxs)("p",{children:["Address: ",o.address]}),(0,t.jsxs)("p",{children:["Phone: ",o.contact_number]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Invoice Details:"}),(0,t.jsxs)("div",{className:"text-gray-600",children:[(0,t.jsxs)("p",{children:["Invoice #: ",o.cro]}),(0,t.jsxs)("p",{children:["Date: ",new Date().toLocaleDateString()]}),(0,t.jsxs)("p",{children:["Hospital: ",o.h_name]}),(0,t.jsxs)("p",{children:["Doctor: ",o.dname]})]})]})]}),(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gray-50",children:[(0,t.jsx)("th",{className:"border border-gray-300 px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"S.No"}),(0,t.jsx)("th",{className:"border border-gray-300 px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Name Of Scan"}),(0,t.jsx)("th",{className:"border border-gray-300 px-4 py-3 text-right text-sm font-semibold text-gray-900",children:"Charges"})]})}),(0,t.jsxs)("tbody",{children:[x.map((e,r)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"border border-gray-300 px-4 py-3 text-sm",children:r+1}),(0,t.jsx)("td",{className:"border border-gray-300 px-4 py-3 text-sm font-medium",children:e.s_name}),(0,t.jsxs)("td",{className:"border border-gray-300 px-4 py-3 text-sm text-right",children:["₹",e.charges]})]},e.s_id)),(0,t.jsxs)("tr",{className:"bg-gray-50",children:[(0,t.jsx)("td",{colSpan:2,className:"border border-gray-300 px-4 py-3 text-sm font-semibold text-right",children:"Total Amount"}),(0,t.jsxs)("td",{className:"border border-gray-300 px-4 py-3 text-sm font-semibold text-right",children:["₹",o.amount]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{colSpan:2,className:"border border-gray-300 px-4 py-3 text-sm font-semibold text-right",children:"Previous Deposit"}),(0,t.jsxs)("td",{className:"border border-gray-300 px-4 py-3 text-sm text-right",children:["₹",o.amount_reci]})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{colSpan:2,className:"border border-gray-300 px-4 py-3 text-sm font-semibold text-right",children:"Previous Due"}),(0,t.jsx)("td",{className:"border border-gray-300 px-4 py-3 text-sm text-right",children:(0,t.jsx)("input",{type:"text",value:o.amount_due,className:"w-full text-right bg-transparent border-none outline-none",readOnly:!0})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{colSpan:2,className:"border border-gray-300 px-4 py-3 text-sm font-semibold text-right",children:"Received Amount"}),(0,t.jsx)("td",{className:"border border-gray-300 px-4 py-3 text-sm text-right",children:(0,t.jsx)("input",{type:"number",value:b,onChange:e=>{u(e.target.value),setTimeout(v,0)},className:"w-full text-right border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0"})})]}),(0,t.jsxs)("tr",{className:"bg-yellow-50",children:[(0,t.jsx)("td",{colSpan:2,className:"border border-gray-300 px-4 py-3 text-sm font-bold text-right",children:"Total Due"}),(0,t.jsx)("td",{className:"border border-gray-300 px-4 py-3 text-sm text-right",children:(0,t.jsx)("input",{type:"text",value:g,className:"w-full text-right bg-yellow-50 border border-gray-300 rounded px-2 py-1 font-bold",readOnly:!0})})]})]})]})}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4 print:hidden",children:[(0,t.jsxs)("button",{onClick:w,disabled:!b||j,className:"flex items-center space-x-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,t.jsx)(i.Save,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:j?"Saving...":"Save"})]}),(0,t.jsxs)("button",{onClick:w,disabled:parseFloat(g)>0||!b||j,className:"flex items-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,t.jsx)(a.Printer,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Save & Print"})]})]}),(0,t.jsx)("div",{className:"mt-8 pt-8 border-t border-gray-200 text-center text-gray-500",children:(0,t.jsx)("p",{className:"text-sm",children:"Thank you very much for doing business with us. We look forward to working with you again!"})})]})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Patient Not Found"}),(0,t.jsx)("button",{onClick:()=>n.push("/reception/patient-registration/edit"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Back to Patient List"})]})})}}]);