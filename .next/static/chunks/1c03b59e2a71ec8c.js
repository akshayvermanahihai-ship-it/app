(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33651,e=>{"use strict";e.s(["Download",()=>t],33651);let t=(0,e.i(75254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},97548,e=>{"use strict";e.s(["Filter",()=>t],97548);let t=(0,e.i(75254).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},35408,e=>{"use strict";e.s(["TrendingDown",()=>t],35408);let t=(0,e.i(75254).default)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},55562,e=>{"use strict";e.s(["default",()=>o]);var t=e.i(43476),s=e.i(71645),a=e.i(88844),l=e.i(33651),r=e.i(97548),n=e.i(87316),c=e.i(25652),i=e.i(35408),d=e.i(8776);function o(){let e=(0,d.useToastContext)(),[o,x]=(0,s.useState)([]),[m,p]=(0,s.useState)(null),[h,y]=(0,s.useState)(!1),[u,g]=(0,s.useState)(1),[j]=(0,s.useState)(10),[N,b]=(0,s.useState)({type:"",from_date:"",to_date:"",item_id:""}),[f,v]=(0,s.useState)([]);(0,s.useEffect)(()=>{_(),w()},[]);let _=async()=>{try{let e=await fetch("https://varahasdc.co.in/api/inventory/items");if(e.ok){let t=await e.json();v(t.data||[])}}catch(e){console.error("Error fetching items:",e)}},w=async()=>{y(!0),g(1);try{let e=new URLSearchParams;Object.entries(N).forEach(t=>{let[s,a]=t;a&&"ALL"!==a&&e.append(s,a)});let t=await fetch("https://varahasdc.co.in/api/inventory/transactions?".concat(e));if(t.ok){let e=await t.json();x(e.data||[]),T(e.data||[])}}catch(t){console.error("Error fetching transactions:",t),e.error("Error fetching transactions")}finally{y(!1)}},T=e=>{let t=new Map,s=new Map,a=0;e.forEach(l=>{let r=l.total_amount||0;a+=r;let n=l.item_name;t.has(n)||t.set(n,{item_name:n,transaction_count:0,total_value:0});let c=t.get(n);if(c.transaction_count++,c.total_value+=r,"INWARD"===l.transaction_type&&l.supplier){let t=l.supplier;s.has(t)||s.set(t,{supplier_name:t,item_count:0,transaction_count:0,total_value:0});let a=s.get(t);a.transaction_count++,a.total_value+=r,a.item_count=[...new Set(e.filter(e=>e.supplier===t).map(e=>e.item_name))].length}}),p({total_items:[...new Set(e.map(e=>e.item_name))].length,total_transactions:e.length,total_value:a,by_item:Array.from(t.values()),by_supplier:Array.from(s.values())})},S=Math.ceil(o.length/j),A=(u-1)*j,k=o.slice(A,A+j),D=(e,t)=>{b(s=>({...s,[e]:t}))};return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Inventory Report"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Comprehensive inventory transaction reporting with value calculations"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[(0,t.jsx)(r.Filter,{className:"h-5 w-5 text-gray-600 mr-2"}),(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Filters"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transaction Type"}),(0,t.jsxs)("select",{value:N.type,onChange:e=>D("type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500",children:[(0,t.jsx)("option",{value:"",children:"All Types"}),(0,t.jsx)("option",{value:"INWARD",children:"Inward"}),(0,t.jsx)("option",{value:"OUTWARD",children:"Outward"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item"}),(0,t.jsxs)("select",{value:N.item_id,onChange:e=>D("item_id",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500",children:[(0,t.jsx)("option",{value:"",children:"All Items"}),f.map(e=>(0,t.jsx)("option",{value:e.id,children:e.item_name},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Date"}),(0,t.jsx)("input",{type:"text",placeholder:"28-09-2025",value:N.from_date,onChange:e=>{let t=e.target.value.replace(/\D/g,"");t.length>=2&&(t=t.slice(0,2)+"-"+t.slice(2)),t.length>=5&&(t=t.slice(0,5)+"-"+t.slice(5,9)),D("from_date",t)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500",maxLength:10})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Date"}),(0,t.jsx)("input",{type:"text",placeholder:"28-09-2025",value:N.to_date,onChange:e=>{let t=e.target.value.replace(/\D/g,"");t.length>=2&&(t=t.slice(0,2)+"-"+t.slice(2)),t.length>=5&&(t=t.slice(0,5)+"-"+t.slice(5,9)),D("to_date",t)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-red-500",maxLength:10})]})]}),(0,t.jsxs)("div",{className:"flex space-x-3 mt-4",children:[(0,t.jsx)("button",{onClick:w,disabled:h,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:h?"Loading...":"Apply Filters"}),(0,t.jsxs)("button",{onClick:()=>{try{if(0===o.length)return void e.error("No data to export");let t=N.from_date&&N.to_date?"".concat(N.from_date," to ").concat(N.to_date):"All Dates",s=N.type||"All Types",a=["VARAHA SDC : INVENTORY MANAGEMENT","INVENTORY TRANSACTION REPORT","Date Range: ".concat(t),"Transaction Type: ".concat(s),"","S.No,Item Name,Type,Quantity,Unit,Rate,Amount,Supplier/Department,Date",...o.map((e,t)=>[t+1,'"'.concat(e.item_name||"",'"'),e.transaction_type,e.quantity||0,'"'.concat(e.unit||"",'"'),e.rate||0,e.total_amount||0,'"'.concat(e.supplier||e.department||"",'"'),'"'.concat(e.transaction_date||"",'"')].join(","))].join("\n"),l=new Blob([a],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),n=URL.createObjectURL(l);r.setAttribute("href",n),r.setAttribute("download","inventory-transaction-report.csv"),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r),e.success("Report downloaded successfully")}catch(t){console.error("Download error:",t),e.error("Error downloading report")}},className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[(0,t.jsx)(l.Download,{className:"h-4 w-4 mr-2 inline"}),"Excel"]})]})]}),m&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(a.Package,{className:"h-8 w-8 text-blue-600"}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Items"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:m.total_items||0})]})]})}),(0,t.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(c.TrendingUp,{className:"h-8 w-8 text-green-600"}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Transactions"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:m.total_transactions||0})]})]})}),(0,t.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(n.Calendar,{className:"h-8 w-8 text-purple-600"}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["₹",(m.total_value||0).toLocaleString()]})]})]})})]}),m&&(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Transactions by Item"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Sr.No"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Item"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Transactions"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Amount"})]})}),(0,t.jsx)("tbody",{children:m.by_item&&m.by_item.length>0?(0,t.jsxs)(t.Fragment,{children:[m.by_item.map((e,s)=>(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsx)("td",{className:"px-4 py-2",children:s+1}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.item_name||"Unknown"}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.transaction_count||0}),(0,t.jsxs)("td",{className:"px-4 py-2",children:["₹",(e.total_value||0).toLocaleString()]})]},s)),(0,t.jsxs)("tr",{className:"border-t-2 border-gray-400 bg-gray-100 font-bold",children:[(0,t.jsx)("td",{className:"px-4 py-2",colSpan:2,children:"Total"}),(0,t.jsx)("td",{className:"px-4 py-2",children:m.by_item.reduce((e,t)=>e+(t.transaction_count||0),0)}),(0,t.jsxs)("td",{className:"px-4 py-2",children:["₹",m.by_item.reduce((e,t)=>e+(t.total_value||0),0).toLocaleString()]})]})]}):(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"px-4 py-4 text-center text-gray-500",children:"No data available"})})})]})})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Transactions by Supplier"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Sr.No"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Supplier"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Items"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Transactions"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left",children:"Amount"})]})}),(0,t.jsx)("tbody",{children:m.by_supplier&&m.by_supplier.length>0?(0,t.jsxs)(t.Fragment,{children:[m.by_supplier.map((e,s)=>(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsx)("td",{className:"px-4 py-2",children:s+1}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.supplier_name||"Unknown"}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.item_count||0}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.transaction_count||0}),(0,t.jsxs)("td",{className:"px-4 py-2",children:["₹",(e.total_value||0).toLocaleString()]})]},s)),(0,t.jsxs)("tr",{className:"border-t-2 border-gray-400 bg-gray-100 font-bold",children:[(0,t.jsx)("td",{className:"px-4 py-2",colSpan:2,children:"Total"}),(0,t.jsx)("td",{className:"px-4 py-2",children:m.by_supplier.reduce((e,t)=>e+(t.item_count||0),0)}),(0,t.jsx)("td",{className:"px-4 py-2",children:m.by_supplier.reduce((e,t)=>e+(t.transaction_count||0),0)}),(0,t.jsxs)("td",{className:"px-4 py-2",children:["₹",m.by_supplier.reduce((e,t)=>e+(t.total_value||0),0).toLocaleString()]})]})]}):(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,className:"px-4 py-4 text-center text-gray-500",children:"No data available"})})})]})})]})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Detailed Transactions"}),(0,t.jsxs)("div",{className:"overflow-x-auto",children:[(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"S.No"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Item"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rate"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Supplier/Dept"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-200",children:h?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:8,className:"px-6 py-8 text-center",children:(0,t.jsxs)("div",{className:"flex items-center justify-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"}),(0,t.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading transactions..."})]})})}):k&&k.length>0?k.map((e,s)=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:A+s+1}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.item_name||"Unknown"}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,t.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("INWARD"===e.transaction_type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"INWARD"===e.transaction_type?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.TrendingUp,{className:"h-3 w-3 mr-1"}),"IN"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.TrendingDown,{className:"h-3 w-3 mr-1"}),"OUT"]})})}),(0,t.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900",children:[e.quantity," ",e.unit]}),(0,t.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900",children:["₹",(e.rate||0).toLocaleString()]}),(0,t.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900",children:["₹",(e.total_amount||0).toLocaleString()]}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.supplier||e.department||"N/A"}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.transaction_date||"N/A"})]},s)):(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:8,className:"px-6 py-8 text-center text-gray-500",children:"No transactions found for the selected criteria"})})})]}),o.length>j&&(0,t.jsxs)("div",{className:"flex items-center justify-between mt-6 px-6",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",A+1," to ",Math.min(A+j,o.length)," of ",o.length," results"]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:()=>g(e=>Math.max(e-1,1)),disabled:1===u,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),Array.from({length:Math.min(5,S)},(e,s)=>{let a=u<=3?s+1:u-2+s;return a>S?null:(0,t.jsx)("button",{onClick:()=>g(a),className:"px-3 py-1 border rounded text-sm ".concat(u===a?"bg-red-600 text-white border-red-600":"border-gray-300 hover:bg-gray-50"),children:a},a)}),(0,t.jsx)("button",{onClick:()=>g(e=>Math.min(e+1,S)),disabled:u===S,className:"px-3 py-1 border border-gray-300 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})]})]})]})]})})}}]);