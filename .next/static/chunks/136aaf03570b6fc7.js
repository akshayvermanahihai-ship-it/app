(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,56909,e=>{"use strict";e.s(["Save",()=>a],56909);let a=(0,e.i(75254).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},71689,e=>{"use strict";e.s(["ArrowLeft",()=>a],71689);let a=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},20939,e=>{"use strict";e.s(["default",()=>d]);var a=e.i(43476),s=e.i(71645),r=e.i(71689),t=e.i(56909),l=e.i(8776),n=e.i(18566);function d(e){let{params:d}=e,o=(0,l.useToastContext)(),c=(0,n.useRouter)(),[i,u]=(0,s.useState)(null),[m,x]=(0,s.useState)(!0),[g,b]=(0,s.useState)(!1),[p,h]=(0,s.useState)("");(0,s.useEffect)(()=>{console.log("Edit page loaded, params:",d),d.then(e=>{let{id:a}=e;console.log("ID extracted from params:",a),h(a)})},[d]);let y=e=>{if(!e||"-"===e)return"";if(e.includes("T"))return e.split("T")[0];if(e.match(/^\d{2}-\d{2}-\d{4}$/)){let a=e.split("-");return"".concat(a[2],"-").concat(a[1],"-").concat(a[0])}return e};(0,s.useEffect)(()=>{p&&f()},[p]);let f=async()=>{try{let a=await fetch("https://varahasdc.co.in/api/console/detail-report");if(a.ok){var e;let s=null==(e=(await a.json()).data)?void 0:e.find(e=>e.con_id.toString()===p);s?u({...s,date:y(s.date),scan_date:y(s.scan_date),allot_date:y(s.allot_date),added_on:y(s.added_on)}):(o.error("Console record not found"),c.push("/console/update"))}else o.error("Failed to fetch console record")}catch(e){console.error("Error fetching record:",e),o.error("Error loading console record")}finally{x(!1)}},j=async()=>{if(i){b(!0);try{(await fetch("https://varahasdc.co.in/api/console/update-console",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({con_id:i.con_id,scan_date:i.scan_date,allot_date:i.allot_date,date:i.date,examination_id:i.examination_id,status:i.status,number_scan:i.number_scan,number_film:i.number_film,number_contrast:i.number_contrast,technician_name:i.technician_name,issue_cd:i.issue_cd,remark:i.remark})})).ok?(o.success("Console record updated successfully"),c.push("/console/update")):o.error("Failed to update console record")}catch(e){console.error("Error updating record:",e),o.error("Error updating console record")}finally{b(!1)}}};return m?(0,a.jsx)("div",{className:"p-6 flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-sky-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading console record..."})]})}):i?(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 text-white p-6 rounded-xl shadow-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("button",{onClick:()=>c.push("/console/update"),className:"p-2 bg-sky-500 hover:bg-sky-400 rounded-lg transition-colors",children:(0,a.jsx)(r.ArrowLeft,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Edit Console Record"}),(0,a.jsxs)("p",{className:"text-sky-100",children:["CRO: ",i.c_p_cro]})]})]}),(0,a.jsxs)("button",{onClick:j,disabled:g,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg transition-colors disabled:opacity-50",children:[(0,a.jsx)(t.Save,{className:"h-5 w-5 ".concat(g?"animate-spin":"")}),(0,a.jsx)("span",{children:g?"Saving...":"Save Changes"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Patient Information"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CRO Number"}),(0,a.jsx)("input",{type:"text",value:i.c_p_cro,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient Name"}),(0,a.jsx)("input",{type:"text",value:"".concat(i.pre," ").concat(i.patient_name),readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Doctor"}),(0,a.jsx)("input",{type:"text",value:i.doctor_name||"-",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Console Details (Editable)"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Examination ID"}),(0,a.jsx)("input",{type:"number",value:i.examination_id||"",onChange:e=>u({...i,examination_id:parseInt(e.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,a.jsxs)("select",{value:i.status||"",onChange:e=>u({...i,status:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"Select Status"}),(0,a.jsx)("option",{value:"Pending",children:"Pending"}),(0,a.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,a.jsx)("option",{value:"Complete",children:"Complete"}),(0,a.jsx)("option",{value:"Cancelled",children:"Cancelled"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Scans"}),(0,a.jsx)("input",{type:"number",value:i.number_scan||"",onChange:e=>u({...i,number_scan:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Films"}),(0,a.jsx)("input",{type:"number",value:i.number_film||"",onChange:e=>u({...i,number_film:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Contrast"}),(0,a.jsx)("input",{type:"number",value:i.number_contrast||"",onChange:e=>u({...i,number_contrast:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Technician Name"}),(0,a.jsx)("input",{type:"text",value:i.technician_name||"",onChange:e=>u({...i,technician_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Issue CD/DVD"}),(0,a.jsxs)("select",{value:i.issue_cd||"",onChange:e=>u({...i,issue_cd:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"Select Option"}),(0,a.jsx)("option",{value:"Yes",children:"Yes"}),(0,a.jsx)("option",{value:"No",children:"No"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remark"}),(0,a.jsx)("textarea",{value:i.remark||"",onChange:e=>u({...i,remark:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Enter any remarks..."})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Patient Date Settings (Editable)"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registration Date"}),(0,a.jsx)("input",{type:"date",value:i.date,onChange:e=>u({...i,date:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Allot Date"}),(0,a.jsx)("input",{type:"date",value:i.allot_date,onChange:e=>u({...i,allot_date:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Scan Date"}),(0,a.jsx)("input",{type:"date",value:i.scan_date,onChange:e=>u({...i,scan_date:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Console Date & Time (Read Only)"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Console Date"}),(0,a.jsx)("input",{type:"date",value:i.added_on,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),(0,a.jsx)("input",{type:"time",value:i.start_time,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stop Time"}),(0,a.jsx)("input",{type:"time",value:i.stop_time,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]})]})]})]})]}):(0,a.jsx)("div",{className:"p-6 text-center",children:(0,a.jsx)("p",{className:"text-gray-600",children:"Console record not found"})})}}]);